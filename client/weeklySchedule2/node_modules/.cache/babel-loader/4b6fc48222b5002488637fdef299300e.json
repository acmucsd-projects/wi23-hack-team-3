{"ast":null,"code":"/*\n\n@license\ndhtmlxScheduler v.5.3.13 Standard\n\nTo use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com\n\n(c) XB Software Ltd.\n\n*/\n!function () {\n  function dtmlXMLLoaderObject(t, e, i, n) {\n    return this.xmlDoc = \"\", this.async = void 0 === i || i, this.onloadAction = t || null, this.mainObject = e || null, this.waitCall = null, this.rSeed = n || !1, this;\n  }\n\n  function dhtmlDragAndDropObject() {\n    return window.dhtmlDragAndDrop ? window.dhtmlDragAndDrop : (this.lastLanding = 0, this.dragNode = 0, this.dragStartNode = 0, this.dragStartObject = 0, this.tempDOMU = null, this.tempDOMM = null, this.waitDrag = 0, window.dhtmlDragAndDrop = this, this);\n  }\n\n  function _dhtmlxError(t, e, i) {\n    return this.catches || (this.catches = []), this;\n  }\n\n  function dhtmlXHeir(t, e) {\n    for (var i in e) {\n      \"function\" == typeof e[i] && (t[i] = e[i]);\n    }\n\n    return t;\n  }\n\n  window.dhtmlx || (window.dhtmlx = function (t) {\n    for (var e in t) {\n      dhtmlx[e] = t[e];\n    }\n\n    return dhtmlx;\n  }), dhtmlx.extend_api = function (t, e, i) {\n    var n = window[t];\n    n && (window[t] = function (t) {\n      var i;\n\n      if (t && \"object\" == typeof t && !t.tagName) {\n        i = n.apply(this, e._init ? e._init(t) : arguments);\n\n        for (var a in dhtmlx) {\n          e[a] && this[e[a]](dhtmlx[a]);\n        }\n\n        for (var a in t) {\n          e[a] ? this[e[a]](t[a]) : 0 === a.indexOf(\"on\") && this.attachEvent(a, t[a]);\n        }\n      } else i = n.apply(this, arguments);\n\n      return e._patch && e._patch(this), i || this;\n    }, window[t].prototype = n.prototype, i && dhtmlXHeir(window[t].prototype, i));\n  }, window.dhtmlxAjax = {\n    get: function get(t, e) {\n      var i = new dtmlXMLLoaderObject(!0);\n      return i.async = arguments.length < 3, i.waitCall = e, i.loadXML(t), i;\n    },\n    post: function post(t, e, i) {\n      var n = new dtmlXMLLoaderObject(!0);\n      return n.async = arguments.length < 4, n.waitCall = i, n.loadXML(t, !0, e), n;\n    },\n    getSync: function getSync(t) {\n      return this.get(t, null, !0);\n    },\n    postSync: function postSync(t, e) {\n      return this.post(t, e, null, !0);\n    }\n  }, window.dtmlXMLLoaderObject = dtmlXMLLoaderObject, dtmlXMLLoaderObject.count = 0, dtmlXMLLoaderObject.prototype.waitLoadFunction = function (t) {\n    var e = !0;\n    return this.check = function () {\n      if (t && t.onloadAction && (!t.xmlDoc.readyState || 4 == t.xmlDoc.readyState)) {\n        if (!e) return;\n        e = !1, dtmlXMLLoaderObject.count++, \"function\" == typeof t.onloadAction && t.onloadAction(t.mainObject, null, null, null, t), t.waitCall && (t.waitCall.call(this, t), t.waitCall = null);\n      }\n    }, this.check;\n  }, dtmlXMLLoaderObject.prototype.getXMLTopNode = function (t, e) {\n    var i;\n\n    if (this.xmlDoc.responseXML) {\n      var n = this.xmlDoc.responseXML.getElementsByTagName(t);\n      if (0 === n.length && -1 != t.indexOf(\":\")) var n = this.xmlDoc.responseXML.getElementsByTagName(t.split(\":\")[1]);\n      i = n[0];\n    } else i = this.xmlDoc.documentElement;\n\n    if (i) return this._retry = !1, i;\n\n    if (!this._retry && _isIE) {\n      this._retry = !0;\n      var e = this.xmlDoc;\n      return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\\s]+/, \"\"), !0), this.getXMLTopNode(t, e);\n    }\n\n    return dhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [e || this.xmlDoc, this.mainObject]), document.createElement(\"div\");\n  }, dtmlXMLLoaderObject.prototype.loadXMLString = function (t, e) {\n    if (_isIE) this.xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\"), this.xmlDoc.async = this.async, this.xmlDoc.onreadystatechange = function () {}, this.xmlDoc.loadXML(t);else {\n      var i = new DOMParser();\n      this.xmlDoc = i.parseFromString(t, \"text/xml\");\n    }\n    e || (this.onloadAction && this.onloadAction(this.mainObject, null, null, null, this), this.waitCall && (this.waitCall(), this.waitCall = null));\n  }, dtmlXMLLoaderObject.prototype.loadXML = function (t, e, i, n) {\n    this.rSeed && (t += (-1 != t.indexOf(\"?\") ? \"&\" : \"?\") + \"a_dhx_rSeed=\" + new Date().valueOf()), this.filePath = t, !_isIE && window.XMLHttpRequest ? this.xmlDoc = new XMLHttpRequest() : this.xmlDoc = new ActiveXObject(\"Microsoft.XMLHTTP\"), this.async && (this.xmlDoc.onreadystatechange = new this.waitLoadFunction(this)), \"string\" == typeof e ? this.xmlDoc.open(e, t, this.async) : this.xmlDoc.open(e ? \"POST\" : \"GET\", t, this.async), n ? (this.xmlDoc.setRequestHeader(\"User-Agent\", \"dhtmlxRPC v0.1 (\" + navigator.userAgent + \")\"), this.xmlDoc.setRequestHeader(\"Content-type\", \"text/xml\")) : e && this.xmlDoc.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\"), this.xmlDoc.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\"), this.xmlDoc.send(i), this.async || new this.waitLoadFunction(this)();\n  }, dtmlXMLLoaderObject.prototype.destructor = function () {\n    return this._filterXPath = null, this._getAllNamedChilds = null, this._retry = null, this.async = null, this.rSeed = null, this.filePath = null, this.onloadAction = null, this.mainObject = null, this.xmlDoc = null, this.doXPath = null, this.doXPathOpera = null, this.doXSLTransToObject = null, this.doXSLTransToString = null, this.loadXML = null, this.loadXMLString = null, this.doSerialization = null, this.xmlNodeToJSON = null, this.getXMLTopNode = null, this.setXSLParamValue = null, null;\n  }, dtmlXMLLoaderObject.prototype.xmlNodeToJSON = function (t) {\n    for (var e = {}, i = 0; i < t.attributes.length; i++) {\n      e[t.attributes[i].name] = t.attributes[i].value;\n    }\n\n    e._tagvalue = t.firstChild ? t.firstChild.nodeValue : \"\";\n\n    for (var i = 0; i < t.childNodes.length; i++) {\n      var n = t.childNodes[i].tagName;\n      n && (e[n] || (e[n] = []), e[n].push(this.xmlNodeToJSON(t.childNodes[i])));\n    }\n\n    return e;\n  }, window.dhtmlDragAndDropObject = dhtmlDragAndDropObject, dhtmlDragAndDropObject.prototype.removeDraggableItem = function (t) {\n    t.onmousedown = null, t.dragStarter = null, t.dragLanding = null;\n  }, dhtmlDragAndDropObject.prototype.addDraggableItem = function (t, e) {\n    t.onmousedown = this.preCreateDragCopy, t.dragStarter = e, this.addDragLanding(t, e);\n  }, dhtmlDragAndDropObject.prototype.addDragLanding = function (t, e) {\n    t.dragLanding = e;\n  }, dhtmlDragAndDropObject.prototype.preCreateDragCopy = function (t) {\n    if (!t && !window.event || 2 != (t || event).button) return window.dhtmlDragAndDrop.waitDrag ? (window.dhtmlDragAndDrop.waitDrag = 0, document.body.onmouseup = window.dhtmlDragAndDrop.tempDOMU, document.body.onmousemove = window.dhtmlDragAndDrop.tempDOMM, !1) : (window.dhtmlDragAndDrop.dragNode && window.dhtmlDragAndDrop.stopDrag(t), window.dhtmlDragAndDrop.waitDrag = 1, window.dhtmlDragAndDrop.tempDOMU = document.body.onmouseup, window.dhtmlDragAndDrop.tempDOMM = document.body.onmousemove, window.dhtmlDragAndDrop.dragStartNode = this, window.dhtmlDragAndDrop.dragStartObject = this.dragStarter, document.body.onmouseup = window.dhtmlDragAndDrop.preCreateDragCopy, document.body.onmousemove = window.dhtmlDragAndDrop.callDrag, window.dhtmlDragAndDrop.downtime = new Date().valueOf(), !(!t || !t.preventDefault) && (t.preventDefault(), !1));\n  }, dhtmlDragAndDropObject.prototype.callDrag = function (t) {\n    t || (t = window.event);\n    var e = window.dhtmlDragAndDrop;\n\n    if (!(new Date().valueOf() - e.downtime < 100)) {\n      if (!e.dragNode) {\n        if (!e.waitDrag) return e.stopDrag(t, !0);\n        if (e.dragNode = e.dragStartObject._createDragNode(e.dragStartNode, t), !e.dragNode) return e.stopDrag();\n        e.dragNode.onselectstart = function () {\n          return !1;\n        }, e.gldragNode = e.dragNode, document.body.appendChild(e.dragNode), document.body.onmouseup = e.stopDrag, e.waitDrag = 0, e.dragNode.pWindow = window, e.initFrameRoute();\n      }\n\n      if (e.dragNode.parentNode != window.document.body && e.gldragNode) {\n        var i = e.gldragNode;\n        e.gldragNode.old && (i = e.gldragNode.old), i.parentNode.removeChild(i);\n        var n = e.dragNode.pWindow;\n\n        if (i.pWindow && i.pWindow.dhtmlDragAndDrop.lastLanding && i.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(i.pWindow.dhtmlDragAndDrop.lastLanding), _isIE) {\n          var a = document.createElement(\"div\");\n          a.innerHTML = e.dragNode.outerHTML, e.dragNode = a.childNodes[0];\n        } else e.dragNode = e.dragNode.cloneNode(!0);\n\n        e.dragNode.pWindow = window, e.gldragNode.old = e.dragNode, document.body.appendChild(e.dragNode), n.dhtmlDragAndDrop.dragNode = e.dragNode;\n      }\n\n      e.dragNode.style.left = t.clientX + 15 + (e.fx ? -1 * e.fx : 0) + (document.body.scrollLeft || document.documentElement.scrollLeft) + \"px\", e.dragNode.style.top = t.clientY + 3 + (e.fy ? -1 * e.fy : 0) + (document.body.scrollTop || document.documentElement.scrollTop) + \"px\";\n      var r;\n      r = t.srcElement ? t.srcElement : t.target, e.checkLanding(r, t);\n    }\n  }, dhtmlDragAndDropObject.prototype.calculateFramePosition = function (t) {\n    if (window.name) {\n      for (var e = parent.frames[window.name].frameElement.offsetParent, i = 0, n = 0; e;) {\n        i += e.offsetLeft, n += e.offsetTop, e = e.offsetParent;\n      }\n\n      if (parent.dhtmlDragAndDrop) {\n        var a = parent.dhtmlDragAndDrop.calculateFramePosition(1);\n        i += 1 * a.split(\"_\")[0], n += 1 * a.split(\"_\")[1];\n      }\n\n      if (t) return i + \"_\" + n;\n      this.fx = i, this.fy = n;\n    }\n\n    return \"0_0\";\n  }, dhtmlDragAndDropObject.prototype.checkLanding = function (t, e) {\n    t && t.dragLanding ? (this.lastLanding && this.lastLanding.dragLanding._dragOut(this.lastLanding), this.lastLanding = t, this.lastLanding = this.lastLanding.dragLanding._dragIn(this.lastLanding, this.dragStartNode, e.clientX, e.clientY, e), this.lastLanding_scr = _isIE ? e.srcElement : e.target) : t && \"BODY\" != t.tagName ? this.checkLanding(t.parentNode, e) : (this.lastLanding && this.lastLanding.dragLanding._dragOut(this.lastLanding, e.clientX, e.clientY, e), this.lastLanding = 0, this._onNotFound && this._onNotFound());\n  }, dhtmlDragAndDropObject.prototype.stopDrag = function (t, e) {\n    var i = window.dhtmlDragAndDrop;\n\n    if (!e) {\n      i.stopFrameRoute();\n      var n = i.lastLanding;\n      i.lastLanding = null, n && n.dragLanding._drag(i.dragStartNode, i.dragStartObject, n, _isIE ? event.srcElement : t.target);\n    }\n\n    i.lastLanding = null, i.dragNode && i.dragNode.parentNode == document.body && i.dragNode.parentNode.removeChild(i.dragNode), i.dragNode = 0, i.gldragNode = 0, i.fx = 0, i.fy = 0, i.dragStartNode = 0, i.dragStartObject = 0, document.body.onmouseup = i.tempDOMU, document.body.onmousemove = i.tempDOMM, i.tempDOMU = null, i.tempDOMM = null, i.waitDrag = 0;\n  }, dhtmlDragAndDropObject.prototype.stopFrameRoute = function (t) {\n    t && window.dhtmlDragAndDrop.stopDrag(1, 1);\n\n    for (var e = 0; e < window.frames.length; e++) {\n      try {\n        window.frames[e] != t && window.frames[e].dhtmlDragAndDrop && window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window);\n      } catch (t) {}\n    }\n\n    try {\n      parent.dhtmlDragAndDrop && parent != window && parent != t && parent.dhtmlDragAndDrop.stopFrameRoute(window);\n    } catch (t) {}\n  }, dhtmlDragAndDropObject.prototype.initFrameRoute = function (t, e) {\n    t && (window.dhtmlDragAndDrop.preCreateDragCopy(), window.dhtmlDragAndDrop.dragStartNode = t.dhtmlDragAndDrop.dragStartNode, window.dhtmlDragAndDrop.dragStartObject = t.dhtmlDragAndDrop.dragStartObject, window.dhtmlDragAndDrop.dragNode = t.dhtmlDragAndDrop.dragNode, window.dhtmlDragAndDrop.gldragNode = t.dhtmlDragAndDrop.dragNode, window.document.body.onmouseup = window.dhtmlDragAndDrop.stopDrag, window.waitDrag = 0, !_isIE && e && (!_isFF || _FFrv < 1.8) && window.dhtmlDragAndDrop.calculateFramePosition());\n\n    try {\n      parent.dhtmlDragAndDrop && parent != window && parent != t && parent.dhtmlDragAndDrop.initFrameRoute(window);\n    } catch (t) {}\n\n    for (var i = 0; i < window.frames.length; i++) {\n      try {\n        window.frames[i] != t && window.frames[i].dhtmlDragAndDrop && window.frames[i].dhtmlDragAndDrop.initFrameRoute(window, !t || e ? 1 : 0);\n      } catch (t) {}\n    }\n  };\n\n  var _isFF = !1,\n      _isIE = !1,\n      _isOpera = !1,\n      _isKHTML = !1,\n      _isMacOS = !1,\n      _isChrome = !1,\n      _FFrv = !1,\n      _KHTMLrv = !1,\n      _OperaRv = !1;\n\n  -1 != navigator.userAgent.indexOf(\"Macintosh\") && (_isMacOS = !0), navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1 && (_isChrome = !0), -1 != navigator.userAgent.indexOf(\"Safari\") || -1 != navigator.userAgent.indexOf(\"Konqueror\") ? (_KHTMLrv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf(\"Safari\") + 7, 5)), _KHTMLrv > 525 ? (_isFF = !0, _FFrv = 1.9) : _isKHTML = !0) : -1 != navigator.userAgent.indexOf(\"Opera\") ? (_isOpera = !0, _OperaRv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf(\"Opera\") + 6, 3))) : -1 != navigator.appName.indexOf(\"Microsoft\") ? (_isIE = !0, -1 == navigator.appVersion.indexOf(\"MSIE 8.0\") && -1 == navigator.appVersion.indexOf(\"MSIE 9.0\") && -1 == navigator.appVersion.indexOf(\"MSIE 10.0\") || \"BackCompat\" == document.compatMode || (_isIE = 8)) : \"Netscape\" == navigator.appName && -1 != navigator.userAgent.indexOf(\"Trident\") ? _isIE = 8 : (_isFF = !0, _FFrv = parseFloat(navigator.userAgent.split(\"rv:\")[1])), dtmlXMLLoaderObject.prototype.doXPath = function (t, e, i, n) {\n    if (_isKHTML || !_isIE && !window.XPathResult) return this.doXPathOpera(t, e);\n    if (_isIE) return e || (e = this.xmlDoc.nodeName ? this.xmlDoc : this.xmlDoc.responseXML), e || dhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [e || this.xmlDoc, this.mainObject]), i && e.setProperty(\"SelectionNamespaces\", \"xmlns:xsl='\" + i + \"'\"), \"single\" == n ? e.selectSingleNode(t) : e.selectNodes(t) || new Array(0);\n    var a = e;\n    e || (e = this.xmlDoc.nodeName ? this.xmlDoc : this.xmlDoc.responseXML), e || dhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [e || this.xmlDoc, this.mainObject]), -1 != e.nodeName.indexOf(\"document\") ? a = e : (a = e, e = e.ownerDocument);\n    var r = XPathResult.ANY_TYPE;\n    \"single\" == n && (r = XPathResult.FIRST_ORDERED_NODE_TYPE);\n    var s = [],\n        o = e.evaluate(t, a, function (t) {\n      return i;\n    }, r, null);\n    if (r == XPathResult.FIRST_ORDERED_NODE_TYPE) return o.singleNodeValue;\n\n    for (var d = o.iterateNext(); d;) {\n      s[s.length] = d, d = o.iterateNext();\n    }\n\n    return s;\n  }, _dhtmlxError.prototype.catchError = function (t, e) {\n    this.catches[t] = e;\n  }, _dhtmlxError.prototype.throwError = function (t, e, i) {\n    return this.catches[t] ? this.catches[t](t, e, i) : this.catches.ALL ? this.catches.ALL(t, e, i) : (window.alert(\"Error type: \" + arguments[0] + \"\\nDescription: \" + arguments[1]), null);\n  }, window.dhtmlxError = new _dhtmlxError(), dtmlXMLLoaderObject.prototype.doXPathOpera = function (t, e) {\n    var i = t.replace(/[\\/]+/gi, \"/\").split(\"/\"),\n        n = null,\n        a = 1;\n    if (!i.length) return [];\n    if (\".\" == i[0]) n = [e];else {\n      if (\"\" !== i[0]) return [];\n      n = (this.xmlDoc.responseXML || this.xmlDoc).getElementsByTagName(i[a].replace(/\\[[^\\]]*\\]/g, \"\")), a++;\n    }\n\n    for (a; a < i.length; a++) {\n      n = this._getAllNamedChilds(n, i[a]);\n    }\n\n    return -1 != i[a - 1].indexOf(\"[\") && (n = this._filterXPath(n, i[a - 1])), n;\n  }, dtmlXMLLoaderObject.prototype._filterXPath = function (t, e) {\n    for (var i = [], e = e.replace(/[^\\[]*\\[\\@/g, \"\").replace(/[\\[\\]\\@]*/g, \"\"), n = 0; n < t.length; n++) {\n      t[n].getAttribute(e) && (i[i.length] = t[n]);\n    }\n\n    return i;\n  }, dtmlXMLLoaderObject.prototype._getAllNamedChilds = function (t, e) {\n    var i = [];\n    _isKHTML && (e = e.toUpperCase());\n\n    for (var n = 0; n < t.length; n++) {\n      for (var a = 0; a < t[n].childNodes.length; a++) {\n        _isKHTML ? t[n].childNodes[a].tagName && t[n].childNodes[a].tagName.toUpperCase() == e && (i[i.length] = t[n].childNodes[a]) : t[n].childNodes[a].tagName == e && (i[i.length] = t[n].childNodes[a]);\n      }\n    }\n\n    return i;\n  }, void 0 === window.dhtmlxEvent && (window.dhtmlxEvent = function (t, e, i) {\n    t.addEventListener ? t.addEventListener(e, i, !1) : t.attachEvent && t.attachEvent(\"on\" + e, i);\n  }), dtmlXMLLoaderObject.prototype.xslDoc = null, dtmlXMLLoaderObject.prototype.setXSLParamValue = function (t, e, i) {\n    i || (i = this.xslDoc), i.responseXML && (i = i.responseXML);\n    var n = this.doXPath(\"/xsl:stylesheet/xsl:variable[@name='\" + t + \"']\", i, \"http://www.w3.org/1999/XSL/Transform\", \"single\");\n    n && (n.firstChild.nodeValue = e);\n  }, dtmlXMLLoaderObject.prototype.doXSLTransToObject = function (t, e) {\n    t || (t = this.xslDoc), t.responseXML && (t = t.responseXML), e || (e = this.xmlDoc), e.responseXML && (e = e.responseXML);\n    var i;\n\n    if (_isIE) {\n      i = new ActiveXObject(\"Msxml2.DOMDocument.3.0\");\n\n      try {\n        e.transformNodeToObject(t, i);\n      } catch (n) {\n        i = e.transformNode(t);\n      }\n    } else this.XSLProcessor || (this.XSLProcessor = new XSLTProcessor(), this.XSLProcessor.importStylesheet(t)), i = this.XSLProcessor.transformToDocument(e);\n\n    return i;\n  }, dtmlXMLLoaderObject.prototype.doXSLTransToString = function (t, e) {\n    var i = this.doXSLTransToObject(t, e);\n    return \"string\" == typeof i ? i : this.doSerialization(i);\n  }, dtmlXMLLoaderObject.prototype.doSerialization = function (t) {\n    return t || (t = this.xmlDoc), t.responseXML && (t = t.responseXML), _isIE ? t.xml : new XMLSerializer().serializeToString(t);\n  }, window.dhtmlxEventable = function (obj) {\n    obj.attachEvent = function (t, e, i) {\n      return t = \"ev_\" + t.toLowerCase(), this[t] || (this[t] = new this.eventCatcher(i || this)), t + \":\" + this[t].addEvent(e);\n    }, obj.callEvent = function (t, e) {\n      return t = \"ev_\" + t.toLowerCase(), !this[t] || this[t].apply(this, e);\n    }, obj.checkEvent = function (t) {\n      return !!this[\"ev_\" + t.toLowerCase()];\n    }, obj.eventCatcher = function (obj) {\n      var dhx_catch = [],\n          z = function z() {\n        for (var t = !0, e = 0; e < dhx_catch.length; e++) {\n          if (dhx_catch[e]) {\n            var i = dhx_catch[e].apply(obj, arguments);\n            t = t && i;\n          }\n        }\n\n        return t;\n      };\n\n      return z.addEvent = function (ev) {\n        return \"function\" != typeof ev && (ev = eval(ev)), !!ev && dhx_catch.push(ev) - 1;\n      }, z.removeEvent = function (t) {\n        dhx_catch[t] = null;\n      }, z;\n    }, obj.detachEvent = function (t) {\n      if (t) {\n        var e = t.split(\":\");\n        this[e[0]].removeEvent(e[1]);\n      }\n    }, obj.detachAllEvents = function () {\n      for (var t in this) {\n        0 === t.indexOf(\"ev_\") && (this.detachEvent(t), this[t] = null);\n      }\n    }, obj = null;\n  }, window.dhtmlx || (window.dhtmlx = {}), function () {\n    function t(t, e) {\n      setTimeout(function () {\n        if (t.box) {\n          var n = t.callback;\n          i(!1), t.box.parentNode.removeChild(t.box), dhtmlx.callEvent(\"onAfterMessagePopup\", [t.box]), c = t.box = null, n && n(e);\n        }\n      }, 1);\n    }\n\n    function e(e) {\n      if (c) {\n        e = e || event;\n        var i = e.which || event.keyCode,\n            n = !1;\n\n        if (dhtmlx.message.keyboard) {\n          if (13 == i || 32 == i) {\n            var a = e.target || e.srcElement;\n            scheduler._getClassName(a).indexOf(\"dhtmlx_popup_button\") > -1 && a.click ? a.click() : (t(c, !0), n = !0);\n          }\n\n          27 == i && (t(c, !1), n = !0);\n        }\n\n        if (n) return e.preventDefault && e.preventDefault(), !(e.cancelBubble = !0);\n      } else ;\n    }\n\n    function i(t) {\n      i.cover || (i.cover = document.createElement(\"div\"), i.cover.onkeydown = e, i.cover.className = \"dhx_modal_cover\", document.body.appendChild(i.cover));\n      document.body.scrollHeight;\n      i.cover.style.display = t ? \"inline-block\" : \"none\";\n    }\n\n    function n(t, e, i) {\n      return \"<div \" + scheduler._waiAria.messageButtonAttrString(t) + \"class='dhtmlx_popup_button dhtmlx_\" + (i || t || \"\").toLowerCase().replace(/ /g, \"_\") + \"_button' result='\" + e + \"' ><div>\" + t + \"</div></div>\";\n    }\n\n    function a(t) {\n      u.area || (u.area = document.createElement(\"div\"), u.area.className = \"dhtmlx_message_area\", u.area.style[u.position] = \"5px\", document.body.appendChild(u.area)), u.hide(t.id);\n      var e = document.createElement(\"div\");\n      return e.innerHTML = \"<div>\" + t.text + \"</div>\", e.className = \"dhtmlx-info dhtmlx-\" + t.type, e.onclick = function () {\n        u.hide(t.id), t = null;\n      }, scheduler._waiAria.messageInfoAttr(e), \"bottom\" == u.position && u.area.firstChild ? u.area.insertBefore(e, u.area.firstChild) : u.area.appendChild(e), t.expire > 0 && (u.timers[t.id] = window.setTimeout(function () {\n        u.hide(t.id);\n      }, t.expire)), u.pull[t.id] = e, e = null, t.id;\n    }\n\n    function r(e, i, a) {\n      var r = document.createElement(\"div\");\n      r.className = \" dhtmlx_modal_box dhtmlx-\" + e.type, r.setAttribute(\"dhxbox\", 1);\n      var s = scheduler.uid();\n\n      scheduler._waiAria.messageModalAttr(r, s);\n\n      var o = \"\",\n          d = !1;\n\n      if (e.width && (r.style.width = e.width), e.height && (r.style.height = e.height), e.title && (o += '<div class=\"dhtmlx_popup_title\" id=\"' + s + '\">' + e.title + \"</div>\", d = !0), o += '<div class=\"dhtmlx_popup_text\" ' + (d ? \"\" : ' id=\"' + s + '\" ') + \"><span>\" + (e.content ? \"\" : e.text) + '</span></div><div  class=\"dhtmlx_popup_controls\">', i) {\n        var l = e.ok || scheduler.locale.labels.message_ok;\n        void 0 === l && (l = \"OK\"), o += n(l, !0, \"ok\");\n      }\n\n      if (a) {\n        var _ = e.cancel || scheduler.locale.labels.message_cancel;\n\n        void 0 === _ && (_ = \"Cancel\"), o += n(_, !1, \"cancel\");\n      }\n\n      if (e.buttons) for (var h = 0; h < e.buttons.length; h++) {\n        o += n(e.buttons[h], h);\n      }\n\n      if (o += \"</div>\", r.innerHTML = o, e.content) {\n        var u = e.content;\n        \"string\" == typeof u && (u = document.getElementById(u)), \"none\" == u.style.display && (u.style.display = \"\"), r.childNodes[e.title ? 1 : 0].appendChild(u);\n      }\n\n      return r.onclick = function (i) {\n        i = i || event;\n\n        var n = i.target || i.srcElement,\n            a = scheduler._getClassName(n);\n\n        if (a || (n = n.parentNode), a = scheduler._getClassName(n), \"dhtmlx_popup_button\" == a.split(\" \")[0]) {\n          var r = n.getAttribute(\"result\");\n          r = \"true\" == r || \"false\" != r && r, t(e, r);\n        }\n      }, e.box = r, c = e, r;\n    }\n\n    function s(t, n, a) {\n      var s = t.tagName ? t : r(t, n, a);\n      t.hidden || i(!0), document.body.appendChild(s);\n      var o = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - s.offsetWidth) / 2)),\n          d = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - s.offsetHeight) / 2));\n      return \"top\" == t.position ? s.style.top = \"-3px\" : s.style.top = d + \"px\", s.style.left = o + \"px\", s.onkeydown = e, dhtmlx.modalbox.focus(s), t.hidden && dhtmlx.modalbox.hide(s), dhtmlx.callEvent(\"onMessagePopup\", [s]), s;\n    }\n\n    function o(t) {\n      return s(t, !0, !1);\n    }\n\n    function d(t) {\n      return s(t, !0, !0);\n    }\n\n    function l(t) {\n      return s(t);\n    }\n\n    function _(t, e, i) {\n      return \"object\" != typeof t && (\"function\" == typeof e && (i = e, e = \"\"), t = {\n        text: t,\n        type: e,\n        callback: i\n      }), t;\n    }\n\n    function h(t, e, i, n) {\n      return \"object\" != typeof t && (t = {\n        text: t,\n        type: e,\n        expire: i,\n        id: n\n      }), t.id = t.id || u.uid(), t.expire = t.expire || u.expire, t;\n    }\n\n    var c = null;\n    document.attachEvent ? document.attachEvent(\"onkeydown\", e) : document.addEventListener(\"keydown\", e, !0), dhtmlx.alert = function () {\n      var t = _.apply(this, arguments);\n\n      return t.type = t.type || \"confirm\", o(t);\n    }, dhtmlx.confirm = function () {\n      var t = _.apply(this, arguments);\n\n      return t.type = t.type || \"alert\", d(t);\n    }, dhtmlx.modalbox = function () {\n      var t = _.apply(this, arguments);\n\n      return t.type = t.type || \"alert\", l(t);\n    }, dhtmlx.modalbox.hide = function (t) {\n      for (; t && t.getAttribute && !t.getAttribute(\"dhxbox\");) {\n        t = t.parentNode;\n      }\n\n      t && (t.parentNode.removeChild(t), i(!1));\n    }, dhtmlx.modalbox.focus = function (t) {\n      setTimeout(function () {\n        var e = scheduler._getFocusableNodes(t);\n\n        e.length && e[0].focus && e[0].focus();\n      }, 1);\n    };\n\n    var u = dhtmlx.message = function (t, e, i, n) {\n      switch (t = h.apply(this, arguments), t.type = t.type || \"info\", t.type.split(\"-\")[0]) {\n        case \"alert\":\n          return o(t);\n\n        case \"confirm\":\n          return d(t);\n\n        case \"modalbox\":\n          return l(t);\n\n        default:\n          return a(t);\n      }\n    };\n\n    u.seed = new Date().valueOf(), u.uid = function () {\n      return u.seed++;\n    }, u.expire = 4e3, u.keyboard = !0, u.position = \"top\", u.pull = {}, u.timers = {}, u.hideAll = function () {\n      for (var t in u.pull) {\n        u.hide(t);\n      }\n    }, u.hide = function (t) {\n      var e = u.pull[t];\n      e && e.parentNode && (window.setTimeout(function () {\n        e.parentNode.removeChild(e), e = null;\n      }, 2e3), e.className += \" hidden\", u.timers[t] && window.clearTimeout(u.timers[t]), delete u.pull[t]);\n    };\n  }(), dhtmlx.attachEvent || dhtmlxEventable(dhtmlx);\n\n  var dataProcessor = window.dataProcessor = function (t) {\n    return this.serverProcessor = t, this.action_param = \"!nativeeditor_status\", this.object = null, this.updatedRows = [], this.autoUpdate = !0, this.updateMode = \"cell\", this._tMode = \"GET\", this._headers = null, this._payload = null, this.post_delim = \"_\", this._waitMode = 0, this._in_progress = {}, this._invalid = {}, this.mandatoryFields = [], this.messages = [], this.styles = {\n      updated: \"font-weight:bold;\",\n      inserted: \"font-weight:bold;\",\n      deleted: \"text-decoration : line-through;\",\n      invalid: \"background-color:FFE0E0;\",\n      invalid_cell: \"border-bottom:2px solid red;\",\n      error: \"color:red;\",\n      clear: \"font-weight:normal;text-decoration:none;\"\n    }, this.enableUTFencoding(!0), dhtmlxEventable(this), this;\n  };\n\n  dataProcessor.prototype = {\n    setTransactionMode: function setTransactionMode(t, e) {\n      function i(t, e) {\n        var i = e.toLowerCase();\n\n        for (var n in t) {\n          if (n.toLowerCase() === i) return !0;\n        }\n\n        return !1;\n      }\n\n      \"object\" == typeof t ? (this._tMode = t.mode || this._tMode, void 0 !== t.headers && (this._headers = t.headers), void 0 !== t.payload && (this._payload = t.payload)) : (this._tMode = t, this._tSend = e), \"REST\" == this._tMode && (this._tSend = !1, this._endnm = !0);\n      var n = \"Content-Type\";\n      \"JSON\" == this._tMode && (this._tSend = !1, this._endnm = !0, this._headers = this._headers || {}, this._headers[n] = \"application/json\"), this._headers && !i(this._headers, n) && (this._headers[n] = \"application/x-www-form-urlencoded\");\n    },\n    escape: function (_escape) {\n      function escape(_x) {\n        return _escape.apply(this, arguments);\n      }\n\n      escape.toString = function () {\n        return _escape.toString();\n      };\n\n      return escape;\n    }(function (t) {\n      return this._utf ? encodeURIComponent(t) : escape(t);\n    }),\n    enableUTFencoding: function enableUTFencoding(t) {\n      this._utf = !!t;\n    },\n    setDataColumns: function setDataColumns(t) {\n      this._columns = \"string\" == typeof t ? t.split(\",\") : t;\n    },\n    getSyncState: function getSyncState() {\n      return !this.updatedRows.length;\n    },\n    enableDataNames: function enableDataNames(t) {\n      this._endnm = !!t;\n    },\n    enablePartialDataSend: function enablePartialDataSend(t) {\n      this._changed = !!t;\n    },\n    setUpdateMode: function setUpdateMode(t, e) {\n      this.autoUpdate = \"cell\" == t, this.updateMode = t, this.dnd = e;\n    },\n    ignore: function ignore(t, e) {\n      this._silent_mode = !0, t.call(e || window), this._silent_mode = !1;\n    },\n    setUpdated: function setUpdated(t, e, i) {\n      if (!this._silent_mode) {\n        var n = this.findRow(t);\n        i = i || \"updated\";\n        var a = this.obj.getUserData(t, this.action_param);\n        a && \"updated\" == i && (i = a), e ? (this.set_invalid(t, !1), this.updatedRows[n] = t, this.obj.setUserData(t, this.action_param, i), this._in_progress[t] && (this._in_progress[t] = \"wait\")) : this.is_invalid(t) || (this.updatedRows.splice(n, 1), this.obj.setUserData(t, this.action_param, \"\")), e || this._clearUpdateFlag(t), this.markRow(t, e, i), e && this.autoUpdate && this.sendData(t);\n      }\n    },\n    _clearUpdateFlag: function _clearUpdateFlag(t) {},\n    markRow: function markRow(t, e, i) {\n      var n = \"\",\n          a = this.is_invalid(t);\n\n      if (a && (n = this.styles[a], e = !0), this.callEvent(\"onRowMark\", [t, e, i, a]) && (n = this.styles[e ? i : \"clear\"] + n, this.obj[this._methods[0]](t, n), a && a.details)) {\n        n += this.styles[a + \"_cell\"];\n\n        for (var r = 0; r < a.details.length; r++) {\n          a.details[r] && this.obj[this._methods[1]](t, r, n);\n        }\n      }\n    },\n    getState: function getState(t) {\n      return this.obj.getUserData(t, this.action_param);\n    },\n    is_invalid: function is_invalid(t) {\n      return this._invalid[t];\n    },\n    set_invalid: function set_invalid(t, e, i) {\n      i && (e = {\n        value: e,\n        details: i,\n        toString: function toString() {\n          return this.value.toString();\n        }\n      }), this._invalid[t] = e;\n    },\n    checkBeforeUpdate: function checkBeforeUpdate(t) {\n      return !0;\n    },\n    sendData: function sendData(t) {\n      if (!this._waitMode || \"tree\" != this.obj.mytype && !this.obj._h2) {\n        if (this.obj.editStop && this.obj.editStop(), void 0 === t || this._tSend) return this.sendAllData();\n        if (this._in_progress[t]) return !1;\n        if (this.messages = [], !this.checkBeforeUpdate(t) && this.callEvent(\"onValidationError\", [t, this.messages])) return !1;\n\n        this._beforeSendData(this._getRowData(t), t);\n      }\n    },\n    _beforeSendData: function _beforeSendData(t, e) {\n      if (!this.callEvent(\"onBeforeUpdate\", [e, this.getState(e), t])) return !1;\n\n      this._sendData(t, e);\n    },\n    serialize: function serialize(t, e) {\n      if (\"string\" == typeof t) return t;\n      if (void 0 !== e) return this.serialize_one(t, \"\");\n      var i = [],\n          n = [];\n\n      for (var a in t) {\n        t.hasOwnProperty(a) && (i.push(this.serialize_one(t[a], a + this.post_delim)), n.push(a));\n      }\n\n      return i.push(\"ids=\" + this.escape(n.join(\",\"))), (scheduler.security_key || dhtmlx.security_key) && i.push(\"dhx_security=\" + (scheduler.security_key || dhtmlx.security_key)), i.join(\"&\");\n    },\n    serialize_one: function serialize_one(t, e) {\n      if (\"string\" == typeof t) return t;\n      var i = [];\n\n      for (var n in t) {\n        if (t.hasOwnProperty(n)) {\n          if ((\"id\" == n || n == this.action_param) && \"REST\" == this._tMode) continue;\n          i.push(this.escape((e || \"\") + n) + \"=\" + this.escape(t[n]));\n        }\n      }\n\n      return i.join(\"&\");\n    },\n    _applyPayload: function _applyPayload(t) {\n      var e = this.obj.$ajax;\n      if (this._payload) for (var i in this._payload) {\n        t = t + e.urlSeparator(t) + this.escape(i) + \"=\" + this.escape(this._payload[i]);\n      }\n      return t;\n    },\n    _sendData: function _sendData(t, e) {\n      if (t) {\n        if (!this.callEvent(\"onBeforeDataSending\", e ? [e, this.getState(e), t] : [null, null, t])) return !1;\n        e && (this._in_progress[e] = new Date().valueOf());\n\n        var i = this,\n            n = function n(_n) {\n          var a = [];\n          if (e) a.push(e);else if (t) for (var r in t) {\n            a.push(r);\n          }\n          return i.afterUpdate(i, _n, a);\n        },\n            a = this.obj.$ajax,\n            r = this.serverProcessor + (this._user ? a.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.obj.getUserData(0, \"version\")].join(\"&\") : \"\"),\n            s = this._applyPayload(r);\n\n        if (\"GET\" == this._tMode) a.query({\n          url: s + a.urlSeparator(s) + this.serialize(t, e),\n          method: \"GET\",\n          callback: n,\n          headers: this._headers\n        });else if (\"POST\" == this._tMode) a.query({\n          url: s,\n          method: \"POST\",\n          headers: this._headers,\n          data: this.serialize(t, e),\n          callback: n\n        });else if (\"JSON\" == this._tMode) {\n          var o = t[this.action_param],\n              d = {};\n\n          for (var l in t) {\n            d[l] = t[l];\n          }\n\n          delete d[this.action_param], delete d.id, delete d.gr_id, a.query({\n            url: s,\n            method: \"POST\",\n            headers: this._headers,\n            callback: n,\n            data: JSON.stringify({\n              id: e,\n              action: o,\n              data: d\n            })\n          });\n        } else if (\"REST\" == this._tMode) {\n          var _ = this.getState(e),\n              h = r.replace(/(\\&|\\?)editing\\=true/, \"\"),\n              d = \"\",\n              c = \"post\";\n\n          \"inserted\" == _ ? d = this.serialize(t, e) : \"deleted\" == _ ? (c = \"DELETE\", h = h + (\"/\" == h.slice(-1) ? \"\" : \"/\") + e) : (c = \"PUT\", d = this.serialize(t, e), h = h + (\"/\" == h.slice(-1) ? \"\" : \"/\") + e), h = this._applyPayload(h), a.query({\n            url: h,\n            method: c,\n            headers: this._headers,\n            data: d,\n            callback: n\n          });\n        }\n        this._waitMode++;\n      }\n    },\n    sendAllData: function sendAllData() {\n      if (this.updatedRows.length) {\n        this.messages = [];\n\n        for (var t = !0, e = 0; e < this.updatedRows.length; e++) {\n          t &= this.checkBeforeUpdate(this.updatedRows[e]);\n        }\n\n        if (!t && !this.callEvent(\"onValidationError\", [\"\", this.messages])) return !1;\n        if (this._tSend) this._sendData(this._getAllData());else for (var e = 0; e < this.updatedRows.length; e++) {\n          if (!this._in_progress[this.updatedRows[e]]) {\n            if (this.is_invalid(this.updatedRows[e])) continue;\n            if (this._beforeSendData(this._getRowData(this.updatedRows[e]), this.updatedRows[e]), this._waitMode && (\"tree\" == this.obj.mytype || this.obj._h2)) return;\n          }\n        }\n      }\n    },\n    _getAllData: function _getAllData(t) {\n      for (var e = {}, i = !1, n = 0; n < this.updatedRows.length; n++) {\n        var a = this.updatedRows[n];\n\n        if (!this._in_progress[a] && !this.is_invalid(a)) {\n          var r = this._getRowData(a);\n\n          this.callEvent(\"onBeforeUpdate\", [a, this.getState(a), r]) && (e[a] = r, i = !0, this._in_progress[a] = new Date().valueOf());\n        }\n      }\n\n      return i ? e : null;\n    },\n    setVerificator: function setVerificator(t, e) {\n      this.mandatoryFields[t] = e || function (t) {\n        return \"\" !== t;\n      };\n    },\n    clearVerificator: function clearVerificator(t) {\n      this.mandatoryFields[t] = !1;\n    },\n    findRow: function findRow(t) {\n      var e = 0;\n\n      for (e = 0; e < this.updatedRows.length && t != this.updatedRows[e]; e++) {\n        ;\n      }\n\n      return e;\n    },\n    defineAction: function defineAction(t, e) {\n      this._uActions || (this._uActions = []), this._uActions[t] = e;\n    },\n    afterUpdateCallback: function afterUpdateCallback(t, e, i, n) {\n      var a = t,\n          r = \"error\" != i && \"invalid\" != i;\n      if (r || this.set_invalid(t, i), this._uActions && this._uActions[i] && !this._uActions[i](n)) return delete this._in_progress[a];\n      \"wait\" != this._in_progress[a] && this.setUpdated(t, !1);\n      var s = t;\n\n      switch (i) {\n        case \"inserted\":\n        case \"insert\":\n          e != t && (this.setUpdated(t, !1), this.obj[this._methods[2]](t, e), t = e);\n          break;\n\n        case \"delete\":\n        case \"deleted\":\n          return this.obj.setUserData(t, this.action_param, \"true_deleted\"), this.obj[this._methods[3]](t, e), delete this._in_progress[a], this.callEvent(\"onAfterUpdate\", [t, i, e, n]);\n      }\n\n      \"wait\" != this._in_progress[a] ? (r && this.obj.setUserData(t, this.action_param, \"\"), delete this._in_progress[a]) : (delete this._in_progress[a], this.setUpdated(e, !0, this.obj.getUserData(t, this.action_param))), this.callEvent(\"onAfterUpdate\", [s, i, e, n]);\n    },\n    _errorResponse: function _errorResponse(t, e) {\n      return this.obj && this.obj.callEvent && this.obj.callEvent(\"onSaveError\", [e, t.xmlDoc]), this.cleanUpdate(e);\n    },\n    afterUpdate: function afterUpdate(t, e, i) {\n      var n = this.obj.$ajax;\n      if (200 !== e.xmlDoc.status) return void this._errorResponse(e, i);\n\n      if (window.JSON) {\n        var a;\n\n        try {\n          a = JSON.parse(e.xmlDoc.responseText);\n        } catch (t) {\n          e.xmlDoc.responseText.length || (a = {});\n        }\n\n        if (a) {\n          var r = a.action || this.getState(i) || \"updated\",\n              s = a.sid || i[0],\n              o = a.tid || i[0];\n          return t.afterUpdateCallback(s, o, r, a), void t.finalizeUpdate();\n        }\n      }\n\n      var d = n.xmltop(\"data\", e.xmlDoc);\n      if (!d) return this._errorResponse(e, i);\n      var l = n.xpath(\"//data/action\", d);\n      l.length || this._errorResponse(e, i);\n\n      for (var _ = 0; _ < l.length; _++) {\n        var h = l[_],\n            r = h.getAttribute(\"type\"),\n            s = h.getAttribute(\"sid\"),\n            o = h.getAttribute(\"tid\");\n        t.afterUpdateCallback(s, o, r, h);\n      }\n\n      t.finalizeUpdate();\n    },\n    cleanUpdate: function cleanUpdate(t) {\n      if (t) for (var e = 0; e < t.length; e++) {\n        delete this._in_progress[t[e]];\n      }\n    },\n    finalizeUpdate: function finalizeUpdate() {\n      this._waitMode && this._waitMode--, (\"tree\" == this.obj.mytype || this.obj._h2) && this.updatedRows.length && this.sendData(), this.callEvent(\"onAfterUpdateFinish\", []), this.updatedRows.length || this.callEvent(\"onFullSync\", []);\n    },\n    init: function init(t) {\n      this.obj = t, this.obj._dp_init && this.obj._dp_init(this);\n    },\n    setOnAfterUpdate: function setOnAfterUpdate(t) {\n      this.attachEvent(\"onAfterUpdate\", t);\n    },\n    enableDebug: function enableDebug(t) {},\n    setOnBeforeUpdateHandler: function setOnBeforeUpdateHandler(t) {\n      this.attachEvent(\"onBeforeDataSending\", t);\n    },\n    setAutoUpdate: function setAutoUpdate(t, e) {\n      t = t || 2e3, this._user = e || new Date().valueOf(), this._need_update = !1, this._update_busy = !1, this.attachEvent(\"onAfterUpdate\", function (t, e, i, n) {\n        this.afterAutoUpdate(t, e, i, n);\n      }), this.attachEvent(\"onFullSync\", function () {\n        this.fullSync();\n      });\n      var i = this;\n      window.setInterval(function () {\n        i.loadUpdate();\n      }, t);\n    },\n    afterAutoUpdate: function afterAutoUpdate(t, e, i, n) {\n      return \"collision\" != e || (this._need_update = !0, !1);\n    },\n    fullSync: function fullSync() {\n      return this._need_update && (this._need_update = !1, this.loadUpdate()), !0;\n    },\n    getUpdates: function getUpdates(t, e) {\n      var i = this.obj.$ajax;\n      if (this._update_busy) return !1;\n      this._update_busy = !0, i.get(t, e);\n    },\n    _v: function _v(t) {\n      return t.firstChild ? t.firstChild.nodeValue : \"\";\n    },\n    _a: function _a(t) {\n      for (var e = [], i = 0; i < t.length; i++) {\n        e[i] = this._v(t[i]);\n      }\n\n      return e;\n    },\n    loadUpdate: function loadUpdate() {\n      var t = this.obj.$ajax,\n          e = this,\n          i = this.obj.getUserData(0, \"version\"),\n          n = this.serverProcessor + t.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + i].join(\"&\");\n      n = n.replace(\"editing=true&\", \"\"), this.getUpdates(n, function (i) {\n        var n = t.xpath(\"//userdata\", i);\n        e.obj.setUserData(0, \"version\", e._v(n[0]));\n        var a = t.xpath(\"//update\", i);\n\n        if (a.length) {\n          e._silent_mode = !0;\n\n          for (var r = 0; r < a.length; r++) {\n            var s = a[r].getAttribute(\"status\"),\n                o = a[r].getAttribute(\"id\"),\n                d = a[r].getAttribute(\"parent\");\n\n            switch (s) {\n              case \"inserted\":\n                e.callEvent(\"insertCallback\", [a[r], o, d]);\n                break;\n\n              case \"updated\":\n                e.callEvent(\"updateCallback\", [a[r], o, d]);\n                break;\n\n              case \"deleted\":\n                e.callEvent(\"deleteCallback\", [a[r], o, d]);\n            }\n          }\n\n          e._silent_mode = !1;\n        }\n\n        e._update_busy = !1, e = null;\n      });\n    }\n  }, window.dataProcessor && !dataProcessor.prototype.init_original && (dataProcessor.prototype.init_original = dataProcessor.prototype.init, dataProcessor.prototype.init = function (t) {\n    this.init_original(t), t._dataprocessor = this, this.setTransactionMode(\"POST\", !0), this.serverProcessor += (-1 != this.serverProcessor.indexOf(\"?\") ? \"&\" : \"?\") + \"editing=true\";\n  }), dhtmlxError.catchError(\"LoadXML\", function (t, e, i) {\n    var n = i[0].responseText;\n\n    switch (scheduler.config.ajax_error) {\n      case \"alert\":\n        window.alert(n);\n        break;\n\n      case \"console\":\n        window.console.log(n);\n    }\n  });\n  var Scheduler = {\n    _seed: 0\n  };\n  Scheduler.plugin = function (t) {\n    this._schedulerPlugins.push(t), t(window.scheduler);\n  }, Scheduler._schedulerPlugins = [], Scheduler.getSchedulerInstance = function () {\n    function t(t) {\n      var e = document.createElement(\"div\");\n      return (t || \"\").split(\" \").forEach(function (t) {\n        e.classList.add(t);\n      }), e;\n    }\n\n    function e(t) {\n      var e;\n      if (t.view) switch (t.view) {\n        case \"today\":\n        case \"next\":\n        case \"prev\":\n          e = p.builtInButton;\n          break;\n\n        case \"date\":\n          e = p.date;\n          break;\n\n        case \"spacer\":\n          e = p.spacer;\n          break;\n\n        case \"button\":\n          e = p.button;\n          break;\n\n        case \"minicalendar\":\n          e = p.minicalendarButton;\n          break;\n\n        default:\n          e = p.view;\n      } else t.rows ? e = p.rows_container : t.cols && (e = p.row);\n      return e;\n    }\n\n    function i(t) {\n      var i = e(t);\n\n      if (i) {\n        var n = i(t);\n\n        if (t.css && n.classList.add(t.css), t.width) {\n          var a = t.width;\n          a === 1 * a && (a += \"px\"), n.style.width = a;\n        }\n\n        if (t.height) {\n          var a = t.height;\n          a === 1 * a && (a += \"px\"), n.style.height = a;\n        }\n\n        if (t.click && n.addEventListener(\"click\", t.click), t.html && (n.innerHTML = t.html), t.align) {\n          var a = \"\";\n          \"right\" == t.align ? a = \"flex-end\" : \"left\" == t.align && (a = \"flex-start\"), n.style.justifyContent = a;\n        }\n\n        return n;\n      }\n    }\n\n    function n(t) {\n      return \"string\" == typeof t && (t = {\n        view: t\n      }), t.view || t.rows || t.cols || (t.view = \"button\"), t;\n    }\n\n    function a(t) {\n      var e,\n          r = document.createDocumentFragment();\n      e = Array.isArray(t) ? t : [t];\n\n      for (var s = 0; s < e.length; s++) {\n        var o = n(e[s]);\n\n        if (\"day\" === o.view && e[s + 1]) {\n          var d = n(e[s + 1]);\n          \"week\" !== d.view && \"month\" !== d.view || (o.$firstTab = !0);\n        }\n\n        if (\"month\" === o.view && e[s - 1]) {\n          var d = n(e[s - 1]);\n          \"week\" !== d.view && \"day\" !== d.view || (o.$lastTab = !0);\n        }\n\n        var l = i(o);\n        r.appendChild(l), (o.cols || o.rows) && l.appendChild(a(o.cols || o.rows));\n      }\n\n      return r;\n    }\n\n    function r(t) {\n      return !!(t.querySelector(\".dhx_cal_header\") && t.querySelector(\".dhx_cal_data\") && t.querySelector(\".dhx_cal_navline\"));\n    }\n\n    function s(t) {\n      var e = [\"day\", \"week\", \"month\"],\n          i = [\"date\"],\n          n = [\"prev\", \"today\", \"next\"];\n      if (t.matrix) for (var a in t.matrix) {\n        e.push(a);\n      }\n      if (t._props) for (var a in t._props) {\n        e.push(a);\n      }\n      if (t._grid && t._grid.names) for (var a in t._grid.names) {\n        e.push(a);\n      }\n      return [\"map\", \"agenda\", \"week_agenda\", \"year\"].forEach(function (i) {\n        t[i + \"_view\"] && e.push(i);\n      }), e.concat(i).concat(n);\n    }\n\n    function o(t) {\n      return Array.isArray ? Array.isArray(t) : t && void 0 !== t.length && t.pop && t.push;\n    }\n\n    function d(t) {\n      return t && \"object\" == typeof t && \"function String() { [native code] }\" === Function.prototype.toString.call(t.constructor);\n    }\n\n    function l(t) {\n      return t && \"object\" == typeof t && \"function Number() { [native code] }\" === Function.prototype.toString.call(t.constructor);\n    }\n\n    function _(t) {\n      return t && \"object\" == typeof t && \"function Boolean() { [native code] }\" === Function.prototype.toString.call(t.constructor);\n    }\n\n    function h(t) {\n      return !(!t || \"object\" != typeof t) && !!(t.getFullYear && t.getMonth && t.getDate);\n    }\n\n    function c() {\n      if (void 0 === A) {\n        var t = document.createElement(\"div\");\n        t.style.position = \"absolute\", t.style.left = \"-9999px\", t.style.top = \"-9999px\", t.innerHTML = \"<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>\", document.body.appendChild(t);\n        var e = window.getComputedStyle(t.querySelector(\".dhx_cal_scale_placeholder\")),\n            i = e.getPropertyValue(\"position\");\n        A = \"absolute\" === i, setTimeout(function () {\n          A = null;\n        }, 500);\n      }\n\n      return A;\n    }\n\n    function u() {\n      if (g._is_material_skin()) return !0;\n      if (void 0 !== S) return S;\n      var t = document.createElement(\"div\");\n      t.style.position = \"absolute\", t.style.left = \"-9999px\", t.style.top = \"-9999px\", t.innerHTML = \"<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>\", document.body.appendChild(t);\n      var e = window.getComputedStyle(t.querySelector(\".dhx_body\")),\n          i = e.getPropertyValue(\"box-sizing\");\n      document.body.removeChild(t), (S = !(\"border-box\" !== i)) || setTimeout(function () {\n        S = void 0;\n      }, 1e3);\n    }\n\n    function f() {\n      if (!g._is_material_skin() && !g._border_box_events()) {\n        var t = S;\n        S = void 0, A = void 0;\n        t !== u() && g.$container && g.getState().mode && g.setCurrentView();\n      }\n    }\n\n    var g = {\n      version: \"5.3.13\"\n    },\n        v = {\n      agenda: \"https://docs.dhtmlx.com/scheduler/agenda_view.html\",\n      grid: \"https://docs.dhtmlx.com/scheduler/grid_view.html\",\n      map: \"https://docs.dhtmlx.com/scheduler/map_view.html\",\n      unit: \"https://docs.dhtmlx.com/scheduler/units_view.html\",\n      timeline: \"https://docs.dhtmlx.com/scheduler/timeline_view.html\",\n      week_agenda: \"https://docs.dhtmlx.com/scheduler/weekagenda_view.html\",\n      year: \"https://docs.dhtmlx.com/scheduler/year_view.html\",\n      anythingElse: \"https://docs.dhtmlx.com/scheduler/views.html\"\n    },\n        m = {\n      agenda: \"ext/dhtmlxscheduler_agenda_view.js\",\n      grid: \"ext/dhtmlxscheduler_grid_view.js\",\n      map: \"ext/dhtmlxscheduler_map_view.js\",\n      unit: \"ext/dhtmlxscheduler_units.js\",\n      timeline: \"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js\",\n      week_agenda: \"ext/dhtmlxscheduler_week_agenda.js\",\n      year: \"ext/dhtmlxscheduler_year_view.js\",\n      limit: \"ext/dhtmlxscheduler_limit.js\"\n    };\n    g._commonErrorMessages = {\n      unknownView: function unknownView(t) {\n        var e = \"Related docs: \" + (v[t] || v.anythingElse),\n            i = m[t] ? \"You're probably missing \" + m[t] + \".\" : \"\";\n        return \"`\" + t + \"` view is not defined. \\nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \\n\" + e + \"\\n\" + (i ? i + \"\\n\" : \"\");\n      },\n      collapsedContainer: function collapsedContainer(t) {\n        return \"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \\nMake sure that the container has some initial height or use different units. For example:\\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \\n\";\n      }\n    }, g.createTimelineView = function () {\n      throw new Error(\"scheduler.createTimelineView is not implemented. Be sure to add the required extension: \" + m.timeline + \"\\nRelated docs: \" + v.timeline);\n    }, g.createUnitsView = function () {\n      throw new Error(\"scheduler.createUnitsView is not implemented. Be sure to add the required extension: \" + m.unit + \"\\nRelated docs: \" + v.unit);\n    }, g.createGridView = function () {\n      throw new Error(\"scheduler.createGridView is not implemented. Be sure to add the required extension: \" + m.grid + \"\\nRelated docs: \" + v.grid);\n    }, g.addMarkedTimespan = function () {\n      throw new Error(\"scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html\");\n    }, g.renderCalendar = function () {\n      throw new Error(\"scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html\");\n    }, g.exportToPNG = function () {\n      throw new Error([\"scheduler.exportToPNG is not implemented.\", \"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html\", \"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"].join(\"\\n\"));\n    }, g.exportToPDF = function () {\n      throw new Error([\"scheduler.exportToPDF is not implemented.\", \"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html\", \"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"].join(\"\\n\"));\n    }, dhtmlxEventable(g);\n    var p = {\n      rows_container: function rows_container() {\n        return t(\"dhx_cal_navbar_rows_container\");\n      },\n      row: function row() {\n        return t(\"dhx_cal_navbar_row\");\n      },\n      view: function view(e) {\n        var i = t(\"dhx_cal_tab\");\n        return i.setAttribute(\"name\", e.view + \"_tab\"), i.setAttribute(\"data-viewname\", e.view), g.config.fix_tab_position && (e.$firstTab ? i.classList.add(\"dhx_cal_tab_first\") : e.$lastTab ? i.classList.add(\"dhx_cal_tab_last\") : \"week\" !== e.view && i.classList.add(\"dhx_cal_tab_standalone\")), i;\n      },\n      date: function date() {\n        return t(\"dhx_cal_date\");\n      },\n      button: function button(e) {\n        return t(\"dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab\");\n      },\n      builtInButton: function builtInButton(e) {\n        return t(\"dhx_cal_\" + e.view + \"_button dhx_cal_nav_button\");\n      },\n      spacer: function spacer() {\n        return t(\"dhx_cal_line_spacer\");\n      },\n      minicalendarButton: function minicalendarButton(e) {\n        var i = t(\"dhx_minical_icon\");\n        return e.click || (i.onclick = function () {\n          g.isCalendarVisible() ? g.destroyCalendar() : g.renderCalendar({\n            position: this,\n            date: g.getState().date,\n            navigation: !0,\n            handler: function handler(t, e) {\n              g.setCurrentView(t), g.destroyCalendar();\n            }\n          });\n        }), i;\n      },\n      html_element: function html_element(e) {\n        return t(\"dhx_cal_nav_content\");\n      }\n    };\n\n    g._init_nav_bar = function (t) {\n      var e = this.$container.querySelector(\".dhx_cal_navline\");\n      return e || (e = document.createElement(\"div\"), e.className = \"dhx_cal_navline dhx_cal_navline_flex\", g._update_nav_bar(t, e), e);\n    };\n\n    var x = null,\n        b = null;\n    g._update_nav_bar = function (t, e) {\n      if (t) {\n        var i = !1,\n            n = !1,\n            r = t.height || g.xy.nav_height;\n        null !== b && b === r || (i = !0), x && JSON.stringify(t) === x || (n = !0), i && (g.xy.nav_height = r), n && (e.innerHTML = \"\", e.appendChild(a(t))), (i || n) && (g._els = [], g.get_elements(), g.set_actions()), e.style.display = 0 === r ? \"none\" : \"\", b = r;\n      }\n    }, g._detachDomEvent = function (t, e, i) {\n      t.removeEventListener ? t.removeEventListener(e, i, !1) : t.detachEvent && t.detachEvent(\"on\" + e, i);\n    }, g._init_once = function () {\n      function t(t) {\n        for (var e = document.body; t && t != e;) {\n          t = t.parentNode;\n        }\n\n        return !(e != t);\n      }\n\n      function e(t) {\n        return {\n          w: t.innerWidth || document.documentElement.clientWidth,\n          h: t.innerHeight || document.documentElement.clientHeight\n        };\n      }\n\n      function i(t, e) {\n        return t.w == e.w && t.h == e.h;\n      }\n\n      function n(n, a) {\n        var r,\n            s = e(a);\n        n.event(a, \"resize\", function () {\n          clearTimeout(r), r = setTimeout(function () {\n            if (t(n.$container)) {\n              var r = e(a);\n              i(s, r) || (s = r, n.callEvent(\"onSchedulerResize\", []) && (n.updateView(), n.callEvent(\"onAfterSchedulerResize\", [])));\n            }\n          }, 150);\n        });\n      }\n\n      function a(t) {\n        var e = t.$container;\n        \"static\" == window.getComputedStyle(e).getPropertyValue(\"position\") && (e.style.position = \"relative\");\n        var i = document.createElement(\"iframe\");\n        i.className = \"scheduler_container_resize_watcher\", i.tabIndex = -1, t.config.wai_aria_attributes && (i.setAttribute(\"role\", \"none\"), i.setAttribute(\"aria-hidden\", !0)), e.appendChild(i), i.contentWindow ? n(t, i.contentWindow) : (e.removeChild(i), n(t, window));\n      }\n\n      a(g), g._init_once = function () {};\n    };\n    var y = {\n      navbar: {\n        render: function render(t) {\n          return g._init_nav_bar(t);\n        }\n      },\n      header: {\n        render: function render(t) {\n          var e = document.createElement(\"div\");\n          return e.className = \"dhx_cal_header\", e;\n        }\n      },\n      dataArea: {\n        render: function render(t) {\n          var e = document.createElement(\"div\");\n          return e.className = \"dhx_cal_data\", e;\n        }\n      },\n      html_element: {\n        render: function render(t) {\n          return t.html;\n        }\n      }\n    };\n    g.init = function (t, e, i) {\n      if (e = e || g._currentDate(), i = i || \"week\", this._obj && this.unset_actions(), this._obj = \"string\" == typeof t ? document.getElementById(t) : t, this.$container = this._obj, !this.$container.offsetHeight && this.$container.offsetWidth && \"100%\" === this.$container.style.height && window.console.error(g._commonErrorMessages.collapsedContainer(), this.$container), this.config.wai_aria_attributes && this.config.wai_aria_application_role && this.$container.setAttribute(\"role\", \"application\"), this.config.header || r(this.$container) || (this.config.header = s(this), console.log([\"Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.\", \"Using a default header configuration: \", \"scheduler.config.header = \" + JSON.stringify(this.config.header, null, 2), \"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html\"].join(\"\\n\"))), this.config.header) this.$container.innerHTML = \"\", this.$container.classList.add(\"dhx_cal_container\"), this.config.header.height && (this.xy.nav_height = this.config.header.height), this.$container.appendChild(y.navbar.render(this.config.header)), this.$container.appendChild(y.header.render()), this.$container.appendChild(y.dataArea.render());else if (!r(this.$container)) throw new Error([\"Required DOM elements are missing from the scheduler container.\", \"Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup\", \"Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig\"].join(\"\\n\"));\n      this.config.rtl && (this.$container.className += \" dhx_cal_container_rtl\"), this._skin_init && g._skin_init(), g.date.init(), this._scroll = !0, this._quirks = this.$env.isIE && \"BackCompat\" == document.compatMode, this._quirks7 = this.$env.isIE && -1 == navigator.appVersion.indexOf(\"MSIE 8\"), this._els = [], this.get_elements(), this.init_templates(), this.set_actions(), this._init_once(), this._init_touch_events(), this.set_sizes(), g.callEvent(\"onSchedulerReady\", []), this.setCurrentView(e, i);\n    }, g.xy = {\n      min_event_height: 40,\n      scale_width: 50,\n      scroll_width: 18,\n      scale_height: 20,\n      month_scale_height: 20,\n      menu_width: 25,\n      margin_top: 0,\n      margin_left: 0,\n      editor_width: 140,\n      month_head_height: 22,\n      event_header_height: 14\n    }, g.keys = {\n      edit_save: 13,\n      edit_cancel: 27\n    }, g.bind = function (t, e) {\n      return t.bind ? t.bind(e) : function () {\n        return t.apply(e, arguments);\n      };\n    }, g.set_sizes = function () {\n      var t = this._x = this._obj.clientWidth - this.xy.margin_left,\n          e = this._y = this._obj.clientHeight - this.xy.margin_top,\n          i = this._table_view ? 0 : this.xy.scale_width + this.xy.scroll_width,\n          n = this._table_view ? -1 : this.xy.scale_width,\n          a = this.$container.querySelector(\".dhx_cal_scale_placeholder\");\n      g._is_material_skin() ? (a || (a = document.createElement(\"div\"), a.className = \"dhx_cal_scale_placeholder\", this.$container.insertBefore(a, this._els.dhx_cal_header[0])), a.style.display = \"block\", this.set_xy(a, t, this.xy.scale_height + 1, 0, this.xy.nav_height + (this._quirks ? -1 : 1))) : a && a.parentNode.removeChild(a), this._lightbox && (g.$container.offsetWidth < 1200 || this._setLbPosition(document.querySelector(\".dhx_cal_light\"))), this.set_xy(this._els.dhx_cal_navline[0], t, this.xy.nav_height, 0, 0), this.set_xy(this._els.dhx_cal_header[0], t - i, this.xy.scale_height, n, this.xy.nav_height + (this._quirks ? -1 : 1));\n      var r = this._els.dhx_cal_navline[0].offsetHeight;\n      r > 0 && (this.xy.nav_height = r);\n      var s = this.xy.scale_height + this.xy.nav_height + (this._quirks ? -2 : 0);\n      this.set_xy(this._els.dhx_cal_data[0], t, e - (s + 2), 0, s + 2);\n    }, g.set_xy = function (t, e, i, n, a) {\n      var r = \"left\";\n      t.style.width = Math.max(0, e) + \"px\", t.style.height = Math.max(0, i) + \"px\", arguments.length > 3 && (this.config.rtl && (r = \"right\"), t.style[r] = n + \"px\", t.style.top = a + \"px\");\n    }, g.get_elements = function () {\n      for (var t = this._obj.getElementsByTagName(\"DIV\"), e = 0; e < t.length; e++) {\n        var i = g._getClassName(t[e]),\n            n = t[e].getAttribute(\"name\") || \"\";\n\n        i && (i = i.split(\" \")[0]), this._els[i] || (this._els[i] = []), this._els[i].push(t[e]);\n        var a = g.locale.labels[n || i];\n        \"string\" != typeof a && n && !t[e].innerHTML && (a = n.split(\"_\")[0]), a && (this._waiAria.labelAttr(t[e], a), t[e].innerHTML = a);\n      }\n    }, g.unset_actions = function () {\n      for (var t in this._els) {\n        if (this._click[t]) for (var e = 0; e < this._els[t].length; e++) {\n          this._els[t][e].onclick = null;\n        }\n      }\n\n      this._obj.onselectstart = null, this._obj.onmousemove = null, this._obj.onmousedown = null, this._obj.onmouseup = null, this._obj.ondblclick = null, this._obj.oncontextmenu = null;\n    }, g.set_actions = function () {\n      for (var t in this._els) {\n        if (this._click[t]) for (var e = 0; e < this._els[t].length; e++) {\n          this._els[t][e].onclick = g._click[t];\n        }\n      }\n\n      this._obj.onselectstart = function (t) {\n        return !1;\n      }, this._obj.onmousemove = function (t) {\n        g._temp_touch_block || g._on_mouse_move(t || event);\n      }, this._obj.onmousedown = function (t) {\n        g._ignore_next_click || g._on_mouse_down(t || event);\n      }, this._obj.onmouseup = function (t) {\n        g._ignore_next_click || g._on_mouse_up(t || event);\n      }, this._obj.ondblclick = function (t) {\n        g._on_dbl_click(t || event);\n      }, this._obj.oncontextmenu = function (t) {\n        var e = t || event,\n            i = e.target || e.srcElement;\n        return g.callEvent(\"onContextMenu\", [g._locate_event(i), e]);\n      };\n    }, g.select = function (t) {\n      this._select_id != t && (g._close_not_saved(), this.editStop(!1), this.unselect(), this._select_id = t, this.updateEvent(t), this.callEvent(\"onEventSelected\", [t]));\n    }, g.unselect = function (t) {\n      if (!t || t == this._select_id) {\n        var e = this._select_id;\n        this._select_id = null, e && this.getEvent(e) && this.updateEvent(e), this.callEvent(\"onEventUnselected\", [e]);\n      }\n    }, g.getState = function () {\n      return {\n        mode: this._mode,\n        date: new Date(this._date),\n        min_date: new Date(this._min_date),\n        max_date: new Date(this._max_date),\n        editor_id: this._edit_id,\n        lightbox_id: this._lightbox_id,\n        new_event: this._new_event,\n        select_id: this._select_id,\n        expanded: this.expanded,\n        drag_id: this._drag_id,\n        drag_mode: this._drag_mode\n      };\n    }, g._click = {\n      dhx_cal_data: function dhx_cal_data(t) {\n        if (g._ignore_next_click) return t.preventDefault && t.preventDefault(), t.cancelBubble = !0, g._ignore_next_click = !1, !1;\n\n        var e = t ? t.target : event.srcElement,\n            i = g._locate_event(e);\n\n        if (t = t || event, i) {\n          if (!g.callEvent(\"onClick\", [i, t]) || g.config.readonly) return;\n        } else g.callEvent(\"onEmptyClick\", [g.getActionData(t).date, t]);\n\n        if (i && g.config.select) {\n          g.select(i);\n\n          var n = g._getClassName(e);\n\n          -1 != n.indexOf(\"_icon\") && g._click.buttons[n.split(\" \")[1].replace(\"icon_\", \"\")](i);\n        } else g._close_not_saved(), new Date().valueOf() - (g._new_event || 0) > 500 && g.unselect();\n      },\n      dhx_cal_prev_button: function dhx_cal_prev_button() {\n        g._click.dhx_cal_next_button(0, -1);\n      },\n      dhx_cal_next_button: function dhx_cal_next_button(t, e) {\n        var i = 1;\n        g.config.rtl && (e = -e, i = -i), g.setCurrentView(g.date.add(g.date[g._mode + \"_start\"](new Date(g._date)), e || i, g._mode));\n      },\n      dhx_cal_today_button: function dhx_cal_today_button() {\n        g.callEvent(\"onBeforeTodayDisplayed\", []) && g.setCurrentView(g._currentDate());\n      },\n      dhx_cal_tab: function dhx_cal_tab() {\n        var t = this.getAttribute(\"name\"),\n            e = t.substring(0, t.search(\"_tab\"));\n        g.setCurrentView(g._date, e);\n      },\n      buttons: {\n        delete: function _delete(t) {\n          var e = g.locale.labels.confirm_deleting;\n\n          g._dhtmlx_confirm(e, g.locale.labels.title_confirm_deleting, function () {\n            g.deleteEvent(t);\n          });\n        },\n        edit: function edit(t) {\n          g.edit(t);\n        },\n        save: function save(t) {\n          g.editStop(!0);\n        },\n        details: function details(t) {\n          g.showLightbox(t);\n        },\n        cancel: function cancel(t) {\n          g.editStop(!1);\n        }\n      }\n    }, g._dhtmlx_confirm = function (t, e, i) {\n      if (!t) return i();\n      var n = {\n        text: t\n      };\n      e && (n.title = e), i && (n.callback = function (t) {\n        t && i();\n      }), dhtmlx.confirm(n);\n    }, g.addEventNow = function (t, e, i) {\n      var n = {};\n      g._isObject(t) && !g._isDate(t) && (n = t, t = null);\n      var a = 6e4 * (this.config.event_duration || this.config.time_step);\n      t || (t = n.start_date || Math.round(g._currentDate().valueOf() / a) * a);\n      var r = new Date(t);\n\n      if (!e) {\n        var s = this.config.first_hour;\n        s > r.getHours() && (r.setHours(s), t = r.valueOf()), e = t.valueOf() + a;\n      }\n\n      var o = new Date(e);\n      r.valueOf() == o.valueOf() && o.setTime(o.valueOf() + a), n.start_date = n.start_date || r, n.end_date = n.end_date || o, n.text = n.text || this.locale.labels.new_event, n.id = this._drag_id = n.id || this.uid(), this._drag_mode = \"new-size\", this._loading = !0;\n      var d = this.addEvent(n);\n      return this.callEvent(\"onEventCreated\", [this._drag_id, i]), this._loading = !1, this._drag_event = {}, this._on_mouse_up(i), d;\n    }, g._on_dbl_click = function (t, e) {\n      if (e = e || t.target || t.srcElement, !this.config.readonly) {\n        var i = g._getClassName(e).split(\" \")[0];\n\n        switch (i) {\n          case \"dhx_scale_holder\":\n          case \"dhx_scale_holder_now\":\n          case \"dhx_month_body\":\n          case \"dhx_wa_day_data\":\n            if (!g.config.dblclick_create) break;\n            this.addEventNow(this.getActionData(t).date, null, t);\n            break;\n\n          case \"dhx_cal_event\":\n          case \"dhx_wa_ev_body\":\n          case \"dhx_agenda_line\":\n          case \"dhx_grid_event\":\n          case \"dhx_cal_event_line\":\n          case \"dhx_cal_event_clear\":\n            var n = this._locate_event(e);\n\n            if (!this.callEvent(\"onDblClick\", [n, t])) return;\n            this.config.details_on_dblclick || this._table_view || !this.getEvent(n)._timed || !this.config.select ? this.showLightbox(n) : this.edit(n);\n            break;\n\n          case \"dhx_time_block\":\n          case \"dhx_cal_container\":\n            return;\n\n          default:\n            var a = this[\"dblclick_\" + i];\n            if (a) a.call(this, t);else if (e.parentNode && e != this) return g._on_dbl_click(t, e.parentNode);\n        }\n      }\n    }, g._get_column_index = function (t) {\n      var e = 0;\n\n      if (this._cols) {\n        for (var i = 0, n = 0; i + this._cols[n] < t && n < this._cols.length;) {\n          i += this._cols[n], n++;\n        }\n\n        if (e = n + (this._cols[n] ? (t - i) / this._cols[n] : 0), this._ignores && e >= this._cols.length) for (; e >= 1 && this._ignores[Math.floor(e)];) {\n          e--;\n        }\n      }\n\n      return e;\n    }, g._week_indexes_from_pos = function (t) {\n      if (this._cols) {\n        var e = this._get_column_index(t.x);\n\n        return t.x = Math.min(this._cols.length - 1, Math.max(0, Math.ceil(e) - 1)), t.y = Math.max(0, Math.ceil(60 * t.y / (this.config.time_step * this.config.hour_size_px)) - 1) + this.config.first_hour * (60 / this.config.time_step), t;\n      }\n\n      return t;\n    }, g._mouse_coords = function (t) {\n      var e,\n          i = document.body,\n          n = document.documentElement;\n      e = this.$env.isIE || !t.pageX && !t.pageY ? {\n        x: t.clientX + (i.scrollLeft || n.scrollLeft || 0) - i.clientLeft,\n        y: t.clientY + (i.scrollTop || n.scrollTop || 0) - i.clientTop\n      } : {\n        x: t.pageX,\n        y: t.pageY\n      }, this.config.rtl && this._colsS ? (e.x = this.$container.querySelector(\".dhx_cal_data\").offsetWidth - e.x, \"month\" !== this._mode && (e.x -= this.xy.scale_width)) : e.x -= this.$domHelpers.getAbsoluteLeft(this._obj) + (this._table_view ? 0 : this.xy.scale_width);\n      var a = this.$container.querySelector(\".dhx_cal_data\");\n      e.y -= this.$domHelpers.getAbsoluteTop(a) - this._els.dhx_cal_data[0].scrollTop, e.ev = t;\n      var r = this[\"mouse_\" + this._mode];\n      if (r) e = r.call(this, e);else if (this._table_view) {\n        var s = this._get_column_index(e.x);\n\n        if (!this._cols || !this._colsS) return e;\n        var o = 0;\n\n        for (o = 1; o < this._colsS.heights.length && !(this._colsS.heights[o] > e.y); o++) {\n          ;\n        }\n\n        e.y = Math.ceil(24 * (Math.max(0, s) + 7 * Math.max(0, o - 1)) * 60 / this.config.time_step), (g._drag_mode || \"month\" == this._mode) && (e.y = 24 * (Math.max(0, Math.ceil(s) - 1) + 7 * Math.max(0, o - 1)) * 60 / this.config.time_step), \"move\" == this._drag_mode && g._ignores_detected && g.config.preserve_length && (e._ignores = !0, this._drag_event._event_length || (this._drag_event._event_length = this._get_real_event_length(this._drag_event.start_date, this._drag_event.end_date, {\n          x_step: 1,\n          x_unit: \"day\"\n        }))), e.x = 0;\n      } else e = this._week_indexes_from_pos(e);\n      return e.timestamp = +new Date(), e;\n    }, g._close_not_saved = function () {\n      if (new Date().valueOf() - (g._new_event || 0) > 500 && g._edit_id) {\n        var t = g.locale.labels.confirm_closing;\n        g._dhtmlx_confirm(t, g.locale.labels.title_confirm_closing, function () {\n          g.editStop(g.config.positive_closing);\n        }), t && (this._drag_id = this._drag_pos = this._drag_mode = null);\n      }\n    }, g._correct_shift = function (t, e) {\n      return t -= 6e4 * (new Date(g._min_date).getTimezoneOffset() - new Date(t).getTimezoneOffset()) * (e ? -1 : 1);\n    }, g._is_pos_changed = function (t, e) {\n      function i(t, e, i) {\n        return !!(Math.abs(t - e) > i);\n      }\n\n      if (!t || !this._drag_pos) return !0;\n      var n = 5;\n      return !!(this._drag_pos.has_moved || !this._drag_pos.timestamp || e.timestamp - this._drag_pos.timestamp > 100 || i(t.ev.clientX, e.ev.clientX, n) || i(t.ev.clientY, e.ev.clientY, n));\n    }, g._correct_drag_start_date = function (t) {\n      var e;\n      g.matrix && (e = g.matrix[g._mode]), e = e || {\n        x_step: 1,\n        x_unit: \"day\"\n      }, t = new Date(t);\n      var i = 1;\n      return (e._start_correction || e._end_correction) && (i = 60 * (e.last_hour || 0) - (60 * t.getHours() + t.getMinutes()) || 1), 1 * t + (g._get_fictional_event_length(t, i, e) - i);\n    }, g._correct_drag_end_date = function (t, e) {\n      var i;\n      g.matrix && (i = g.matrix[g._mode]), i = i || {\n        x_step: 1,\n        x_unit: \"day\"\n      };\n\n      var n = 1 * t + g._get_fictional_event_length(t, e, i);\n\n      return new Date(1 * n - (g._get_fictional_event_length(n, -1, i, -1) + 1));\n    }, g._on_mouse_move = function (t) {\n      if (this._drag_mode) {\n        var e = this._mouse_coords(t);\n\n        if (this._is_pos_changed(this._drag_pos, e)) {\n          var i, n;\n          if (this._edit_id != this._drag_id && this._close_not_saved(), !this._drag_mode) return;\n          var a = null;\n\n          if (this._drag_pos && !this._drag_pos.has_moved && (a = this._drag_pos, a.has_moved = !0), this._drag_pos = e, this._drag_pos.has_moved = !0, \"create\" == this._drag_mode) {\n            if (a && (e = a), this._close_not_saved(), this.unselect(this._select_id), this._loading = !0, i = this._get_date_from_pos(e).valueOf(), !this._drag_start) {\n              return this.callEvent(\"onBeforeEventCreated\", [t, this._drag_id]) ? (this._loading = !1, void (this._drag_start = i)) : void (this._loading = !1);\n            }\n\n            n = i, this._drag_start;\n            var r = new Date(this._drag_start),\n                s = new Date(n);\n            \"day\" != this._mode && \"week\" != this._mode || r.getHours() != s.getHours() || r.getMinutes() != s.getMinutes() || (s = new Date(this._drag_start + 1e3)), this._drag_id = this.uid(), this.addEvent(r, s, this.locale.labels.new_event, this._drag_id, e.fields), this.callEvent(\"onEventCreated\", [this._drag_id, t]), this._loading = !1, this._drag_mode = \"new-size\";\n          }\n\n          var o,\n              d = this.config.time_step,\n              l = this.getEvent(this._drag_id);\n          if (g.matrix && (o = g.matrix[g._mode]), o = o || {\n            x_step: 1,\n            x_unit: \"day\"\n          }, \"move\" == this._drag_mode) i = this._min_date.valueOf() + 6e4 * (e.y * this.config.time_step + 24 * e.x * 60), !e.custom && this._table_view && (i += 1e3 * this.date.time_part(l.start_date)), !this._table_view && this._dragEventBody && void 0 === this._drag_event._move_event_shift && (this._drag_event._move_event_shift = i - l.start_date), this._drag_event._move_event_shift && (i -= this._drag_event._move_event_shift), i = this._correct_shift(i), e._ignores && this.config.preserve_length && this._table_view ? (i = g._correct_drag_start_date(i), n = g._correct_drag_end_date(i, this._drag_event._event_length)) : n = l.end_date.valueOf() - (l.start_date.valueOf() - i);else {\n            if (i = l.start_date.valueOf(), n = l.end_date.valueOf(), this._table_view) {\n              var _ = this._min_date.valueOf() + e.y * this.config.time_step * 6e4 + (e.custom ? 0 : 864e5);\n\n              if (\"month\" == this._mode) {\n                if (_ = this._correct_shift(_, !1), this._drag_from_start) {\n                  var h = 864e5;\n                  _ <= g.date.date_part(new Date(n + h - 1)).valueOf() && (i = _ - h);\n                } else n = _;\n              } else this.config.preserve_length ? e.resize_from_start ? i = g._correct_drag_start_date(_) : n = g._correct_drag_end_date(_, 0) : e.resize_from_start ? i = _ : n = _;\n            } else {\n              var c = this.date.date_part(new Date(l.end_date.valueOf() - 1)).valueOf(),\n                  u = new Date(c),\n                  f = this.config.first_hour,\n                  v = this.config.last_hour,\n                  m = 60 / d * (v - f);\n              this.config.time_step = 1;\n\n              var p = this._mouse_coords(t);\n\n              this.config.time_step = d;\n              var x = e.y * d * 6e4,\n                  b = Math.min(e.y + 1, m) * d * 6e4,\n                  y = 6e4 * p.y;\n              n = Math.abs(x - y) > Math.abs(b - y) ? c + b : c + x, n += 6e4 * (new Date(n).getTimezoneOffset() - u.getTimezoneOffset()), this._els.dhx_cal_data[0].style.cursor = \"s-resize\", \"week\" != this._mode && \"day\" != this._mode || (n = this._correct_shift(n));\n            }\n\n            if (\"new-size\" == this._drag_mode) {\n              if (n <= this._drag_start) {\n                var w = e.shift || (this._table_view && !e.custom ? 864e5 : 0);\n                i = n - (e.shift ? 0 : w), n = this._drag_start + (w || 6e4 * d);\n              } else i = this._drag_start;\n            } else n <= i && (n = i + 6e4 * d);\n          }\n          var D = new Date(n - 1),\n              E = new Date(i);\n\n          if (\"move\" == this._drag_mode && g.config.limit_drag_out && (+E < +g._min_date || +n > +g._max_date)) {\n            if (+l.start_date < +g._min_date || +l.end_date > +g._max_date) E = new Date(l.start_date), n = new Date(l.end_date);else {\n              var A = n - E;\n              +E < +g._min_date ? (E = new Date(g._min_date), e._ignores && this.config.preserve_length && this._table_view ? (E = new Date(g._correct_drag_start_date(E)), o._start_correction && (E = new Date(E.valueOf() + o._start_correction)), n = new Date(1 * E + this._get_fictional_event_length(E, this._drag_event._event_length, o))) : n = new Date(+E + A)) : (n = new Date(g._max_date), e._ignores && this.config.preserve_length && this._table_view ? (o._end_correction && (n = new Date(n.valueOf() - o._end_correction)), n = new Date(1 * n - this._get_fictional_event_length(n, 0, o, !0)), E = new Date(1 * n - this._get_fictional_event_length(n, this._drag_event._event_length, o, !0)), this._ignores_detected && (E = g.date.add(E, o.x_step, o.x_unit), n = new Date(1 * n - this._get_fictional_event_length(n, 0, o, !0)), n = g.date.add(n, o.x_step, o.x_unit))) : E = new Date(+n - A));\n            }\n            var D = new Date(n - 1);\n          }\n\n          if (!this._table_view && this._dragEventBody && !g.config.all_timed && (!g._get_section_view() && e.x != this._get_event_sday({\n            start_date: new Date(i),\n            end_date: new Date(i)\n          }) || new Date(i).getHours() < this.config.first_hour)) {\n            var A = n - E;\n\n            if (\"move\" == this._drag_mode) {\n              var h = this._min_date.valueOf() + 24 * e.x * 60 * 6e4;\n              E = new Date(h), E.setHours(this.config.first_hour), n = new Date(E.valueOf() + A), D = new Date(n - 1);\n            }\n          }\n\n          if (!this._table_view && !g.config.all_timed && (!g.getView() && e.x != this._get_event_sday({\n            start_date: new Date(n),\n            end_date: new Date(n)\n          }) || new Date(n).getHours() >= this.config.last_hour)) {\n            var A = n - E,\n                h = this._min_date.valueOf() + 24 * e.x * 60 * 6e4;\n            n = g.date.date_part(new Date(h)), n.setHours(this.config.last_hour), D = new Date(n - 1), \"move\" == this._drag_mode && (E = new Date(+n - A));\n          }\n\n          if (this._table_view || D.getDate() == E.getDate() && D.getHours() < this.config.last_hour || g._allow_dnd) if (l.start_date = E, l.end_date = new Date(n), this.config.update_render) {\n            var S = g._els.dhx_cal_data[0].scrollTop;\n            this.update_view(), g._els.dhx_cal_data[0].scrollTop = S;\n          } else this.updateEvent(this._drag_id);\n          this._table_view && this.for_rendered(this._drag_id, function (t) {\n            t.className += \" dhx_in_move dhx_cal_event_drag\";\n          }), this.callEvent(\"onEventDrag\", [this._drag_id, this._drag_mode, t]);\n        }\n      } else if (g.checkEvent(\"onMouseMove\")) {\n        var k = this._locate_event(t.target || t.srcElement);\n\n        this.callEvent(\"onMouseMove\", [k, t]);\n      }\n    }, g._on_mouse_down = function (t, e) {\n      if (2 != t.button && !this.config.readonly && !this._drag_mode) {\n        e = e || t.target || t.srcElement;\n\n        var i = g._getClassName(e).split(\" \")[0];\n\n        switch (this.config.drag_event_body && \"dhx_body\" == i && e.parentNode && -1 === e.parentNode.className.indexOf(\"dhx_cal_select_menu\") && (i = \"dhx_event_move\", this._dragEventBody = !0), i) {\n          case \"dhx_cal_event_line\":\n          case \"dhx_cal_event_clear\":\n            this._table_view && (this._drag_mode = \"move\");\n            break;\n\n          case \"dhx_event_move\":\n          case \"dhx_wa_ev_body\":\n            this._drag_mode = \"move\";\n            break;\n\n          case \"dhx_event_resize\":\n            this._drag_mode = \"resize\";\n            g._getClassName(e).indexOf(\"dhx_event_resize_end\") < 0 ? g._drag_from_start = !0 : g._drag_from_start = !1;\n            break;\n\n          case \"dhx_scale_holder\":\n          case \"dhx_scale_holder_now\":\n          case \"dhx_month_body\":\n          case \"dhx_matrix_cell\":\n          case \"dhx_marked_timespan\":\n            this._drag_mode = \"create\";\n            break;\n\n          case \"\":\n            if (e.parentNode) return g._on_mouse_down(t, e.parentNode);\n            break;\n\n          default:\n            if ((!g.checkEvent(\"onMouseDown\") || g.callEvent(\"onMouseDown\", [i, t])) && e.parentNode && e != this && \"dhx_body\" != i) return g._on_mouse_down(t, e.parentNode);\n            this._drag_mode = null, this._drag_id = null;\n        }\n\n        if (this._drag_mode) {\n          var n = this._locate_event(e);\n\n          if (this.config[\"drag_\" + this._drag_mode] && this.callEvent(\"onBeforeDrag\", [n, this._drag_mode, t])) {\n            if (this._drag_id = n, (this._edit_id != this._drag_id || this._edit_id && \"create\" == this._drag_mode) && this._close_not_saved(), !this._drag_mode) return;\n            this._drag_event = g._lame_clone(this.getEvent(this._drag_id) || {}), this._drag_pos = this._mouse_coords(t);\n          } else this._drag_mode = this._drag_id = 0;\n        }\n\n        this._drag_start = null;\n      }\n    }, g._get_private_properties = function (t) {\n      var e = {};\n\n      for (var i in t) {\n        0 === i.indexOf(\"_\") && (e[i] = !0);\n      }\n\n      return e;\n    }, g._clear_temporary_properties = function (t, e) {\n      var i = this._get_private_properties(t),\n          n = this._get_private_properties(e);\n\n      for (var a in n) {\n        i[a] || delete e[a];\n      }\n    }, g._on_mouse_up = function (t) {\n      if (!t || 2 != t.button || !this._mobile) {\n        if (this._drag_mode && this._drag_id) {\n          this._els.dhx_cal_data[0].style.cursor = \"default\";\n          var e = this._drag_id,\n              i = this._drag_mode,\n              n = !this._drag_pos || this._drag_pos.has_moved;\n          delete this._drag_event._move_event_shift;\n          var a = this.getEvent(this._drag_id);\n\n          if (n && (this._drag_event._dhx_changed || !this._drag_event.start_date || a.start_date.valueOf() != this._drag_event.start_date.valueOf() || a.end_date.valueOf() != this._drag_event.end_date.valueOf())) {\n            var r = \"new-size\" == this._drag_mode;\n            if (this.callEvent(\"onBeforeEventChanged\", [a, t, r, this._drag_event])) {\n              if (this._drag_id = this._drag_mode = null, r && this.config.edit_on_create) {\n                if (this.unselect(), this._new_event = new Date(), this._table_view || this.config.details_on_create || !this.config.select || !this.isOneDayEvent(this.getEvent(e))) return g.callEvent(\"onDragEnd\", [e, i, t]), this.showLightbox(e);\n                this._drag_pos = !0, this._select_id = this._edit_id = e;\n              } else this._new_event || this.callEvent(r ? \"onEventAdded\" : \"onEventChanged\", [e, this.getEvent(e)]);\n            } else r ? this.deleteEvent(a.id, !0) : (this._drag_event._dhx_changed = !1, this._clear_temporary_properties(a, this._drag_event), g._lame_copy(a, this._drag_event), this.updateEvent(a.id));\n          }\n\n          this._drag_pos && (this._drag_pos.has_moved || !0 === this._drag_pos) && (this._drag_id = this._drag_mode = null, this.render_view_data()), g.callEvent(\"onDragEnd\", [e, i, t]);\n        }\n\n        this._drag_id = null, this._drag_mode = null, this._drag_pos = null;\n      }\n    }, g._trigger_dyn_loading = function () {\n      return !(!this._load_mode || !this._load()) && (this._render_wait = !0, !0);\n    }, g.update_view = function () {\n      this._reset_ignores(), this._update_nav_bar(this.config.header, this.$container.querySelector(\".dhx_cal_navline\"));\n      var t = this[this._mode + \"_view\"];\n      if (t ? t.call(this, !0) : this._reset_scale(), this._trigger_dyn_loading()) return !0;\n      this.render_view_data();\n    }, g.isViewExists = function (t) {\n      return !!(g[t + \"_view\"] || g.date[t + \"_start\"] && g.templates[t + \"_date\"] && g.templates[t + \"_scale_date\"]);\n    }, g._set_aria_buttons_attrs = function () {\n      for (var t = [\"dhx_cal_next_button\", \"dhx_cal_prev_button\", \"dhx_cal_tab\", \"dhx_cal_today_button\"], e = 0; e < t.length; e++) {\n        for (var i = this._els[t[e]], n = 0; i && n < i.length; n++) {\n          var a = i[n].getAttribute(\"name\"),\n              r = this.locale.labels[t[e]];\n          a && (r = this.locale.labels[a] || r), \"dhx_cal_next_button\" == t[e] ? r = this.locale.labels.next : \"dhx_cal_prev_button\" == t[e] && (r = this.locale.labels.prev), this._waiAria.headerButtonsAttributes(i[n], r || \"\");\n        }\n      }\n    }, g.updateView = function (t, e) {\n      if (!this.$container) throw new Error(\"The scheduler is not initialized. \\n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**\");\n      t = t || this._date, e = e || this._mode;\n      var i = \"dhx_cal_data\",\n          n = this._obj,\n          a = \"dhx_scheduler_\" + this._mode,\n          r = \"dhx_scheduler_\" + e;\n      this._mode && -1 != n.className.indexOf(a) ? n.className = n.className.replace(a, r) : n.className += \" \" + r;\n      var s,\n          o = \"dhx_multi_day\",\n          d = !(this._mode != e || !this.config.preserve_scroll) && this._els[i][0].scrollTop;\n      this._els[o] && this._els[o][0] && (s = this._els[o][0].scrollTop), this[this._mode + \"_view\"] && e && this._mode != e && this[this._mode + \"_view\"](!1), this._close_not_saved(), this._els[o] && (this._els[o][0].parentNode.removeChild(this._els[o][0]), this._els[o] = null), this._mode = e, this._date = t, this._table_view = \"month\" == this._mode, this._dy_shift = 0, this.update_view(), this._set_aria_buttons_attrs();\n      var l = this._els.dhx_cal_tab;\n      if (l) for (var _ = 0; _ < l.length; _++) {\n        var h = l[_];\n        h.getAttribute(\"name\") == this._mode + \"_tab\" ? (h.classList.add(\"active\"), this._waiAria.headerToggleState(h, !0)) : (h.classList.remove(\"active\"), this._waiAria.headerToggleState(h, !1));\n      }\n      \"number\" == typeof d && (this._els[i][0].scrollTop = d), \"number\" == typeof s && this._els[o] && this._els[o][0] && (this._els[o][0].scrollTop = s);\n    }, g.setCurrentView = function (t, e) {\n      this.callEvent(\"onBeforeViewChange\", [this._mode, this._date, e || this._mode, t || this._date]) && (this.updateView(t, e), this.callEvent(\"onViewChange\", [this._mode, this._date]));\n    }, g.render = function (t, e) {\n      g.setCurrentView(t, e);\n    }, g._render_x_header = function (t, e, i, n, a) {\n      a = a || 0;\n      var r = document.createElement(\"div\");\n      r.className = \"dhx_scale_bar\", this.templates[this._mode + \"_scalex_class\"] && (r.className += \" \" + this.templates[this._mode + \"_scalex_class\"](i));\n      var s = this._cols[t] - 1;\n      \"month\" == this._mode && 0 === t && this.config.left_border && (r.className += \" dhx_scale_bar_border\", e += 1), this.set_xy(r, s, this.xy.scale_height - 2, e, a);\n      var o = this.templates[this._mode + \"_scale_date\"](i, this._mode);\n      r.innerHTML = o, this._waiAria.dayHeaderAttr(r, o), n.appendChild(r);\n    }, g._get_columns_num = function (t, e) {\n      var i = 7;\n\n      if (!g._table_view) {\n        var n = g.date[\"get_\" + g._mode + \"_end\"];\n        n && (e = n(t)), i = Math.round((e.valueOf() - t.valueOf()) / 864e5);\n      }\n\n      return i;\n    }, g._get_timeunit_start = function () {\n      return this.date[this._mode + \"_start\"](new Date(this._date.valueOf()));\n    }, g._get_view_end = function () {\n      var t = this._get_timeunit_start(),\n          e = g.date.add(t, 1, this._mode);\n\n      if (!g._table_view) {\n        var i = g.date[\"get_\" + g._mode + \"_end\"];\n        i && (e = i(t));\n      }\n\n      return e;\n    }, g._calc_scale_sizes = function (t, e, i) {\n      var n = this.config.rtl,\n          a = t,\n          r = this._get_columns_num(e, i);\n\n      this._process_ignores(e, r, \"day\", 1);\n\n      for (var s = r - this._ignores_detected, o = 0; o < r; o++) {\n        this._ignores[o] ? (this._cols[o] = 0, s++) : this._cols[o] = Math.floor(a / (s - o)), a -= this._cols[o], this._colsS[o] = (this._cols[o - 1] || 0) + (this._colsS[o - 1] || (this._table_view ? 0 : (n ? this.xy.scroll_width : this.xy.scale_width) + 2));\n      }\n\n      this._colsS.col_length = r, this._colsS[r] = this._cols[r - 1] + this._colsS[r - 1] || 0;\n    }, g._set_scale_col_size = function (t, e, i) {\n      var n = this.config;\n      this.set_xy(t, e - 1, n.hour_size_px * (n.last_hour - n.first_hour), i + this.xy.scale_width + 1, 0);\n    }, g._render_scales = function (t, e) {\n      var i = new Date(g._min_date),\n          n = new Date(g._max_date),\n          a = this.date.date_part(g._currentDate()),\n          r = parseInt(t.style.width, 10),\n          s = new Date(this._min_date),\n          o = this._get_columns_num(i, n);\n\n      this._calc_scale_sizes(r, i, n);\n\n      var d = 0;\n      t.innerHTML = \"\";\n\n      for (var l = 0; l < o; l++) {\n        if (this._ignores[l] || this._render_x_header(l, d, s, t), !this._table_view) {\n          var _ = document.createElement(\"div\"),\n              h = \"dhx_scale_holder\";\n\n          s.valueOf() == a.valueOf() && (h = \"dhx_scale_holder_now\"), _.setAttribute(\"data-column-index\", l), this._ignores_detected && this._ignores[l] && (h += \" dhx_scale_ignore\"), _.className = h + \" \" + this.templates.week_date_class(s, a), this._waiAria.dayColumnAttr(_, s), this._set_scale_col_size(_, this._cols[l], d), e.appendChild(_), this.callEvent(\"onScaleAdd\", [_, s]);\n        }\n\n        d += this._cols[l], s = this.date.add(s, 1, \"day\"), s = this.date.day_start(s);\n      }\n    }, g._getNavDateElement = function () {\n      return this.$container.querySelector(\".dhx_cal_date\");\n    }, g._reset_scale = function () {\n      if (this.templates[this._mode + \"_date\"]) {\n        var t = this._els.dhx_cal_header[0],\n            e = this._els.dhx_cal_data[0],\n            i = this.config;\n        t.innerHTML = \"\", e.innerHTML = \"\";\n        var n = (i.readonly || !i.drag_resize ? \" dhx_resize_denied\" : \"\") + (i.readonly || !i.drag_move ? \" dhx_move_denied\" : \"\");\n        e.className = \"dhx_cal_data\" + n, this._scales = {}, this._cols = [], this._colsS = {\n          height: 0\n        }, this._dy_shift = 0, this.set_sizes();\n\n        var a,\n            r,\n            s = this._get_timeunit_start(),\n            o = g._get_view_end();\n\n        a = r = this._table_view ? g.date.week_start(s) : s, this._min_date = a;\n\n        var d = this.templates[this._mode + \"_date\"](s, o, this._mode),\n            l = this._getNavDateElement();\n\n        if (l && (l.innerHTML = d, this._waiAria.navBarDateAttr(l, d)), this._max_date = o, g._render_scales(t, e), this._table_view) this._reset_month_scale(e, s, r);else if (this._reset_hours_scale(e, s, r), i.multi_day) {\n          var _ = \"dhx_multi_day\";\n          this._els[_] && (this._els[_][0].parentNode.removeChild(this._els[_][0]), this._els[_] = null);\n          var h = this._els.dhx_cal_navline[0],\n              c = h.offsetHeight + this._els.dhx_cal_header[0].offsetHeight + 1,\n              u = document.createElement(\"div\");\n          u.className = _, u.style.visibility = \"hidden\";\n          var f = this._colsS[this._colsS.col_length],\n              v = i.rtl ? this.xy.scale_width : this.xy.scroll_width,\n              m = Math.max(f + v - 2, 0);\n          this.set_xy(u, m, 0, 0, c), e.parentNode.insertBefore(u, e);\n          var p = u.cloneNode(!0);\n          p.className = _ + \"_icon\", p.style.visibility = \"hidden\", this.set_xy(p, this.xy.scale_width, 0, 0, c), u.appendChild(p), this._els[_] = [u, p], this._els[_][0].onclick = this._click.dhx_cal_data;\n        }\n      }\n    }, g._reset_hours_scale = function (t, e, i) {\n      var n = document.createElement(\"div\");\n      n.className = \"dhx_scale_holder\";\n\n      for (var a = new Date(1980, 1, 1, this.config.first_hour, 0, 0), r = 1 * this.config.first_hour; r < this.config.last_hour; r++) {\n        var s = document.createElement(\"div\");\n        s.className = \"dhx_scale_hour\", s.style.height = this.config.hour_size_px + \"px\";\n        var o = this.xy.scale_width;\n        this.config.left_border && (s.className += \" dhx_scale_hour_border\"), s.style.width = o + \"px\";\n        var d = g.templates.hour_scale(a);\n        s.innerHTML = d, this._waiAria.hourScaleAttr(s, d), n.appendChild(s), a = this.date.add(a, 1, \"hour\");\n      }\n\n      t.appendChild(n), this.config.scroll_hour && (t.scrollTop = this.config.hour_size_px * (this.config.scroll_hour - this.config.first_hour));\n    }, g._currentDate = function () {\n      return g.config.now_date ? new Date(g.config.now_date) : new Date();\n    }, g._reset_ignores = function () {\n      this._ignores = {}, this._ignores_detected = 0;\n    }, g._process_ignores = function (t, e, i, n, a) {\n      this._reset_ignores();\n\n      var r = g[\"ignore_\" + this._mode];\n      if (r) for (var s = new Date(t), o = 0; o < e; o++) {\n        r(s) && (this._ignores_detected += 1, this._ignores[o] = !0, a && e++), s = g.date.add(s, n, i), g.date[i + \"_start\"] && (s = g.date[i + \"_start\"](s));\n      }\n    }, g._render_month_scale = function (t, e, i, n) {\n      function a(t) {\n        var e = g._colsS.height;\n        return void 0 !== g._colsS.heights[t + 1] && (e = g._colsS.heights[t + 1] - (g._colsS.heights[t] || 0)), e;\n      }\n\n      var r = g.date.add(e, 1, \"month\"),\n          s = new Date(i),\n          o = g._currentDate();\n\n      this.date.date_part(o), this.date.date_part(i), n = n || Math.ceil(Math.round((r.valueOf() - i.valueOf()) / 864e5) / 7);\n\n      for (var d = [], l = 0; l <= 7; l++) {\n        var _ = (this._cols[l] || 0) - 1;\n\n        0 === l && this.config.left_border && (_ -= 1), d[l] = _ + \"px\";\n      }\n\n      var h = 0,\n          c = document.createElement(\"table\");\n      c.setAttribute(\"cellpadding\", \"0\"), c.setAttribute(\"cellspacing\", \"0\");\n      var u = document.createElement(\"tbody\");\n      c.appendChild(u);\n\n      for (var f = [], l = 0; l < n; l++) {\n        var v = document.createElement(\"tr\");\n        u.appendChild(v);\n\n        for (var m = Math.max(a(l) - g.xy.month_head_height, 0), p = 0; p < 7; p++) {\n          var x = document.createElement(\"td\");\n          v.appendChild(x);\n          var b = \"\";\n          i < e ? b = \"dhx_before\" : i >= r ? b = \"dhx_after\" : i.valueOf() == o.valueOf() && (b = \"dhx_now\"), this._ignores_detected && this._ignores[p] && (b += \" dhx_scale_ignore\"), x.className = b + \" \" + this.templates.month_date_class(i, o), x.setAttribute(\"data-cell-date\", g.templates.format_date(i));\n          var y = \"dhx_month_body\",\n              w = \"dhx_month_head\";\n          if (0 === p && this.config.left_border && (y += \" dhx_month_body_border\", w += \" dhx_month_head_border\"), this._ignores_detected && this._ignores[p]) x.appendChild(document.createElement(\"div\")), x.appendChild(document.createElement(\"div\"));else {\n            this._waiAria.monthCellAttr(x, i);\n\n            var D = document.createElement(\"div\");\n            D.className = w, D.innerHTML = this.templates.month_day(i), x.appendChild(D);\n            var E = document.createElement(\"div\");\n            E.className = y, E.style.height = m + \"px\", E.style.width = d[p], x.appendChild(E);\n          }\n          f.push(i);\n          var A = i.getDate();\n          i = this.date.add(i, 1, \"day\"), i.getDate() - A > 1 && (i = new Date(i.getFullYear(), i.getMonth(), A + 1, 12, 0));\n        }\n\n        g._colsS.heights[l] = h, h += a(l);\n      }\n\n      this._min_date = s, this._max_date = i, t.innerHTML = \"\", t.appendChild(c), this._scales = {};\n\n      for (var S = t.getElementsByTagName(\"div\"), l = 0; l < f.length; l++) {\n        var t = S[2 * l + 1],\n            k = f[l];\n        this._scales[+k] = t;\n      }\n\n      for (var l = 0; l < f.length; l++) {\n        var k = f[l];\n        this.callEvent(\"onScaleAdd\", [this._scales[+k], k]);\n      }\n\n      return this._max_date;\n    }, g._reset_month_scale = function (t, e, i, n) {\n      var a = g.date.add(e, 1, \"month\"),\n          r = g._currentDate();\n\n      this.date.date_part(r), this.date.date_part(i), n = n || Math.ceil(Math.round((a.valueOf() - i.valueOf()) / 864e5) / 7);\n      var s = Math.floor(t.clientHeight / n) - this.xy.month_head_height;\n      return this._colsS.height = s + this.xy.month_head_height, this._colsS.heights = [], g._render_month_scale(t, e, i, n);\n    }, g.getView = function (t) {\n      return t || (t = g.getState().mode), g.matrix && g.matrix[t] ? g.matrix[t] : g._props && g._props[t] ? g._props[t] : null;\n    }, g.getLabel = function (t, e) {\n      for (var i = this.config.lightbox.sections, n = 0; n < i.length; n++) {\n        if (i[n].map_to == t) for (var a = i[n].options, r = 0; r < a.length; r++) {\n          if (a[r].key == e) return a[r].label;\n        }\n      }\n\n      return \"\";\n    }, g.updateCollection = function (t, e) {\n      var i = g.serverList(t);\n      return !!i && (i.splice(0, i.length), i.push.apply(i, e || []), g.callEvent(\"onOptionsLoad\", []), g.resetLightbox(), g.hideCover(), !0);\n    }, g._lame_clone = function (t, e) {\n      var i, n, a;\n\n      for (e = e || [], i = 0; i < e.length; i += 2) {\n        if (t === e[i]) return e[i + 1];\n      }\n\n      if (t && \"object\" == typeof t) {\n        for (a = Object.create(t), n = [Array, Date, Number, String, Boolean], i = 0; i < n.length; i++) {\n          t instanceof n[i] && (a = i ? new n[i](t) : new n[i]());\n        }\n\n        e.push(t, a);\n\n        for (i in t) {\n          Object.prototype.hasOwnProperty.apply(t, [i]) && (a[i] = g._lame_clone(t[i], e));\n        }\n      }\n\n      return a || t;\n    }, g._lame_copy = function (t, e) {\n      for (var i in e) {\n        e.hasOwnProperty(i) && (t[i] = e[i]);\n      }\n\n      return t;\n    }, g._get_date_from_pos = function (t) {\n      var e = this._min_date.valueOf() + 6e4 * (t.y * this.config.time_step + 24 * (this._table_view ? 0 : t.x) * 60);\n      return new Date(this._correct_shift(e));\n    }, g.getActionData = function (t) {\n      var e = this._mouse_coords(t);\n\n      return {\n        date: this._get_date_from_pos(e),\n        section: e.section\n      };\n    }, g._focus = function (t, e) {\n      if (t && t.focus) if (this._mobile) window.setTimeout(function () {\n        t.focus();\n      }, 10);else try {\n        e && t.select && t.offsetWidth && t.select(), t.focus();\n      } catch (t) {}\n    }, g._get_real_event_length = function (t, e, i) {\n      var n,\n          a = e - t,\n          r = i._start_correction + i._end_correction || 0,\n          s = this[\"ignore_\" + this._mode],\n          o = 0;\n      i.render ? (o = this._get_date_index(i, t), n = this._get_date_index(i, e)) : n = Math.round(a / 60 / 60 / 1e3 / 24);\n\n      for (var d = !0; o < n;) {\n        var l = g.date.add(e, -i.x_step, i.x_unit);\n        s && s(e) && (!d || d && s(l)) ? a -= e - l : (d = !1, a -= r), e = l, n--;\n      }\n\n      return a;\n    }, g._get_fictional_event_length = function (t, e, i, n) {\n      var a = new Date(t),\n          r = n ? -1 : 1;\n\n      if (i._start_correction || i._end_correction) {\n        var s;\n        s = n ? 60 * a.getHours() + a.getMinutes() - 60 * (i.first_hour || 0) : 60 * (i.last_hour || 0) - (60 * a.getHours() + a.getMinutes());\n        var o = 60 * (i.last_hour - i.first_hour),\n            d = Math.ceil((e / 6e4 - s) / o);\n        d < 0 && (d = 0), e += d * (1440 - o) * 60 * 1e3;\n      }\n\n      var l,\n          _ = new Date(1 * t + e * r),\n          h = this[\"ignore_\" + this._mode],\n          c = 0;\n\n      for (i.render ? (c = this._get_date_index(i, a), l = this._get_date_index(i, _)) : l = Math.round(e / 60 / 60 / 1e3 / 24); c * r <= l * r;) {\n        var u = g.date.add(a, i.x_step * r, i.x_unit);\n        h && h(a) && (e += (u - a) * r, l += r), a = u, c += r;\n      }\n\n      return e;\n    }, g._get_section_view = function () {\n      return this.getView();\n    }, g._get_section_property = function () {\n      return this.matrix && this.matrix[this._mode] ? this.matrix[this._mode].y_property : this._props && this._props[this._mode] ? this._props[this._mode].map_to : null;\n    }, g._is_initialized = function () {\n      var t = this.getState();\n      return this._obj && t.date && t.mode;\n    }, g._is_lightbox_open = function () {\n      var t = this.getState();\n      return null !== t.lightbox_id && void 0 !== t.lightbox_id;\n    }, g._getClassName = function (t) {\n      if (!t) return \"\";\n      var e = t.className || \"\";\n      return e.baseVal && (e = e.baseVal), e.indexOf || (e = \"\"), e || \"\";\n    }, g.event = function (t, e, i) {\n      t.addEventListener ? t.addEventListener(e, i, !1) : t.attachEvent && t.attachEvent(\"on\" + e, i);\n    }, g.eventRemove = function (t, e, i) {\n      t.removeEventListener ? t.removeEventListener(e, i, !1) : t.detachEvent && t.detachEvent(\"on\" + e, i);\n    }, function () {\n      function t(t) {\n        var e = !1,\n            i = !1;\n\n        if (window.getComputedStyle) {\n          var n = window.getComputedStyle(t, null);\n          e = n.display, i = n.visibility;\n        } else t.currentStyle && (e = t.currentStyle.display, i = t.currentStyle.visibility);\n\n        var a = !1,\n            r = g._locate_css({\n          target: t\n        }, \"dhx_form_repeat\", !1);\n\n        return r && (a = !(\"0px\" != r.style.height)), a = a || !t.offsetHeight, \"none\" != e && \"hidden\" != i && !a;\n      }\n\n      function e(t) {\n        return !isNaN(t.getAttribute(\"tabindex\")) && 1 * t.getAttribute(\"tabindex\") >= 0;\n      }\n\n      function i(t) {\n        return !{\n          a: !0,\n          area: !0\n        }[t.nodeName.loLowerCase()] || !!t.getAttribute(\"href\");\n      }\n\n      function n(t) {\n        return !{\n          input: !0,\n          select: !0,\n          textarea: !0,\n          button: !0,\n          object: !0\n        }[t.nodeName.toLowerCase()] || !t.hasAttribute(\"disabled\");\n      }\n\n      g._getFocusableNodes = function (a) {\n        for (var r = a.querySelectorAll([\"a[href]\", \"area[href]\", \"input\", \"select\", \"textarea\", \"button\", \"iframe\", \"object\", \"embed\", \"[tabindex]\", \"[contenteditable]\"].join(\", \")), s = Array.prototype.slice.call(r, 0), o = 0; o < s.length; o++) {\n          s[o].$position = o;\n        }\n\n        s.sort(function (t, e) {\n          return 0 === t.tabIndex && 0 !== e.tabIndex ? 1 : 0 !== t.tabIndex && 0 === e.tabIndex ? -1 : t.tabIndex === e.tabIndex ? t.$position - e.$position : t.tabIndex < e.tabIndex ? -1 : 1;\n        });\n\n        for (var o = 0; o < s.length; o++) {\n          var d = s[o];\n          (e(d) || n(d) || i(d)) && t(d) || (s.splice(o, 1), o--);\n        }\n\n        return s;\n      };\n    }(), g._trim = function (t) {\n      return (String.prototype.trim || function () {\n        return this.replace(/^\\s+|\\s+$/g, \"\");\n      }).apply(t);\n    }, g._isDate = function (t) {\n      return !(!t || \"object\" != typeof t) && !!(t.getFullYear && t.getMonth && t.getDate);\n    }, g._isObject = function (t) {\n      return t && \"object\" == typeof t;\n    }, function () {\n      function t(t) {\n        return (t + \"\").replace(n, \" \").replace(a, \" \");\n      }\n\n      function e(t) {\n        return (t + \"\").replace(r, \"&#39;\");\n      }\n\n      function i() {\n        return !g.config.wai_aria_attributes;\n      }\n\n      var n = new RegExp(\"<(?:.|\\n)*?>\", \"gm\"),\n          a = new RegExp(\" +\", \"gm\"),\n          r = new RegExp(\"'\", \"gm\");\n      g._waiAria = {\n        getAttributeString: function getAttributeString(i) {\n          var n = [\" \"];\n\n          for (var a in i) {\n            if (\"function\" != typeof i[a] && \"object\" != typeof i[a]) {\n              var r = e(t(i[a]));\n              n.push(a + \"='\" + r + \"'\");\n            }\n          }\n\n          return n.push(\" \"), n.join(\" \");\n        },\n        setAttributes: function setAttributes(e, i) {\n          for (var n in i) {\n            e.setAttribute(n, t(i[n]));\n          }\n\n          return e;\n        },\n        labelAttr: function labelAttr(t, e) {\n          return this.setAttributes(t, {\n            \"aria-label\": e\n          });\n        },\n        label: function label(t) {\n          return g._waiAria.getAttributeString({\n            \"aria-label\": t\n          });\n        },\n        hourScaleAttr: function hourScaleAttr(t, e) {\n          this.labelAttr(t, e);\n        },\n        monthCellAttr: function monthCellAttr(t, e) {\n          this.labelAttr(t, g.templates.day_date(e));\n        },\n        navBarDateAttr: function navBarDateAttr(t, e) {\n          this.labelAttr(t, e);\n        },\n        dayHeaderAttr: function dayHeaderAttr(t, e) {\n          this.labelAttr(t, e);\n        },\n        dayColumnAttr: function dayColumnAttr(t, e) {\n          this.dayHeaderAttr(t, g.templates.day_date(e));\n        },\n        headerButtonsAttributes: function headerButtonsAttributes(t, e) {\n          return this.setAttributes(t, {\n            role: \"button\",\n            \"aria-label\": e\n          });\n        },\n        headerToggleState: function headerToggleState(t, e) {\n          return this.setAttributes(t, {\n            \"aria-pressed\": e ? \"true\" : \"false\"\n          });\n        },\n        getHeaderCellAttr: function getHeaderCellAttr(t) {\n          return g._waiAria.getAttributeString({\n            \"aria-label\": t\n          });\n        },\n        eventAttr: function eventAttr(t, e) {\n          this._eventCommonAttr(t, e);\n        },\n        _eventCommonAttr: function _eventCommonAttr(e, i) {\n          i.setAttribute(\"aria-label\", t(g.templates.event_text(e.start_date, e.end_date, e))), g.config.readonly && i.setAttribute(\"aria-readonly\", !0), e.$dataprocessor_class && i.setAttribute(\"aria-busy\", !0), i.setAttribute(\"aria-selected\", g.getState().select_id == e.id ? \"true\" : \"false\");\n        },\n        setEventBarAttr: function setEventBarAttr(t, e) {\n          this._eventCommonAttr(t, e);\n        },\n        _getAttributes: function _getAttributes(t, e) {\n          var i = {\n            setAttribute: function setAttribute(t, e) {\n              this[t] = e;\n            }\n          };\n          return t.apply(this, [e, i]), i;\n        },\n        eventBarAttrString: function eventBarAttrString(t) {\n          return this.getAttributeString(this._getAttributes(this.setEventBarAttr, t));\n        },\n        agendaHeadAttrString: function agendaHeadAttrString() {\n          return this.getAttributeString({\n            role: \"row\"\n          });\n        },\n        agendaHeadDateString: function agendaHeadDateString(t) {\n          return this.getAttributeString({\n            role: \"columnheader\",\n            \"aria-label\": t\n          });\n        },\n        agendaHeadDescriptionString: function agendaHeadDescriptionString(t) {\n          return this.agendaHeadDateString(t);\n        },\n        agendaDataAttrString: function agendaDataAttrString() {\n          return this.getAttributeString({\n            role: \"grid\"\n          });\n        },\n        agendaEventAttrString: function agendaEventAttrString(t) {\n          var e = this._getAttributes(this._eventCommonAttr, t);\n\n          return e.role = \"row\", this.getAttributeString(e);\n        },\n        agendaDetailsBtnString: function agendaDetailsBtnString() {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": g.locale.labels.icon_details\n          });\n        },\n        gridAttrString: function gridAttrString() {\n          return this.getAttributeString({\n            role: \"grid\"\n          });\n        },\n        gridRowAttrString: function gridRowAttrString(t) {\n          return this.agendaEventAttrString(t);\n        },\n        gridCellAttrString: function gridCellAttrString(t, e, i) {\n          return this.getAttributeString({\n            role: \"gridcell\",\n            \"aria-label\": [void 0 === e.label ? e.id : e.label, \": \", i]\n          });\n        },\n        mapAttrString: function mapAttrString() {\n          return this.gridAttrString();\n        },\n        mapRowAttrString: function mapRowAttrString(t) {\n          return this.gridRowAttrString(t);\n        },\n        mapDetailsBtnString: function mapDetailsBtnString() {\n          return this.agendaDetailsBtnString();\n        },\n        minicalHeader: function minicalHeader(t, e) {\n          this.setAttributes(t, {\n            id: e + \"\",\n            \"aria-live\": \"assertice\",\n            \"aria-atomic\": \"true\"\n          });\n        },\n        minicalGrid: function minicalGrid(t, e) {\n          this.setAttributes(t, {\n            \"aria-labelledby\": e + \"\",\n            role: \"grid\"\n          });\n        },\n        minicalRow: function minicalRow(t) {\n          this.setAttributes(t, {\n            role: \"row\"\n          });\n        },\n        minicalDayCell: function minicalDayCell(t, e) {\n          var i = e.valueOf() < g._max_date.valueOf() && e.valueOf() >= g._min_date.valueOf();\n\n          this.setAttributes(t, {\n            role: \"gridcell\",\n            \"aria-label\": g.templates.day_date(e),\n            \"aria-selected\": i ? \"true\" : \"false\"\n          });\n        },\n        minicalHeadCell: function minicalHeadCell(t) {\n          this.setAttributes(t, {\n            role: \"columnheader\"\n          });\n        },\n        weekAgendaDayCell: function weekAgendaDayCell(t, e) {\n          var i = t.querySelector(\".dhx_wa_scale_bar\"),\n              n = t.querySelector(\".dhx_wa_day_data\"),\n              a = g.uid() + \"\";\n          this.setAttributes(i, {\n            id: a\n          }), this.setAttributes(n, {\n            \"aria-labelledby\": a\n          });\n        },\n        weekAgendaEvent: function weekAgendaEvent(t, e) {\n          this.eventAttr(e, t);\n        },\n        lightboxHiddenAttr: function lightboxHiddenAttr(t) {\n          t.setAttribute(\"aria-hidden\", \"true\");\n        },\n        lightboxVisibleAttr: function lightboxVisibleAttr(t) {\n          t.setAttribute(\"aria-hidden\", \"false\");\n        },\n        lightboxSectionButtonAttrString: function lightboxSectionButtonAttrString(t) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": t,\n            tabindex: \"0\"\n          });\n        },\n        yearHeader: function yearHeader(t, e) {\n          this.setAttributes(t, {\n            id: e + \"\"\n          });\n        },\n        yearGrid: function yearGrid(t, e) {\n          this.minicalGrid(t, e);\n        },\n        yearHeadCell: function yearHeadCell(t) {\n          return this.minicalHeadCell(t);\n        },\n        yearRow: function yearRow(t) {\n          return this.minicalRow(t);\n        },\n        yearDayCell: function yearDayCell(t) {\n          this.setAttributes(t, {\n            role: \"gridcell\"\n          });\n        },\n        lightboxAttr: function lightboxAttr(t) {\n          t.setAttribute(\"role\", \"dialog\"), t.setAttribute(\"aria-hidden\", \"true\"), t.firstChild.setAttribute(\"role\", \"heading\");\n        },\n        lightboxButtonAttrString: function lightboxButtonAttrString(t) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": g.locale.labels[t],\n            tabindex: \"0\"\n          });\n        },\n        eventMenuAttrString: function eventMenuAttrString(t) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": g.locale.labels[t]\n          });\n        },\n        lightboxHeader: function lightboxHeader(t, e) {\n          t.setAttribute(\"aria-label\", e);\n        },\n        lightboxSelectAttrString: function lightboxSelectAttrString(t) {\n          var e = \"\";\n\n          switch (t) {\n            case \"%Y\":\n              e = g.locale.labels.year;\n              break;\n\n            case \"%m\":\n              e = g.locale.labels.month;\n              break;\n\n            case \"%d\":\n              e = g.locale.labels.day;\n              break;\n\n            case \"%H:%i\":\n              e = g.locale.labels.hour + \" \" + g.locale.labels.minute;\n          }\n\n          return g._waiAria.getAttributeString({\n            \"aria-label\": e\n          });\n        },\n        messageButtonAttrString: function messageButtonAttrString(t) {\n          return \"tabindex='0' role='button' aria-label='\" + t + \"'\";\n        },\n        messageInfoAttr: function messageInfoAttr(t) {\n          t.setAttribute(\"role\", \"alert\");\n        },\n        messageModalAttr: function messageModalAttr(t, e) {\n          t.setAttribute(\"role\", \"dialog\"), e && t.setAttribute(\"aria-labelledby\", e);\n        },\n        quickInfoAttr: function quickInfoAttr(t) {\n          t.setAttribute(\"role\", \"dialog\");\n        },\n        quickInfoHeaderAttrString: function quickInfoHeaderAttrString() {\n          return \" role='heading' \";\n        },\n        quickInfoHeader: function quickInfoHeader(t, e) {\n          t.setAttribute(\"aria-label\", e);\n        },\n        quickInfoButtonAttrString: function quickInfoButtonAttrString(t) {\n          return g._waiAria.getAttributeString({\n            role: \"button\",\n            \"aria-label\": t,\n            tabindex: \"0\"\n          });\n        },\n        tooltipAttr: function tooltipAttr(t) {\n          t.setAttribute(\"role\", \"tooltip\");\n        },\n        tooltipVisibleAttr: function tooltipVisibleAttr(t) {\n          t.setAttribute(\"aria-hidden\", \"false\");\n        },\n        tooltipHiddenAttr: function tooltipHiddenAttr(t) {\n          t.setAttribute(\"aria-hidden\", \"true\");\n        }\n      };\n\n      for (var s in g._waiAria) {\n        g._waiAria[s] = function (t) {\n          return function () {\n            return i() ? \" \" : t.apply(this, arguments);\n          };\n        }(g._waiAria[s]);\n      }\n    }(), g.utils = {\n      mixin: function mixin(t, e, i) {\n        for (var n in e) {\n          (void 0 === t[n] || i) && (t[n] = e[n]);\n        }\n\n        return t;\n      },\n      copy: function t(e) {\n        var i, n;\n        if (e && \"object\" == typeof e) switch (!0) {\n          case h(e):\n            n = new Date(e);\n            break;\n\n          case o(e):\n            for (n = new Array(e.length), i = 0; i < e.length; i++) {\n              n[i] = t(e[i]);\n            }\n\n            break;\n\n          case d(e):\n            n = new String(e);\n            break;\n\n          case l(e):\n            n = new Number(e);\n            break;\n\n          case _(e):\n            n = new Boolean(e);\n            break;\n\n          default:\n            n = {};\n\n            for (i in e) {\n              Object.prototype.hasOwnProperty.apply(e, [i]) && (n[i] = t(e[i]));\n            }\n\n        }\n        return n || e;\n      }\n    }, g.$domHelpers = {\n      getAbsoluteLeft: function getAbsoluteLeft(t) {\n        return this.getOffset(t).left;\n      },\n      getAbsoluteTop: function getAbsoluteTop(t) {\n        return this.getOffset(t).top;\n      },\n      getOffsetSum: function getOffsetSum(t) {\n        for (var e = 0, i = 0; t;) {\n          e += parseInt(t.offsetTop), i += parseInt(t.offsetLeft), t = t.offsetParent;\n        }\n\n        return {\n          top: e,\n          left: i\n        };\n      },\n      getOffsetRect: function getOffsetRect(t) {\n        var e = t.getBoundingClientRect(),\n            i = 0,\n            n = 0;\n\n        if (/Mobi/.test(navigator.userAgent)) {\n          var a = document.createElement(\"div\");\n          a.style.position = \"absolute\", a.style.left = \"0px\", a.style.top = \"0px\", a.style.width = \"1px\", a.style.height = \"1px\", document.body.appendChild(a);\n          var r = a.getBoundingClientRect();\n          i = e.top - r.top, n = e.left - r.left, a.parentNode.removeChild(a);\n        } else {\n          var s = document.body,\n              o = document.documentElement,\n              d = window.pageYOffset || o.scrollTop || s.scrollTop,\n              l = window.pageXOffset || o.scrollLeft || s.scrollLeft,\n              _ = o.clientTop || s.clientTop || 0,\n              h = o.clientLeft || s.clientLeft || 0;\n\n          i = e.top + d - _, n = e.left + l - h;\n        }\n\n        return {\n          top: Math.round(i),\n          left: Math.round(n)\n        };\n      },\n      getOffset: function getOffset(t) {\n        return t.getBoundingClientRect ? this.getOffsetRect(t) : this.getOffsetSum(t);\n      },\n      closest: function closest(t, e) {\n        return t && e ? w(t, e) : null;\n      },\n      insertAfter: function insertAfter(t, e) {\n        e.nextSibling ? e.parentNode.insertBefore(t, e.nextSibling) : e.parentNode.appendChild(t);\n      }\n    };\n    var w;\n    if (Element.prototype.closest) w = function w(t, e) {\n      return t.closest(e);\n    };else {\n      var D = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n      w = function w(t, e) {\n        var i = t;\n\n        do {\n          if (D.call(i, e)) return i;\n          i = i.parentElement || i.parentNode;\n        } while (null !== i && 1 === i.nodeType);\n\n        return null;\n      };\n    }\n    g.$env = {\n      isIE: navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0,\n      isIE6: !window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0,\n      isIE7: navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0,\n      isIE8: navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0,\n      isOpera: navigator.userAgent.indexOf(\"Opera\") >= 0,\n      isChrome: navigator.userAgent.indexOf(\"Chrome\") >= 0,\n      isKHTML: navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0,\n      isFF: navigator.userAgent.indexOf(\"Firefox\") >= 0,\n      isIPad: navigator.userAgent.search(/iPad/gi) >= 0,\n      isEdge: -1 != navigator.userAgent.indexOf(\"Edge\")\n    }, g.$ajax = {\n      _obj: g,\n      cache: !0,\n      method: \"get\",\n      parse: function parse(t) {\n        if (\"string\" != typeof t) return t;\n        var e;\n        return t = t.replace(/^[\\s]+/, \"\"), window.DOMParser && !g.$env.isIE ? e = new window.DOMParser().parseFromString(t, \"text/xml\") : window.ActiveXObject !== window.undefined && (e = new window.ActiveXObject(\"Microsoft.XMLDOM\"), e.async = \"false\", e.loadXML(t)), e;\n      },\n      xmltop: function xmltop(t, e, i) {\n        if (void 0 === e.status || e.status < 400) {\n          var n = e.responseXML ? e.responseXML || e : this.parse(e.responseText || e);\n          if (n && null !== n.documentElement && !n.getElementsByTagName(\"parsererror\").length) return n.getElementsByTagName(t)[0];\n        }\n\n        return -1 !== i && this._obj.callEvent(\"onLoadXMLError\", [\"Incorrect XML\", arguments[1], i]), document.createElement(\"DIV\");\n      },\n      xpath: function xpath(t, e) {\n        if (e.nodeName || (e = e.responseXML || e), g.$env.isIE) return e.selectNodes(t) || [];\n\n        for (var i, n = [], a = (e.ownerDocument || e).evaluate(t, e, null, XPathResult.ANY_TYPE, null);;) {\n          if (!(i = a.iterateNext())) break;\n          n.push(i);\n        }\n\n        return n;\n      },\n      query: function query(t) {\n        this._call(t.method || \"GET\", t.url, t.data || \"\", t.async || !0, t.callback, null, t.headers);\n      },\n      get: function get(t, e) {\n        this._call(\"GET\", t, null, !0, e);\n      },\n      getSync: function getSync(t) {\n        return this._call(\"GET\", t, null, !1);\n      },\n      put: function put(t, e, i) {\n        this._call(\"PUT\", t, e, !0, i);\n      },\n      del: function del(t, e, i) {\n        this._call(\"DELETE\", t, e, !0, i);\n      },\n      post: function post(t, e, i) {\n        1 == arguments.length ? e = \"\" : 2 != arguments.length || \"function\" != typeof e && \"function\" != typeof window[e] ? e = String(e) : (i = e, e = \"\"), this._call(\"POST\", t, e, !0, i);\n      },\n      postSync: function postSync(t, e) {\n        return e = null === e ? \"\" : String(e), this._call(\"POST\", t, e, !1);\n      },\n      getLong: function getLong(t, e) {\n        this._call(\"GET\", t, null, !0, e, {\n          url: t\n        });\n      },\n      postLong: function postLong(t, e, i) {\n        2 != arguments.length || \"function\" != typeof e && (window[e], 0) || (i = e, e = \"\"), this._call(\"POST\", t, e, !0, i, {\n          url: t,\n          postData: e\n        });\n      },\n      _call: function _call(t, e, i, n, a, r, s) {\n        var o = this._obj,\n            d = window.XMLHttpRequest && !o.$env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"),\n            l = null !== navigator.userAgent.match(/AppleWebKit/) && null !== navigator.userAgent.match(/Qt/) && null !== navigator.userAgent.match(/Safari/);\n        if (n && (d.onreadystatechange = function () {\n          if (4 == d.readyState || l && 3 == d.readyState) {\n            if ((200 != d.status || \"\" === d.responseText) && !o.callEvent(\"onAjaxError\", [d])) return;\n            window.setTimeout(function () {\n              \"function\" == typeof a && a.apply(window, [{\n                xmlDoc: d,\n                filePath: e\n              }]), r && (void 0 !== r.postData ? this.postLong(r.url, r.postData, a) : this.getLong(r.url, a)), a = null, d = null;\n            }, 1);\n          }\n        }), \"GET\" != t || this.cache || (e += (e.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"dhxr\" + new Date().getTime() + \"=1\"), d.open(t, e, n), s) for (var _ in s) {\n          d.setRequestHeader(_, s[_]);\n        } else \"POST\" == t.toUpperCase() || \"PUT\" == t || \"DELETE\" == t ? d.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\") : \"GET\" == t && (i = null);\n        if (d.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\"), d.send(i), !n) return {\n          xmlDoc: d,\n          filePath: e\n        };\n      },\n      urlSeparator: function urlSeparator(t) {\n        return -1 != t.indexOf(\"?\") ? \"&\" : \"?\";\n      }\n    };\n\n    var E = function E(t, e) {\n      for (var i = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\", n = t.match(/%[a-zA-Z]/g), a = 0; a < n.length; a++) {\n        switch (n[a]) {\n          case \"%j\":\n          case \"%d\":\n            i += \"set[2]=temp[\" + a + \"]||1;\";\n            break;\n\n          case \"%n\":\n          case \"%m\":\n            i += \"set[1]=(temp[\" + a + \"]||1)-1;\";\n            break;\n\n          case \"%y\":\n            i += \"set[0]=temp[\" + a + \"]*1+(temp[\" + a + \"]>50?1900:2000);\";\n            break;\n\n          case \"%g\":\n          case \"%G\":\n          case \"%h\":\n          case \"%H\":\n            i += \"set[3]=temp[\" + a + \"]||0;\";\n            break;\n\n          case \"%i\":\n            i += \"set[4]=temp[\" + a + \"]||0;\";\n            break;\n\n          case \"%Y\":\n            i += \"set[0]=temp[\" + a + \"]||0;\";\n            break;\n\n          case \"%a\":\n          case \"%A\":\n            i += \"set[3]=set[3]%12+((temp[\" + a + \"]||'').toLowerCase()=='am'?0:12);\";\n            break;\n\n          case \"%s\":\n            i += \"set[5]=temp[\" + a + \"]||0;\";\n            break;\n\n          case \"%M\":\n            i += \"set[1]=this.locale.date.month_short_hash[temp[\" + a + \"]]||0;\";\n            break;\n\n          case \"%F\":\n            i += \"set[1]=this.locale.date.month_full_hash[temp[\" + a + \"]]||0;\";\n        }\n      }\n\n      var r = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\n      return e && (r = \" Date.UTC(\" + r + \")\"), new Function(\"date\", \"var set=[0,0,1,0,0,0]; \" + i + \" return new Date(\" + r + \");\");\n    };\n\n    g.date = {\n      init: function init() {\n        for (var t = g.locale.date.month_short, e = g.locale.date.month_short_hash = {}, i = 0; i < t.length; i++) {\n          e[t[i]] = i;\n        }\n\n        for (var t = g.locale.date.month_full, e = g.locale.date.month_full_hash = {}, i = 0; i < t.length; i++) {\n          e[t[i]] = i;\n        }\n      },\n      _bind_host_object: function _bind_host_object(t) {\n        return t.bind ? t.bind(g) : function () {\n          return t.apply(g, arguments);\n        };\n      },\n      date_part: function date_part(t) {\n        var e = new Date(t);\n        return t.setHours(0), t.setMinutes(0), t.setSeconds(0), t.setMilliseconds(0), t.getHours() && (t.getDate() < e.getDate() || t.getMonth() < e.getMonth() || t.getFullYear() < e.getFullYear()) && t.setTime(t.getTime() + 36e5 * (24 - t.getHours())), t;\n      },\n      time_part: function time_part(t) {\n        return (t.valueOf() / 1e3 - 60 * t.getTimezoneOffset()) % 86400;\n      },\n      week_start: function week_start(t) {\n        var e = t.getDay();\n        return g.config.start_on_monday && (0 === e ? e = 6 : e--), this.date_part(this.add(t, -1 * e, \"day\"));\n      },\n      month_start: function month_start(t) {\n        return t.setDate(1), this.date_part(t);\n      },\n      year_start: function year_start(t) {\n        return t.setMonth(0), this.month_start(t);\n      },\n      day_start: function day_start(t) {\n        return this.date_part(t);\n      },\n      _add_days: function _add_days(t, e) {\n        var i = new Date(t.valueOf());\n\n        if (i.setDate(i.getDate() + e), e == Math.round(e) && e > 0) {\n          var n = +i - +t,\n              a = n % 864e5;\n\n          if (a && t.getTimezoneOffset() == i.getTimezoneOffset()) {\n            var r = a / 36e5;\n            i.setTime(i.getTime() + 60 * (24 - r) * 60 * 1e3);\n          }\n        }\n\n        return e >= 0 && !t.getHours() && i.getHours() && (i.getDate() < t.getDate() || i.getMonth() < t.getMonth() || i.getFullYear() < t.getFullYear()) && i.setTime(i.getTime() + 36e5 * (24 - i.getHours())), i;\n      },\n      add: function add(t, e, i) {\n        var n = new Date(t.valueOf());\n\n        switch (i) {\n          case \"day\":\n            n = g.date._add_days(n, e);\n            break;\n\n          case \"week\":\n            n = g.date._add_days(n, 7 * e);\n            break;\n\n          case \"month\":\n            n.setMonth(n.getMonth() + e);\n            break;\n\n          case \"year\":\n            n.setYear(n.getFullYear() + e);\n            break;\n\n          case \"hour\":\n            n.setTime(n.getTime() + 60 * e * 60 * 1e3);\n            break;\n\n          case \"minute\":\n            n.setTime(n.getTime() + 60 * e * 1e3);\n            break;\n\n          default:\n            return g.date[\"add_\" + i](t, e, i);\n        }\n\n        return n;\n      },\n      to_fixed: function to_fixed(t) {\n        return t < 10 ? \"0\" + t : t;\n      },\n      copy: function copy(t) {\n        return new Date(t.valueOf());\n      },\n      date_to_str: function date_to_str(t, e) {\n        t = t.replace(/%[a-zA-Z]/g, function (t) {\n          switch (t) {\n            case \"%d\":\n              return '\"+this.date.to_fixed(date.getDate())+\"';\n\n            case \"%m\":\n              return '\"+this.date.to_fixed((date.getMonth()+1))+\"';\n\n            case \"%j\":\n              return '\"+date.getDate()+\"';\n\n            case \"%n\":\n              return '\"+(date.getMonth()+1)+\"';\n\n            case \"%y\":\n              return '\"+this.date.to_fixed(date.getFullYear()%100)+\"';\n\n            case \"%Y\":\n              return '\"+date.getFullYear()+\"';\n\n            case \"%D\":\n              return '\"+this.locale.date.day_short[date.getDay()]+\"';\n\n            case \"%l\":\n              return '\"+this.locale.date.day_full[date.getDay()]+\"';\n\n            case \"%M\":\n              return '\"+this.locale.date.month_short[date.getMonth()]+\"';\n\n            case \"%F\":\n              return '\"+this.locale.date.month_full[date.getMonth()]+\"';\n\n            case \"%h\":\n              return '\"+this.date.to_fixed((date.getHours()+11)%12+1)+\"';\n\n            case \"%g\":\n              return '\"+((date.getHours()+11)%12+1)+\"';\n\n            case \"%G\":\n              return '\"+date.getHours()+\"';\n\n            case \"%H\":\n              return '\"+this.date.to_fixed(date.getHours())+\"';\n\n            case \"%i\":\n              return '\"+this.date.to_fixed(date.getMinutes())+\"';\n\n            case \"%a\":\n              return '\"+(date.getHours()>11?\"pm\":\"am\")+\"';\n\n            case \"%A\":\n              return '\"+(date.getHours()>11?\"PM\":\"AM\")+\"';\n\n            case \"%s\":\n              return '\"+this.date.to_fixed(date.getSeconds())+\"';\n\n            case \"%W\":\n              return '\"+this.date.to_fixed(this.date.getISOWeek(date))+\"';\n\n            default:\n              return t;\n          }\n        }), e && (t = t.replace(/date\\.get/g, \"date.getUTC\"));\n        var i = new Function(\"date\", 'return \"' + t + '\";');\n        return g.date._bind_host_object(i);\n      },\n      str_to_date: function str_to_date(t, e, i) {\n        var n = E(t, e),\n            a = /^[0-9]{4}(\\-|\\/)[0-9]{2}(\\-|\\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,\n            r = /^[0-9]{2}\\/[0-9]{2}\\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,\n            s = /^[0-9]{2}\\-[0-9]{2}\\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,\n            o = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/,\n            d = function d(t) {\n          return a.test(String(t));\n        },\n            l = function l(t) {\n          return r.test(String(t));\n        },\n            _ = function _(t) {\n          return s.test(String(t));\n        },\n            h = function h(t) {\n          return o.test(t);\n        },\n            c = E(\"%Y-%m-%d %H:%i:%s\", e),\n            u = E(\"%m/%d/%Y %H:%i:%s\", e),\n            f = E(\"%d-%m-%Y %H:%i:%s\", e);\n\n        return function (t) {\n          if (!i && !g.config.parse_exact_format) {\n            if (t && t.getISOWeek) return new Date(t);\n            if (\"number\" == typeof t) return new Date(t);\n            if (d(t)) return c(t);\n            if (l(t)) return u(t);\n            if (_(t)) return f(t);\n            if (h(t)) return new Date(t);\n          }\n\n          return n.call(g, t);\n        };\n      },\n      getISOWeek: function getISOWeek(t) {\n        if (!t) return !1;\n        t = this.date_part(new Date(t));\n        var e = t.getDay();\n        0 === e && (e = 7);\n        var i = new Date(t.valueOf());\n        i.setDate(t.getDate() + (4 - e));\n        var n = i.getFullYear(),\n            a = Math.round((i.getTime() - new Date(n, 0, 1).getTime()) / 864e5);\n        return 1 + Math.floor(a / 7);\n      },\n      getUTCISOWeek: function getUTCISOWeek(t) {\n        return this.getISOWeek(this.convert_to_utc(t));\n      },\n      convert_to_utc: function convert_to_utc(t) {\n        return new Date(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds());\n      }\n    }, g.locale = {\n      date: {\n        month_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n        month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n        day_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n        day_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n      },\n      labels: {\n        dhx_cal_today_button: \"Today\",\n        day_tab: \"Day\",\n        week_tab: \"Week\",\n        month_tab: \"Month\",\n        new_event: \"New event\",\n        icon_save: \"Save\",\n        icon_cancel: \"Cancel\",\n        icon_details: \"Details\",\n        icon_edit: \"Edit\",\n        icon_delete: \"Delete\",\n        confirm_closing: \"\",\n        confirm_deleting: \"Event will be deleted permanently, are you sure?\",\n        section_description: \"Description\",\n        section_time: \"Time period\",\n        full_day: \"Full day\",\n        confirm_recurring: \"Do you want to edit the whole set of repeated events?\",\n        section_recurring: \"Repeat event\",\n        button_recurring: \"Disabled\",\n        button_recurring_open: \"Enabled\",\n        button_edit_series: \"Edit series\",\n        button_edit_occurrence: \"Edit occurrence\",\n        agenda_tab: \"Agenda\",\n        date: \"Date\",\n        description: \"Description\",\n        year_tab: \"Year\",\n        week_agenda_tab: \"Agenda\",\n        grid_tab: \"Grid\",\n        drag_to_create: \"Drag to create\",\n        drag_to_move: \"Drag to move\",\n        message_ok: \"OK\",\n        message_cancel: \"Cancel\",\n        next: \"Next\",\n        prev: \"Previous\",\n        year: \"Year\",\n        month: \"Month\",\n        day: \"Day\",\n        hour: \"Hour\",\n        minute: \"Minute\",\n        repeat_radio_day: \"Daily\",\n        repeat_radio_week: \"Weekly\",\n        repeat_radio_month: \"Monthly\",\n        repeat_radio_year: \"Yearly\",\n        repeat_radio_day_type: \"Every\",\n        repeat_text_day_count: \"day\",\n        repeat_radio_day_type2: \"Every workday\",\n        repeat_week: \" Repeat every\",\n        repeat_text_week_count: \"week next days:\",\n        repeat_radio_month_type: \"Repeat\",\n        repeat_radio_month_start: \"On\",\n        repeat_text_month_day: \"day every\",\n        repeat_text_month_count: \"month\",\n        repeat_text_month_count2_before: \"every\",\n        repeat_text_month_count2_after: \"month\",\n        repeat_year_label: \"On\",\n        select_year_day2: \"of\",\n        repeat_text_year_day: \"day\",\n        select_year_month: \"month\",\n        repeat_radio_end: \"No end date\",\n        repeat_text_occurences_count: \"occurrences\",\n        repeat_radio_end2: \"After\",\n        repeat_radio_end3: \"End by\",\n        month_for_recurring: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n        day_for_recurring: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n      }\n    }, g.config = {\n      default_date: \"%j %M %Y\",\n      month_date: \"%F %Y\",\n      load_date: \"%Y-%m-%d\",\n      week_date: \"%l\",\n      day_date: \"%D, %F %j\",\n      hour_date: \"%H:%i\",\n      month_day: \"%d\",\n      date_format: \"%Y-%m-%d %H:%i\",\n      api_date: \"%d-%m-%Y %H:%i\",\n      parse_exact_format: !1,\n      preserve_length: !0,\n      time_step: 5,\n      start_on_monday: !0,\n      first_hour: 0,\n      last_hour: 24,\n      readonly: !1,\n      drag_resize: !0,\n      drag_move: !0,\n      drag_create: !0,\n      drag_event_body: !0,\n      dblclick_create: !0,\n      edit_on_create: !0,\n      details_on_create: !1,\n      header: null,\n      resize_month_events: !1,\n      resize_month_timed: !1,\n      responsive_lightbox: !1,\n      rtl: !1,\n      cascade_event_display: !1,\n      cascade_event_count: 4,\n      cascade_event_margin: 30,\n      multi_day: !0,\n      multi_day_height_limit: 0,\n      drag_lightbox: !0,\n      preserve_scroll: !0,\n      select: !0,\n      server_utc: !1,\n      touch: !0,\n      touch_tip: !0,\n      touch_drag: 500,\n      touch_swipe_dates: !1,\n      quick_info_detached: !0,\n      positive_closing: !1,\n      drag_highlight: !0,\n      limit_drag_out: !1,\n      icons_edit: [\"icon_save\", \"icon_cancel\"],\n      icons_select: [\"icon_details\", \"icon_edit\", \"icon_delete\"],\n      buttons_left: [\"dhx_save_btn\", \"dhx_cancel_btn\"],\n      buttons_right: [\"dhx_delete_btn\"],\n      lightbox: {\n        sections: [{\n          name: \"description\",\n          map_to: \"text\",\n          type: \"textarea\",\n          focus: !0\n        }, {\n          name: \"time\",\n          height: 72,\n          type: \"time\",\n          map_to: \"auto\"\n        }]\n      },\n      highlight_displayed_event: !0,\n      left_border: !1,\n      ajax_error: \"alert\",\n      delay_render: 0,\n      timeline_swap_resize: !0,\n      wai_aria_attributes: !0,\n      wai_aria_application_role: !0\n    }, g.config.buttons_left.$inital = g.config.buttons_left.join(), g.config.buttons_right.$inital = g.config.buttons_right.join(), g._helpers = {\n      parseDate: function parseDate(t) {\n        return (g.templates.xml_date || g.templates.parse_date)(t);\n      },\n      formatDate: function formatDate(t) {\n        return (g.templates.xml_format || g.templates.format_date)(t);\n      }\n    }, g.templates = {}, g.init_templates = function () {\n      var t = g.locale.labels;\n      t.dhx_save_btn = t.icon_save, t.dhx_cancel_btn = t.icon_cancel, t.dhx_delete_btn = t.icon_delete;\n      var e = g.date.date_to_str,\n          i = g.config;\n      (function (t, e) {\n        for (var i in e) {\n          t[i] || (t[i] = e[i]);\n        }\n      })(g.templates, {\n        day_date: e(i.default_date),\n        month_date: e(i.month_date),\n        week_date: function week_date(t, e) {\n          return i.rtl ? g.templates.day_date(g.date.add(e, -1, \"day\")) + \" &ndash; \" + g.templates.day_date(t) : g.templates.day_date(t) + \" &ndash; \" + g.templates.day_date(g.date.add(e, -1, \"day\"));\n        },\n        day_scale_date: e(i.default_date),\n        month_scale_date: e(i.week_date),\n        week_scale_date: e(i.day_date),\n        hour_scale: e(i.hour_date),\n        time_picker: e(i.hour_date),\n        event_date: e(i.hour_date),\n        month_day: e(i.month_day),\n        load_format: e(i.load_date),\n        format_date: e(i.date_format, i.server_utc),\n        parse_date: g.date.str_to_date(i.date_format, i.server_utc),\n        api_date: g.date.str_to_date(i.api_date, !1, !1),\n        event_header: function event_header(t, e, i) {\n          return g.templates.event_date(t) + \" - \" + g.templates.event_date(e);\n        },\n        event_text: function event_text(t, e, i) {\n          return i.text;\n        },\n        event_class: function event_class(t, e, i) {\n          return \"\";\n        },\n        month_date_class: function month_date_class(t) {\n          return \"\";\n        },\n        week_date_class: function week_date_class(t) {\n          return \"\";\n        },\n        event_bar_date: function event_bar_date(t, e, i) {\n          return g.templates.event_date(t) + \" \";\n        },\n        event_bar_text: function event_bar_text(t, e, i) {\n          return i.text;\n        },\n        month_events_link: function month_events_link(t, e) {\n          return \"<a>View more(\" + e + \" events)</a>\";\n        },\n        drag_marker_class: function drag_marker_class(t, e, i) {\n          return \"\";\n        },\n        drag_marker_content: function drag_marker_content(t, e, i) {\n          return \"\";\n        },\n        tooltip_date_format: g.date.date_to_str(\"%Y-%m-%d %H:%i\"),\n        tooltip_text: function tooltip_text(t, e, i) {\n          return \"<b>Event:</b> \" + i.text + \"<br/><b>Start date:</b> \" + g.templates.tooltip_date_format(t) + \"<br/><b>End date:</b> \" + g.templates.tooltip_date_format(e);\n        }\n      }), this.callEvent(\"onTemplatesReady\", []);\n    }, g.uid = function () {\n      return this._seed || (this._seed = new Date().valueOf()), this._seed++;\n    }, g._events = {}, g.clearAll = function () {\n      this._events = {}, this._loaded = {}, this._edit_id = null, this._select_id = null, this._drag_id = null, this._drag_mode = null, this._drag_pos = null, this._new_event = null, this.clear_view(), this.callEvent(\"onClearAll\", []);\n    }, g.addEvent = function (t, e, i, n, a) {\n      if (!arguments.length) return this.addEventNow();\n      var r = t;\n      1 != arguments.length && (r = a || {}, r.start_date = t, r.end_date = e, r.text = i, r.id = n), r.id = r.id || g.uid(), r.text = r.text || \"\", \"string\" == typeof r.start_date && (r.start_date = this.templates.api_date(r.start_date)), \"string\" == typeof r.end_date && (r.end_date = this.templates.api_date(r.end_date));\n      var s = 6e4 * (this.config.event_duration || this.config.time_step);\n      r.start_date.valueOf() == r.end_date.valueOf() && r.end_date.setTime(r.end_date.valueOf() + s), r._timed = this.isOneDayEvent(r);\n      var o = !this._events[r.id];\n      return this._events[r.id] = r, this.event_updated(r), this._loading || this.callEvent(o ? \"onEventAdded\" : \"onEventChanged\", [r.id, r]), r.id;\n    }, g.deleteEvent = function (t, e) {\n      var i = this._events[t];\n      (e || this.callEvent(\"onBeforeEventDelete\", [t, i]) && this.callEvent(\"onConfirmedBeforeEventDelete\", [t, i])) && (i && (this._select_id = null, delete this._events[t], this.event_updated(i), this._drag_id == i.id && (this._drag_id = null, this._drag_mode = null, this._drag_pos = null)), this.callEvent(\"onEventDeleted\", [t, i]));\n    }, g.getEvent = function (t) {\n      return this._events[t];\n    }, g.setEvent = function (t, e) {\n      e.id || (e.id = t), this._events[t] = e;\n    }, g.for_rendered = function (t, e) {\n      for (var i = this._rendered.length - 1; i >= 0; i--) {\n        this._rendered[i].getAttribute(\"event_id\") == t && e(this._rendered[i], i);\n      }\n    }, g.changeEventId = function (t, e) {\n      if (t != e) {\n        var i = this._events[t];\n        i && (i.id = e, this._events[e] = i, delete this._events[t]), this.for_rendered(t, function (t) {\n          t.setAttribute(\"event_id\", e);\n        }), this._select_id == t && (this._select_id = e), this._edit_id == t && (this._edit_id = e), this.callEvent(\"onEventIdChange\", [t, e]);\n      }\n    }, function () {\n      for (var t = [\"text\", \"Text\", \"start_date\", \"StartDate\", \"end_date\", \"EndDate\"], e = function e(t) {\n        return function (e) {\n          return g.getEvent(e)[t];\n        };\n      }, i = function i(t) {\n        return function (e, i) {\n          var n = g.getEvent(e);\n          n[t] = i, n._changed = !0, n._timed = this.isOneDayEvent(n), g.event_updated(n, !0);\n        };\n      }, n = 0; n < t.length; n += 2) {\n        g[\"getEvent\" + t[n + 1]] = e(t[n]), g[\"setEvent\" + t[n + 1]] = i(t[n]);\n      }\n    }(), g.event_updated = function (t, e) {\n      this.is_visible_events(t) ? this.render_view_data() : this.clear_event(t.id);\n    }, g.is_visible_events = function (t) {\n      if (!this._min_date || !this._max_date) return !1;\n\n      if (t.start_date.valueOf() < this._max_date.valueOf() && this._min_date.valueOf() < t.end_date.valueOf()) {\n        var e = t.start_date.getHours(),\n            i = t.end_date.getHours() + t.end_date.getMinutes() / 60,\n            n = this.config.last_hour,\n            a = this.config.first_hour;\n        return !(!this._table_view && (i > n || i < a) && (e >= n || e < a)) || !!((t.end_date.valueOf() - t.start_date.valueOf()) / 36e5 > 24 - (this.config.last_hour - this.config.first_hour) || e < n && i >= a);\n      }\n\n      return !1;\n    }, g.isOneDayEvent = function (t) {\n      var e = new Date(t.end_date.valueOf() - 1);\n      return t.start_date.getFullYear() === e.getFullYear() && t.start_date.getMonth() === e.getMonth() && t.start_date.getDate() === e.getDate() && t.end_date.valueOf() - t.start_date.valueOf() < 864e5;\n    }, g.get_visible_events = function (t) {\n      var e = [];\n\n      for (var i in this._events) {\n        this.is_visible_events(this._events[i]) && (t && !this._events[i]._timed || this.filter_event(i, this._events[i]) && e.push(this._events[i]));\n      }\n\n      return e;\n    }, g.filter_event = function (t, e) {\n      var i = this[\"filter_\" + this._mode];\n      return !i || i(t, e);\n    }, g._is_main_area_event = function (t) {\n      return !!t._timed;\n    }, g.render_view_data = function (t, e) {\n      var i = !1;\n\n      if (!t) {\n        if (i = !0, this._not_render) return void (this._render_wait = !0);\n        this._render_wait = !1, this.clear_view(), t = this.get_visible_events(!(this._table_view || this.config.multi_day));\n      }\n\n      for (var n = 0, a = t.length; n < a; n++) {\n        this._recalculate_timed(t[n]);\n      }\n\n      if (this.config.multi_day && !this._table_view) {\n        for (var r = [], s = [], n = 0; n < t.length; n++) {\n          this._is_main_area_event(t[n]) ? r.push(t[n]) : s.push(t[n]);\n        }\n\n        if (!this._els.dhx_multi_day) {\n          var o = g._commonErrorMessages.unknownView(this._mode);\n\n          throw new Error(o);\n        }\n\n        this._rendered_location = this._els.dhx_multi_day[0], this._table_view = !0, this.render_data(s, e), this._table_view = !1, this._rendered_location = this._els.dhx_cal_data[0], this._table_view = !1, this.render_data(r, e);\n      } else {\n        var d = document.createDocumentFragment(),\n            l = this._els.dhx_cal_data[0];\n        this._rendered_location = d, this.render_data(t, e), l.appendChild(d), this._rendered_location = l;\n      }\n\n      i && this.callEvent(\"onDataRender\", []);\n    }, g._view_month_day = function (t) {\n      var e = g.getActionData(t).date;\n      g.callEvent(\"onViewMoreClick\", [e]) && g.setCurrentView(e, \"day\");\n    }, g._render_month_link = function (t) {\n      for (var e = this._rendered_location, i = this._lame_clone(t), n = t._sday; n < t._eday; n++) {\n        i._sday = n, i._eday = n + 1;\n        var a = g.date,\n            r = g._min_date;\n        r = a.add(r, i._sweek, \"week\"), r = a.add(r, i._sday, \"day\");\n\n        var s = g.getEvents(r, a.add(r, 1, \"day\")).length,\n            o = this._get_event_bar_pos(i),\n            d = o.x2 - o.x,\n            l = document.createElement(\"div\");\n\n        l.onclick = function (t) {\n          g._view_month_day(t || event);\n        }, l.className = \"dhx_month_link\", l.style.top = o.y + \"px\", l.style.left = o.x + \"px\", l.style.width = d + \"px\", l.innerHTML = g.templates.month_events_link(r, s), this._rendered.push(l), e.appendChild(l);\n      }\n    }, g._recalculate_timed = function (t) {\n      if (t) {\n        var e;\n        e = \"object\" != typeof t ? this._events[t] : t, e && (e._timed = g.isOneDayEvent(e));\n      }\n    }, g.attachEvent(\"onEventChanged\", g._recalculate_timed), g.attachEvent(\"onEventAdded\", g._recalculate_timed), g.render_data = function (t, e) {\n      t = this._pre_render_events(t, e);\n\n      for (var i = {}, n = 0; n < t.length; n++) {\n        if (this._table_view) {\n          if (\"month\" != g._mode) this.render_event_bar(t[n]);else {\n            var a = g.config.max_month_events;\n            a !== 1 * a || t[n]._sorder < a ? this.render_event_bar(t[n]) : void 0 !== a && t[n]._sorder == a && g._render_month_link(t[n]);\n          }\n        } else {\n          var r = t[n],\n              s = g.locate_holder(r._sday);\n          if (!s) continue;\n          i[r._sday] || (i[r._sday] = {\n            real: s,\n            buffer: document.createDocumentFragment(),\n            width: s.clientWidth\n          });\n          var o = i[r._sday];\n          this.render_event(r, o.buffer, o.width);\n        }\n      }\n\n      for (var n in i) {\n        var o = i[n];\n        o.real && o.buffer && o.real.appendChild(o.buffer);\n      }\n    }, g._get_first_visible_cell = function (t) {\n      for (var e = 0; e < t.length; e++) {\n        if (-1 == (t[e].className || \"\").indexOf(\"dhx_scale_ignore\")) return t[e];\n      }\n\n      return t[0];\n    }, g._pre_render_events = function (t, e) {\n      var i = this.xy.bar_height,\n          n = this._colsS.heights,\n          a = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0],\n          r = this._els.dhx_cal_data[0];\n      if (t = this._table_view ? this._pre_render_events_table(t, e) : this._pre_render_events_line(t, e), this._table_view) if (e) this._colsS.heights = n;else {\n        var s = r.firstChild;\n\n        if (s.rows) {\n          for (var o = 0; o < s.rows.length; o++) {\n            a[o]++;\n            var d = s.rows[o].cells,\n                l = this._colsS.height - this.xy.month_head_height;\n\n            if (a[o] * i > l) {\n              var _ = l;\n              1 * this.config.max_month_events !== this.config.max_month_events || a[o] <= this.config.max_month_events ? _ = a[o] * i : (this.config.max_month_events + 1) * i > l && (_ = (this.config.max_month_events + 1) * i);\n\n              for (var h = 0; h < d.length; h++) {\n                d[h].childNodes[1].style.height = _ + \"px\";\n              }\n            }\n\n            a[o] = (a[o - 1] || 0) + g._get_first_visible_cell(d).offsetHeight;\n          }\n\n          if (a.unshift(0), s.parentNode.offsetHeight < s.parentNode.scrollHeight && !g._colsS.scroll_fix && g.xy.scroll_width) {\n            var c = g._colsS,\n                u = c[c.col_length],\n                f = c.heights.slice();\n            u -= g.xy.scroll_width || 0, this._calc_scale_sizes(u, this._min_date, this._max_date), g._colsS.heights = f, this.set_xy(this._els.dhx_cal_header[0], u, this.xy.scale_height), g._render_scales(this._els.dhx_cal_header[0]), g._render_month_scale(this._els.dhx_cal_data[0], this._get_timeunit_start(), this._min_date), c.scroll_fix = !0;\n          }\n        } else if (t.length || \"visible\" != this._els.dhx_multi_day[0].style.visibility || (a[0] = -1), t.length || -1 == a[0]) {\n          var v = (s.parentNode.childNodes, (a[0] + 1) * i + 1),\n              m = v,\n              p = v + \"px\";\n          this.config.multi_day_height_limit && (m = Math.min(v, this.config.multi_day_height_limit), p = m + \"px\"), r.style.top = this._els.dhx_cal_navline[0].offsetHeight + this._els.dhx_cal_header[0].offsetHeight + m + \"px\", r.style.height = this._obj.offsetHeight - parseInt(r.style.top, 10) - (this.xy.margin_top || 0) + \"px\";\n          var x = this._els.dhx_multi_day[0];\n          x.style.height = p, x.style.visibility = -1 == a[0] ? \"hidden\" : \"visible\";\n          var b = this._els.dhx_multi_day[1];\n          b.style.height = p, b.style.visibility = -1 == a[0] ? \"hidden\" : \"visible\", b.className = a[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\", this._dy_shift = (a[0] + 1) * i, this.config.multi_day_height_limit && (this._dy_shift = Math.min(this.config.multi_day_height_limit, this._dy_shift)), a[0] = 0, m != v && (r.style.top = parseInt(r.style.top) + 2 + \"px\", x.style.overflowY = \"auto\", b.style.position = \"fixed\", b.style.top = \"\", b.style.left = \"\");\n        }\n      }\n      return t;\n    }, g._get_event_sday = function (t) {\n      var e = this.date.day_start(new Date(t.start_date));\n      return Math.round((e.valueOf() - this._min_date.valueOf()) / 864e5);\n    }, g._get_event_mapped_end_date = function (t) {\n      var e = t.end_date;\n\n      if (this.config.separate_short_events) {\n        var i = (t.end_date - t.start_date) / 6e4;\n        i < this._min_mapped_duration && (e = this.date.add(e, this._min_mapped_duration - i, \"minute\"));\n      }\n\n      return e;\n    }, g._pre_render_events_line = function (t, e) {\n      t.sort(function (t, e) {\n        return t.start_date.valueOf() == e.start_date.valueOf() ? t.id > e.id ? 1 : -1 : t.start_date > e.start_date ? 1 : -1;\n      });\n      var i = [],\n          n = [];\n      this._min_mapped_duration = Math.ceil(60 * this.xy.min_event_height / this.config.hour_size_px);\n\n      for (var a = 0; a < t.length; a++) {\n        var r = t[a],\n            s = r.start_date,\n            o = r.end_date,\n            d = s.getHours(),\n            l = o.getHours();\n        if (r._sday = this._get_event_sday(r), this._ignores[r._sday]) t.splice(a, 1), a--;else {\n          if (i[r._sday] || (i[r._sday] = []), !e) {\n            r._inner = !1;\n\n            for (var _ = i[r._sday]; _.length;) {\n              var h = _[_.length - 1],\n                  c = this._get_event_mapped_end_date(h);\n\n              if (!(c.valueOf() <= r.start_date.valueOf())) break;\n\n              _.splice(_.length - 1, 1);\n            }\n\n            for (var u = _.length, f = !1, g = 0; g < _.length; g++) {\n              var h = _[g],\n                  c = this._get_event_mapped_end_date(h);\n\n              if (c.valueOf() <= r.start_date.valueOf()) {\n                f = !0, r._sorder = h._sorder, u = g, r._inner = !0;\n                break;\n              }\n            }\n\n            if (_.length && (_[_.length - 1]._inner = !0), !f) if (_.length) {\n              if (_.length <= _[_.length - 1]._sorder) {\n                if (_[_.length - 1]._sorder) for (g = 0; g < _.length; g++) {\n                  for (var v = !1, m = 0; m < _.length; m++) {\n                    if (_[m]._sorder == g) {\n                      v = !0;\n                      break;\n                    }\n                  }\n\n                  if (!v) {\n                    r._sorder = g;\n                    break;\n                  }\n                } else r._sorder = 0;\n                r._inner = !0;\n              } else {\n                var p = _[0]._sorder;\n\n                for (g = 1; g < _.length; g++) {\n                  _[g]._sorder > p && (p = _[g]._sorder);\n                }\n\n                r._sorder = p + 1, r._inner = !1;\n              }\n            } else r._sorder = 0;\n            _.splice(u, u == _.length ? 0 : 1, r), _.length > (_.max_count || 0) ? (_.max_count = _.length, r._count = _.length) : r._count = r._count ? r._count : 1;\n          }\n\n          (d < this.config.first_hour || l >= this.config.last_hour) && (n.push(r), t[a] = r = this._copy_event(r), d < this.config.first_hour && (r.start_date.setHours(this.config.first_hour), r.start_date.setMinutes(0)), l >= this.config.last_hour && (r.end_date.setMinutes(0), r.end_date.setHours(this.config.last_hour)), r.start_date > r.end_date || d == this.config.last_hour) && (t.splice(a, 1), a--);\n        }\n      }\n\n      if (!e) {\n        for (var a = 0; a < t.length; a++) {\n          t[a]._count = i[t[a]._sday].max_count;\n        }\n\n        for (var a = 0; a < n.length; a++) {\n          n[a]._count = i[n[a]._sday].max_count;\n        }\n      }\n\n      return t;\n    }, g._time_order = function (t) {\n      t.sort(function (t, e) {\n        return t.start_date.valueOf() == e.start_date.valueOf() ? t._timed && !e._timed ? 1 : !t._timed && e._timed ? -1 : t.id > e.id ? 1 : -1 : t.start_date > e.start_date ? 1 : -1;\n      });\n    }, g._is_any_multiday_cell_visible = function (t, e, i) {\n      var n = this._cols.length,\n          a = !1,\n          r = t,\n          s = !0,\n          o = new Date(e);\n\n      for (g.date.day_start(new Date(e)).valueOf() != e.valueOf() && (o = g.date.day_start(o), o = g.date.add(o, 1, \"day\")); r < o;) {\n        s = !1;\n        var d = this.locate_holder_day(r, !1, i),\n            l = d % n;\n\n        if (!this._ignores[l]) {\n          a = !0;\n          break;\n        }\n\n        r = g.date.add(r, 1, \"day\");\n      }\n\n      return s || a;\n    }, g._pre_render_events_table = function (t, e) {\n      this._time_order(t);\n\n      for (var i, n = [], a = [[], [], [], [], [], [], []], r = this._colsS.heights, s = this._cols.length, o = {}, d = 0; d < t.length; d++) {\n        var l = t[d],\n            _ = l.id;\n        o[_] || (o[_] = {\n          first_chunk: !0,\n          last_chunk: !0\n        });\n        var h = o[_],\n            c = i || l.start_date,\n            u = l.end_date;\n        c < this._min_date && (h.first_chunk = !1, c = this._min_date), u > this._max_date && (h.last_chunk = !1, u = this._max_date);\n        var f = this.locate_holder_day(c, !1, l);\n\n        if (l._sday = f % s, !this._ignores[l._sday] || !l._timed) {\n          var v = this.locate_holder_day(u, !0, l) || s;\n          l._eday = v % s || s, l._length = v - f, l._sweek = Math.floor((this._correct_shift(c.valueOf(), 1) - this._min_date.valueOf()) / (864e5 * s));\n\n          if (g._is_any_multiday_cell_visible(c, u, l)) {\n            var m,\n                p = a[l._sweek];\n\n            for (m = 0; m < p.length && !(p[m]._eday <= l._sday); m++) {\n              ;\n            }\n\n            if (l._sorder && e || (l._sorder = m), l._sday + l._length <= s) i = null, n.push(l), p[m] = l, r[l._sweek] = p.length - 1, l._first_chunk = h.first_chunk, l._last_chunk = h.last_chunk;else {\n              var x = this._copy_event(l);\n\n              x.id = l.id, x._length = s - l._sday, x._eday = s, x._sday = l._sday, x._sweek = l._sweek, x._sorder = l._sorder, x.end_date = this.date.add(c, x._length, \"day\"), x._first_chunk = h.first_chunk, h.first_chunk && (h.first_chunk = !1), n.push(x), p[m] = x, i = x.end_date, r[l._sweek] = p.length - 1, d--;\n            }\n          }\n        }\n      }\n\n      return n;\n    }, g._copy_dummy = function () {\n      var t = new Date(this.start_date),\n          e = new Date(this.end_date);\n      this.start_date = t, this.end_date = e;\n    }, g._copy_event = function (t) {\n      return this._copy_dummy.prototype = t, new this._copy_dummy();\n    }, g._rendered = [], g.clear_view = function () {\n      for (var t = 0; t < this._rendered.length; t++) {\n        var e = this._rendered[t];\n        e.parentNode && e.parentNode.removeChild(e);\n      }\n\n      this._rendered = [];\n    }, g.updateEvent = function (t) {\n      var e = this.getEvent(t);\n      this.clear_event(t), e && this.is_visible_events(e) && this.filter_event(t, e) && (this._table_view || this.config.multi_day || e._timed) && (this.config.update_render ? this.render_view_data() : \"month\" != this.getState().mode || this.getState().drag_id || this.isOneDayEvent(e) ? this.render_view_data([e], !0) : this.render_view_data());\n    }, g.clear_event = function (t) {\n      this.for_rendered(t, function (t, e) {\n        t.parentNode && t.parentNode.removeChild(t), g._rendered.splice(e, 1);\n      });\n    }, g._y_from_date = function (t) {\n      var e = 60 * t.getHours() + t.getMinutes();\n      return Math.round((60 * e * 1e3 - 60 * this.config.first_hour * 60 * 1e3) * this.config.hour_size_px / 36e5) % (24 * this.config.hour_size_px);\n    }, g._calc_event_y = function (t, e) {\n      e = e || 0;\n      var i = 60 * t.start_date.getHours() + t.start_date.getMinutes(),\n          n = 60 * t.end_date.getHours() + t.end_date.getMinutes() || 60 * g.config.last_hour;\n      return {\n        top: this._y_from_date(t.start_date),\n        height: Math.max(e, (n - i) * this.config.hour_size_px / 60)\n      };\n    }, g.render_event = function (t, e, i) {\n      var n = g.xy.menu_width,\n          a = this.config.use_select_menu_space ? 0 : n;\n\n      if (!(t._sday < 0)) {\n        var r = g.locate_holder(t._sday);\n\n        if (r) {\n          e = e || r;\n\n          var s = this._calc_event_y(t, g.xy.min_event_height),\n              o = s.top,\n              d = s.height,\n              l = t._count || 1,\n              _ = t._sorder || 0;\n\n          i = i || r.clientWidth;\n          var h = Math.floor((i - a) / l),\n              c = _ * h + 1;\n\n          if (t._inner || (h *= l - _), this.config.cascade_event_display) {\n            var u = this.config.cascade_event_count,\n                f = this.config.cascade_event_margin;\n            c = _ % u * f;\n            var v = t._inner ? (l - _ - 1) % u * f / 2 : 0;\n            h = Math.floor(i - a - c - v);\n          }\n\n          var m = this._render_v_bar(t, a + c, o, h, d, t._text_style, g.templates.event_header(t.start_date, t.end_date, t), g.templates.event_text(t.start_date, t.end_date, t));\n\n          this._waiAria.eventAttr(t, m), this._rendered.push(m), e.appendChild(m);\n\n          if (c = c + parseInt(this.config.rtl ? r.style.right : r.style.left, 10) + a, this._edit_id == t.id) {\n            m.style.zIndex = 1, h = Math.max(h - 4, g.xy.editor_width), m = document.createElement(\"div\"), m.setAttribute(\"event_id\", t.id), this._waiAria.eventAttr(t, m), m.className = \"dhx_cal_event dhx_cal_editor\", this.config.rtl && c++, this.set_xy(m, h, d - 20, c, o + (g.xy.event_header_height || 14)), t.color && (m.style.backgroundColor = t.color);\n            var p = g.templates.event_class(t.start_date, t.end_date, t);\n            p && (m.className += \" \" + p);\n            var x = document.createElement(\"div\");\n            this.set_xy(x, h - 6, d - 26), x.style.cssText += \";margin:2px 2px 2px 2px;overflow:hidden;\", m.appendChild(x), this._els.dhx_cal_data[0].appendChild(m), this._rendered.push(m), x.innerHTML = \"<textarea class='dhx_cal_editor'>\" + t.text + \"</textarea>\", this._editor = x.querySelector(\"textarea\"), this._quirks7 && (this._editor.style.height = d - 12 + \"px\"), this._editor.onkeydown = function (t) {\n              if ((t || event).shiftKey) return !0;\n              var e = (t || event).keyCode;\n              e == g.keys.edit_save && g.editStop(!0), e == g.keys.edit_cancel && g.editStop(!1), e != g.keys.edit_save && e != g.keys.edit_cancel || t.preventDefault && t.preventDefault();\n            }, this._editor.onselectstart = function (t) {\n              return (t || event).cancelBubble = !0, !0;\n            }, g._focus(this._editor, !0), this._els.dhx_cal_data[0].scrollLeft = 0;\n          }\n\n          if (0 !== this.xy.menu_width && this._select_id == t.id) {\n            this.config.cascade_event_display && this._drag_mode && (m.style.zIndex = 1);\n\n            for (var b, y = this.config[\"icons_\" + (this._edit_id == t.id ? \"edit\" : \"select\")], w = \"\", D = t.color ? \"background-color: \" + t.color + \";\" : \"\", E = t.textColor ? \"color: \" + t.textColor + \";\" : \"\", A = 0; A < y.length; A++) {\n              b = this._waiAria.eventMenuAttrString(y[A]), w += \"<div class='dhx_menu_icon \" + y[A] + \"' style='\" + D + E + \"' title='\" + this.locale.labels[y[A]] + \"'\" + b + \"></div>\";\n            }\n\n            var S = this._render_v_bar(t, c - n + 1, o, n, 20 * y.length + 26 - 2, \"\", \"<div style='\" + D + E + \"' class='dhx_menu_head'></div>\", w, !0);\n\n            S.style.left = c - n + 1, this._els.dhx_cal_data[0].appendChild(S), this._rendered.push(S);\n          }\n\n          this.config.drag_highlight && this._drag_id == t.id && this.highlightEventPosition(t);\n        }\n      }\n    }, g._render_v_bar = function (t, e, i, n, a, r, s, o, d) {\n      var l = document.createElement(\"div\"),\n          _ = t.id,\n          h = d ? \"dhx_cal_event dhx_cal_select_menu\" : \"dhx_cal_event\",\n          c = g.getState();\n      c.drag_id == t.id && (h += \" dhx_cal_event_drag\"), c.select_id == t.id && (h += \" dhx_cal_event_selected\");\n      var u = g.templates.event_class(t.start_date, t.end_date, t);\n      u && (h = h + \" \" + u), this.config.cascade_event_display && (h += \" dhx_cal_event_cascade\");\n\n      var f = t.color ? \"background-color:\" + t.color + \";\" : \"\",\n          v = t.textColor ? \"color:\" + t.textColor + \";\" : \"\",\n          m = g._border_box_events(),\n          p = n - 2,\n          x = m ? p : n - 4,\n          b = m ? p : n - 6,\n          y = m ? p : n - (this._quirks ? 4 : 14),\n          w = m ? p - 2 : n - 8,\n          D = m ? a - this.xy.event_header_height - 1 : a - (this._quirks ? 20 : 30) + 1,\n          E = '<div event_id=\"' + _ + '\" class=\"' + h + '\" style=\"position:absolute; top:' + i + \"px; \" + (this.config.rtl ? \"right:\" : \"left:\") + e + \"px; width:\" + x + \"px; height:\" + a + \"px;\" + (r || \"\") + '\"></div>';\n\n      l.innerHTML = E;\n      var A = l.cloneNode(!0).firstChild;\n      if (!d && g.renderEvent(A, t, n, a, s, o)) return A;\n      A = l.firstChild;\n      var S = '<div class=\"dhx_event_move dhx_header\" style=\" width:' + b + \"px;\" + f + '\" >&nbsp;</div>';\n      S += '<div class=\"dhx_event_move dhx_title\" style=\"' + f + v + '\">' + s + \"</div>\", S += '<div class=\"dhx_body\" style=\" width:' + y + \"px; height:\" + D + \"px;\" + f + v + '\">' + o + \"</div>\";\n      var k = \"dhx_event_resize dhx_footer\";\n      return (d || !1 === t._drag_resize) && (k = \"dhx_resize_denied \" + k), S += '<div class=\"' + k + '\" style=\" width:' + w + \"px;\" + (d ? \" margin-top:-1px;\" : \"\") + f + v + '\" ></div>', A.innerHTML = S, A;\n    }, g.renderEvent = function () {\n      return !1;\n    }, g.locate_holder = function (t) {\n      return \"day\" == this._mode ? this._els.dhx_cal_data[0].firstChild : this._els.dhx_cal_data[0].childNodes[t];\n    }, g.locate_holder_day = function (t, e) {\n      var i = Math.floor((this._correct_shift(t, 1) - this._min_date) / 864e5);\n      return e && this.date.time_part(t) && i++, i;\n    }, g._get_dnd_order = function (t, e, i) {\n      if (!this._drag_event) return t;\n      this._drag_event._orig_sorder ? t = this._drag_event._orig_sorder : this._drag_event._orig_sorder = t;\n\n      for (var n = e * t; n + e > i;) {\n        t--, n -= e;\n      }\n\n      return t = Math.max(t, 0);\n    }, g._get_event_bar_pos = function (t) {\n      var e = this.config.rtl,\n          i = this._colsS,\n          n = i[t._sday],\n          a = i[t._eday];\n      e && (n = i[i.col_length] - i[t._eday] + i[0], a = i[i.col_length] - i[t._sday] + i[0]), a == n && (a = i[t._eday + 1]);\n      var r = this.xy.bar_height,\n          s = t._sorder;\n\n      if (t.id == this._drag_id) {\n        var o = i.heights[t._sweek + 1] - i.heights[t._sweek] - this.xy.month_head_height;\n        s = g._get_dnd_order(s, r, o);\n      }\n\n      var d = s * r;\n      return {\n        x: n,\n        x2: a,\n        y: i.heights[t._sweek] + (i.height ? this.xy.month_scale_height + 2 : 2) + d\n      };\n    }, g.render_event_bar = function (t) {\n      var e = this._rendered_location,\n          i = this._get_event_bar_pos(t),\n          n = i.y,\n          a = i.x,\n          r = i.x2,\n          s = \"\";\n\n      if (r) {\n        var o = g.config.resize_month_events && \"month\" == this._mode && (!t._timed || g.config.resize_month_timed),\n            d = document.createElement(\"div\"),\n            l = t.hasOwnProperty(\"_first_chunk\") && t._first_chunk,\n            _ = t.hasOwnProperty(\"_last_chunk\") && t._last_chunk,\n            h = o && (t._timed || l),\n            c = o && (t._timed || _),\n            u = !0,\n            f = \"dhx_cal_event_clear\";\n\n        t._timed && !o || (u = !1, f = \"dhx_cal_event_line\"), l && (f += \" dhx_cal_event_line_start\"), _ && (f += \" dhx_cal_event_line_end\"), h && (s += \"<div class='dhx_event_resize dhx_event_resize_start'></div>\"), c && (s += \"<div class='dhx_event_resize dhx_event_resize_end'></div>\");\n        var v = g.templates.event_class(t.start_date, t.end_date, t);\n        v && (f += \" \" + v);\n        var m = t.color ? \"background:\" + t.color + \";\" : \"\",\n            p = t.textColor ? \"color:\" + t.textColor + \";\" : \"\",\n            x = [\"position:absolute\", \"top:\" + n + \"px\", \"left:\" + a + \"px\", \"width:\" + (r - a - 3 - (u ? 1 : 0)) + \"px\", p, m, t._text_style || \"\"].join(\";\"),\n            b = \"<div event_id='\" + t.id + \"' class='\" + f + \"' style='\" + x + \"'\" + this._waiAria.eventBarAttrString(t) + \">\";\n        o && (b += s), \"month\" == g.getState().mode && (t = g.getEvent(t.id)), t._timed && (b += g.templates.event_bar_date(t.start_date, t.end_date, t)), b += g.templates.event_bar_text(t.start_date, t.end_date, t) + \"</div>\", b += \"</div>\", d.innerHTML = b, this._rendered.push(d.firstChild), e.appendChild(d.firstChild);\n      }\n    }, g._locate_event = function (t) {\n      for (var e = null; t && !e && t.getAttribute;) {\n        e = t.getAttribute(\"event_id\"), t = t.parentNode;\n      }\n\n      return e;\n    }, g._locate_css = function (t, e, i) {\n      void 0 === i && (i = !0);\n\n      for (var n = t.target || t.srcElement, a = \"\"; n;) {\n        if (a = g._getClassName(n)) {\n          var r = a.indexOf(e);\n\n          if (r >= 0) {\n            if (!i) return n;\n            var s = 0 === r || !g._trim(a.charAt(r - 1)),\n                o = r + e.length >= a.length || !g._trim(a.charAt(r + e.length));\n            if (s && o) return n;\n          }\n        }\n\n        n = n.parentNode;\n      }\n\n      return null;\n    }, g.edit = function (t) {\n      this._edit_id != t && (this.editStop(!1, t), this._edit_id = t, this.updateEvent(t));\n    }, g.editStop = function (t, e) {\n      if (!e || this._edit_id != e) {\n        var i = this.getEvent(this._edit_id);\n        i && (t && (i.text = this._editor.value), this._edit_id = null, this._editor = null, this.updateEvent(i.id), this._edit_stop_event(i, t));\n      }\n    }, g._edit_stop_event = function (t, e) {\n      this._new_event ? (e ? this.callEvent(\"onEventAdded\", [t.id, t]) : t && this.deleteEvent(t.id, !0), this._new_event = null) : e && this.callEvent(\"onEventChanged\", [t.id, t]);\n    }, g.getEvents = function (t, e) {\n      var i = [];\n\n      for (var n in this._events) {\n        var a = this._events[n];\n        a && (!t && !e || a.start_date < e && a.end_date > t) && i.push(a);\n      }\n\n      return i;\n    }, g.getRenderedEvent = function (t) {\n      if (t) {\n        for (var e = g._rendered, i = 0; i < e.length; i++) {\n          var n = e[i];\n          if (n.getAttribute(\"event_id\") == t) return n;\n        }\n\n        return null;\n      }\n    }, g.showEvent = function (t, e) {\n      function i() {\n        a.color = o, a.textColor = d;\n      }\n\n      var n;\n      t && \"object\" == typeof t && (e = t.mode, n = t.section, t = t.section);\n      var a = \"number\" == typeof t || \"string\" == typeof t ? g.getEvent(t) : t;\n\n      if (e = e || g._mode, a && (!this.checkEvent(\"onBeforeEventDisplay\") || this.callEvent(\"onBeforeEventDisplay\", [a, e]))) {\n        var r = g.config.scroll_hour;\n        g.config.scroll_hour = a.start_date.getHours();\n        var s = g.config.preserve_scroll;\n        g.config.preserve_scroll = !1;\n        var o = a.color,\n            d = a.textColor;\n\n        if (g.config.highlight_displayed_event && (a.color = g.config.displayed_event_color, a.textColor = g.config.displayed_event_text_color), g.setCurrentView(new Date(a.start_date), e), g.config.scroll_hour = r, g.config.preserve_scroll = s, g.matrix && g.matrix[e]) {\n          var l = g.getView(),\n              _ = l.y_property,\n              h = g.getEvent(a.id);\n\n          if (h) {\n            if (!n) {\n              var n = h[_];\n              Array.isArray(n) ? n = n[0] : \"string\" == typeof n && g.config.section_delimiter && n.indexOf(g.config.section_delimiter) > -1 && (n = n.split(g.config.section_delimiter)[0]);\n            }\n\n            var c = l.posFromSection(n),\n                u = l.posFromDate(h.start_date),\n                f = g.$container.querySelector(\".dhx_timeline_data_wrapper\");\n            if (u -= (f.offsetWidth - l.dx) / 2, c = c - f.offsetHeight / 2 + l.dy / 2, l._smartRenderingEnabled()) var v = l.attachEvent(\"onScroll\", function () {\n              i(), l.detachEvent(v);\n            });\n            l.scrollTo({\n              left: u,\n              top: c\n            }), l._smartRenderingEnabled() || i();\n          }\n        } else i();\n\n        g.callEvent(\"onAfterEventDisplay\", [a, e]);\n      }\n    }, g._append_drag_marker = function (t) {\n      if (!t.parentNode) {\n        var e = g._els.dhx_cal_data[0],\n            i = e.lastChild,\n            n = g._getClassName(i);\n\n        n.indexOf(\"dhx_scale_holder\") < 0 && i.previousSibling && (i = i.previousSibling), n = g._getClassName(i), i && 0 === n.indexOf(\"dhx_scale_holder\") && i.appendChild(t);\n      }\n    }, g._update_marker_position = function (t, e) {\n      var i = g._calc_event_y(e, 0);\n\n      t.style.top = i.top + \"px\", t.style.height = i.height + \"px\";\n    }, g.highlightEventPosition = function (t) {\n      var e = document.createElement(\"div\");\n      e.setAttribute(\"event_id\", t.id), this._rendered.push(e), this._update_marker_position(e, t);\n      var i = this.templates.drag_marker_class(t.start_date, t.end_date, t),\n          n = this.templates.drag_marker_content(t.start_date, t.end_date, t);\n      e.className = \"dhx_drag_marker\", i && (e.className += \" \" + i), n && (e.innerHTML = n), this._append_drag_marker(e);\n    }, g._loaded = {}, g._load = function (t, e) {\n      function i(t) {\n        g.on_load(t), g.callEvent(\"onLoadEnd\", []);\n      }\n\n      if (t = t || this._load_url) {\n        t += (-1 == t.indexOf(\"?\") ? \"?\" : \"&\") + \"timeshift=\" + new Date().getTimezoneOffset(), this.config.prevent_cache && (t += \"&uid=\" + this.uid());\n        var n;\n\n        if (e = e || this._date, this._load_mode) {\n          var a = this.templates.load_format;\n\n          for (e = this.date[this._load_mode + \"_start\"](new Date(e.valueOf())); e > this._min_date;) {\n            e = this.date.add(e, -1, this._load_mode);\n          }\n\n          n = e;\n\n          for (var r = !0; n < this._max_date;) {\n            n = this.date.add(n, 1, this._load_mode), this._loaded[a(e)] && r ? e = this.date.add(e, 1, this._load_mode) : r = !1;\n          }\n\n          var s = n;\n\n          do {\n            n = s, s = this.date.add(n, -1, this._load_mode);\n          } while (s > e && this._loaded[a(s)]);\n\n          if (n <= e) return !1;\n\n          for (g.$ajax.get(t + \"&from=\" + a(e) + \"&to=\" + a(n), i); e < n;) {\n            this._loaded[a(e)] = !0, e = this.date.add(e, 1, this._load_mode);\n          }\n        } else g.$ajax.get(t, i);\n\n        return this.callEvent(\"onXLS\", []), this.callEvent(\"onLoadStart\", []), !0;\n      }\n    }, g._parsers = {}, g._parsers.xml = {\n      canParse: function canParse(t, e) {\n        if (e.responseXML && e.responseXML.firstChild) return !0;\n\n        try {\n          var i = g.$ajax.parse(e.responseText),\n              n = g.$ajax.xmltop(\"data\", i);\n          if (n && \"data\" === n.tagName) return !0;\n        } catch (t) {}\n\n        return !1;\n      },\n      parse: function parse(t) {\n        var e;\n        if (t.xmlDoc.responseXML || (t.xmlDoc.responseXML = g.$ajax.parse(t.xmlDoc.responseText)), e = g.$ajax.xmltop(\"data\", t.xmlDoc), \"data\" != e.tagName) return null;\n        var i = e.getAttribute(\"dhx_security\");\n        i && (window.dhtmlx && (dhtmlx.security_key = i), g.security_key = i);\n\n        for (var n = g.$ajax.xpath(\"//coll_options\", t.xmlDoc), a = 0; a < n.length; a++) {\n          var r = n[a].getAttribute(\"for\"),\n              s = g.serverList[r];\n          s || (g.serverList[r] = s = []), s.splice(0, s.length);\n\n          for (var o = g.$ajax.xpath(\".//item\", n[a]), d = 0; d < o.length; d++) {\n            for (var l = o[d], _ = l.attributes, h = {\n              key: o[d].getAttribute(\"value\"),\n              label: o[d].getAttribute(\"label\")\n            }, c = 0; c < _.length; c++) {\n              var u = _[c];\n              \"value\" != u.nodeName && \"label\" != u.nodeName && (h[u.nodeName] = u.nodeValue);\n            }\n\n            s.push(h);\n          }\n        }\n\n        n.length && g.callEvent(\"onOptionsLoad\", []);\n\n        for (var f = g.$ajax.xpath(\"//userdata\", t.xmlDoc), a = 0; a < f.length; a++) {\n          var v = g._xmlNodeToJSON(f[a]);\n\n          g._userdata[v.name] = v.text;\n        }\n\n        var m = [];\n        e = g.$ajax.xpath(\"//event\", t.xmlDoc);\n\n        for (var a = 0; a < e.length; a++) {\n          var p = m[a] = g._xmlNodeToJSON(e[a]);\n\n          g._init_event(p);\n        }\n\n        return m;\n      }\n    }, g.json = g._parsers.json = {\n      canParse: function canParse(t) {\n        if (t && \"object\" == typeof t) return !0;\n        if (\"string\" == typeof t) try {\n          var e = JSON.parse(t);\n          return \"[object Object]\" === Object.prototype.toString.call(e) || \"[object Array]\" === Object.prototype.toString.call(e);\n        } catch (t) {\n          return !1;\n        }\n        return !1;\n      },\n      parse: function parse(t) {\n        var e = [];\n        \"string\" == typeof t && (t = JSON.parse(t)), e = \"[object Array]\" === Object.prototype.toString.call(t) ? t : t ? t.data : [], e = e || [], t.dhx_security && (window.dhtmlx && (dhtmlx.security_key = t.dhx_security), g.security_key = t.dhx_security);\n        var i = t && t.collections ? t.collections : {},\n            n = !1;\n\n        for (var a in i) {\n          if (i.hasOwnProperty(a)) {\n            n = !0;\n            var r = i[a],\n                s = g.serverList[a];\n            s || (g.serverList[a] = s = []), s.splice(0, s.length);\n\n            for (var o = 0; o < r.length; o++) {\n              var d = r[o],\n                  l = {\n                key: d.value,\n                label: d.label\n              };\n\n              for (var _ in d) {\n                if (d.hasOwnProperty(_)) {\n                  if (\"value\" == _ || \"label\" == _) continue;\n                  l[_] = d[_];\n                }\n              }\n\n              s.push(l);\n            }\n          }\n        }\n\n        n && g.callEvent(\"onOptionsLoad\", []);\n\n        for (var h = [], c = 0; c < e.length; c++) {\n          var u = e[c];\n          g._init_event(u), h.push(u);\n        }\n\n        return h;\n      }\n    }, g.ical = g._parsers.ical = {\n      canParse: function canParse(t) {\n        return \"string\" == typeof t && new RegExp(\"^BEGIN:VCALENDAR\").test(t);\n      },\n      parse: function parse(t) {\n        var e = t.match(RegExp(this.c_start + \"[^\\f]*\" + this.c_end, \"\"));\n\n        if (e.length) {\n          e[0] = e[0].replace(/[\\r\\n]+ /g, \"\"), e[0] = e[0].replace(/[\\r\\n]+(?=[a-z \\t])/g, \" \"), e[0] = e[0].replace(/\\;[^:\\r\\n]*:/g, \":\");\n\n          for (var i, n = [], a = RegExp(\"(?:\" + this.e_start + \")([^\\f]*?)(?:\" + this.e_end + \")\", \"g\"); null !== (i = a.exec(e));) {\n            for (var r, s = {}, o = /[^\\r\\n]+[\\r\\n]+/g; null !== (r = o.exec(i[1]));) {\n              this.parse_param(r.toString(), s);\n            }\n\n            s.uid && !s.id && (s.id = s.uid), n.push(s);\n          }\n\n          return n;\n        }\n      },\n      parse_param: function parse_param(t, e) {\n        var i = t.indexOf(\":\");\n\n        if (-1 != i) {\n          var n = t.substr(0, i).toLowerCase(),\n              a = t.substr(i + 1).replace(/\\\\\\,/g, \",\").replace(/[\\r\\n]+$/, \"\");\n          \"summary\" == n ? n = \"text\" : \"dtstart\" == n ? (n = \"start_date\", a = this.parse_date(a, 0, 0)) : \"dtend\" == n && (n = \"end_date\", a = this.parse_date(a, 0, 0)), e[n] = a;\n        }\n      },\n      parse_date: function parse_date(t, e, i) {\n        var n = t.split(\"T\"),\n            a = !1;\n        n[1] && (e = n[1].substr(0, 2), i = n[1].substr(2, 2), a = !(\"Z\" != n[1][6]));\n        var r = n[0].substr(0, 4),\n            s = parseInt(n[0].substr(4, 2), 10) - 1,\n            o = n[0].substr(6, 2);\n        return g.config.server_utc || a ? new Date(Date.UTC(r, s, o, e, i)) : new Date(r, s, o, e, i);\n      },\n      c_start: \"BEGIN:VCALENDAR\",\n      e_start: \"BEGIN:VEVENT\",\n      e_end: \"END:VEVENT\",\n      c_end: \"END:VCALENDAR\"\n    }, g.on_load = function (t) {\n      this.callEvent(\"onBeforeParse\", []);\n      var e,\n          i = !1,\n          n = !1;\n\n      for (var a in this._parsers) {\n        var r = this._parsers[a];\n\n        if (r.canParse(t.xmlDoc.responseText, t.xmlDoc)) {\n          try {\n            var s = t.xmlDoc.responseText;\n            \"xml\" === a && (s = t), e = r.parse(s), e || (i = !0);\n          } catch (t) {\n            i = !0;\n          }\n\n          n = !0;\n          break;\n        }\n      }\n\n      if (!n) if (this._process && this[this._process]) try {\n        e = this[this._process].parse(t.xmlDoc.responseText);\n      } catch (t) {\n        i = !0;\n      } else i = !0;\n      (i || t.xmlDoc.status && t.xmlDoc.status >= 400) && (this.callEvent(\"onLoadError\", [t.xmlDoc]), e = []), this._process_loading(e), this.callEvent(\"onXLE\", []), this.callEvent(\"onParse\", []);\n    }, g._process_loading = function (t) {\n      this._loading = !0, this._not_render = !0;\n\n      for (var e = 0; e < t.length; e++) {\n        this.callEvent(\"onEventLoading\", [t[e]]) && this.addEvent(t[e]);\n      }\n\n      this._not_render = !1, this._render_wait && this.render_view_data(), this._loading = !1, this._after_call && this._after_call(), this._after_call = null;\n    }, g._init_event = function (t) {\n      t.text = t.text || t._tagvalue || \"\", t.start_date = g._init_date(t.start_date), t.end_date = g._init_date(t.end_date);\n    }, g._init_date = function (t) {\n      return t ? \"string\" == typeof t ? g._helpers.parseDate(t) : new Date(t) : null;\n    }, g.json = {}, g.json.parse = function (t) {\n      var e = [];\n      \"string\" == typeof t && (t = JSON.parse(t)), e = \"[object Array]\" === Object.prototype.toString.call(t) ? t : t ? t.data : [], e = e || [], t.dhx_security && (window.dhtmlx && (dhtmlx.security_key = t.dhx_security), g.security_key = t.dhx_security);\n      var i = t && t.collections ? t.collections : {},\n          n = !1;\n\n      for (var a in i) {\n        if (i.hasOwnProperty(a)) {\n          n = !0;\n          var r = i[a],\n              s = g.serverList[a];\n          s || (g.serverList[a] = s = []), s.splice(0, s.length);\n\n          for (var o = 0; o < r.length; o++) {\n            var d = r[o],\n                l = {\n              key: d.value,\n              label: d.label\n            };\n\n            for (var _ in d) {\n              if (d.hasOwnProperty(_)) {\n                if (\"value\" == _ || \"label\" == _) continue;\n                l[_] = d[_];\n              }\n            }\n\n            s.push(l);\n          }\n        }\n      }\n\n      n && g.callEvent(\"onOptionsLoad\", []);\n\n      for (var h = [], c = 0; c < e.length; c++) {\n        var u = e[c];\n        g._init_event(u), h.push(u);\n      }\n\n      return h;\n    }, g.parse = function (t, e) {\n      this._process = e, this.on_load({\n        xmlDoc: {\n          responseText: t\n        }\n      });\n    }, g.load = function (t, e) {\n      \"string\" == typeof e && (this._process = e, e = arguments[2]), this._load_url = t, this._after_call = e, this._load(t, this._date);\n    }, g.setLoadMode = function (t) {\n      \"all\" == t && (t = \"\"), this._load_mode = t;\n    }, g.serverList = function (t, e) {\n      return e ? (this.serverList[t] = e.slice(0), this.serverList[t]) : (this.serverList[t] = this.serverList[t] || [], this.serverList[t]);\n    }, g._userdata = {}, g._xmlNodeToJSON = function (t) {\n      for (var e = {}, i = 0; i < t.attributes.length; i++) {\n        e[t.attributes[i].name] = t.attributes[i].value;\n      }\n\n      for (var i = 0; i < t.childNodes.length; i++) {\n        var n = t.childNodes[i];\n        1 == n.nodeType && (e[n.tagName] = n.firstChild ? n.firstChild.nodeValue : \"\");\n      }\n\n      return e.text || (e.text = t.firstChild ? t.firstChild.nodeValue : \"\"), e;\n    }, g.attachEvent(\"onXLS\", function () {\n      if (!0 === this.config.show_loading) {\n        var t;\n        t = this.config.show_loading = document.createElement(\"div\"), t.className = \"dhx_loading\", t.style.left = Math.round((this._x - 128) / 2) + \"px\", t.style.top = Math.round((this._y - 15) / 2) + \"px\", this._obj.appendChild(t);\n      }\n    }), g.attachEvent(\"onXLE\", function () {\n      var t = this.config.show_loading;\n      t && \"object\" == typeof t && (t.parentNode && t.parentNode.removeChild(t), this.config.show_loading = !0);\n    }), g._lightbox_controls = {}, g.formSection = function (t) {\n      var e = this.config.lightbox.sections,\n          i = 0;\n\n      for (i; i < e.length && e[i].name != t; i++) {\n        ;\n      }\n\n      var n = e[i];\n      g._lightbox || g.getLightbox();\n      var a = document.getElementById(n.id),\n          r = a.nextSibling,\n          s = {\n        section: n,\n        header: a,\n        node: r,\n        getValue: function getValue(t) {\n          return g.form_blocks[n.type].get_value(r, t || {}, n);\n        },\n        setValue: function setValue(t, e) {\n          return g.form_blocks[n.type].set_value(r, t, e || {}, n);\n        }\n      },\n          o = g._lightbox_controls[\"get_\" + n.type + \"_control\"];\n      return o ? o(s) : s;\n    }, g._lightbox_controls.get_template_control = function (t) {\n      return t.control = t.node, t;\n    }, g._lightbox_controls.get_select_control = function (t) {\n      return t.control = t.node.getElementsByTagName(\"select\")[0], t;\n    }, g._lightbox_controls.get_textarea_control = function (t) {\n      return t.control = t.node.getElementsByTagName(\"textarea\")[0], t;\n    }, g._lightbox_controls.get_time_control = function (t) {\n      return t.control = t.node.getElementsByTagName(\"select\"), t;\n    }, g._lightbox_controls.defaults = {\n      template: {\n        height: 30\n      },\n      textarea: {\n        height: 200\n      },\n      select: {\n        height: 23\n      },\n      time: {\n        height: 20\n      }\n    }, g.form_blocks = {\n      template: {\n        render: function render(t) {\n          var e = g._lightbox_controls.defaults.template,\n              i = e ? e.height : 30;\n          return \"<div class='dhx_cal_ltext dhx_cal_template' style='height:\" + (t.height || i || 30) + \"px;'></div>\";\n        },\n        set_value: function set_value(t, e, i, n) {\n          t.innerHTML = e || \"\";\n        },\n        get_value: function get_value(t, e, i) {\n          return t.innerHTML || \"\";\n        },\n        focus: function focus(t) {}\n      },\n      textarea: {\n        render: function render(t) {\n          var e = g._lightbox_controls.defaults.textarea,\n              i = e ? e.height : 200;\n          return \"<div class='dhx_cal_ltext' style='height:\" + (t.height || i || \"130\") + \"px;'><textarea></textarea></div>\";\n        },\n        set_value: function set_value(t, e, i) {\n          g.form_blocks.textarea._get_input(t).value = e || \"\";\n        },\n        get_value: function get_value(t, e) {\n          return g.form_blocks.textarea._get_input(t).value;\n        },\n        focus: function focus(t) {\n          var e = g.form_blocks.textarea._get_input(t);\n\n          g._focus(e, !0);\n        },\n        _get_input: function _get_input(t) {\n          return t.getElementsByTagName(\"textarea\")[0];\n        }\n      },\n      select: {\n        render: function render(t) {\n          for (var e = g._lightbox_controls.defaults.select, i = e ? e.height : 23, n = (t.height || i || \"23\") + \"px\", a = \"<div class='dhx_cal_ltext' style='height:\" + n + \";'><select style='width:100%;'>\", r = 0; r < t.options.length; r++) {\n            a += \"<option value='\" + t.options[r].key + \"'>\" + t.options[r].label + \"</option>\";\n          }\n\n          return a += \"</select></div>\";\n        },\n        set_value: function set_value(t, e, i, n) {\n          var a = t.firstChild;\n          !a._dhx_onchange && n.onchange && (a.onchange = n.onchange, a._dhx_onchange = !0), void 0 === e && (e = (a.options[0] || {}).value), a.value = e || \"\";\n        },\n        get_value: function get_value(t, e) {\n          return t.firstChild.value;\n        },\n        focus: function focus(t) {\n          var e = t.firstChild;\n\n          g._focus(e, !0);\n        }\n      },\n      time: {\n        render: function render(t) {\n          t.time_format || (t.time_format = [\"%H:%i\", \"%d\", \"%m\", \"%Y\"]), t._time_format_order = {};\n          var e = t.time_format,\n              i = g.config,\n              n = g.date.date_part(g._currentDate()),\n              a = 1440,\n              r = 0;\n          g.config.limit_time_select && (a = 60 * i.last_hour + 1, r = 60 * i.first_hour, n.setHours(i.first_hour));\n\n          for (var s = \"\", o = 0; o < e.length; o++) {\n            var d = e[o];\n            o > 0 && (s += \" \");\n            var l = \"\",\n                _ = \"\";\n\n            switch (d) {\n              case \"%Y\":\n                l = \"dhx_lightbox_year_select\", t._time_format_order[3] = o;\n                var h, c, u;\n                t.year_range && (isNaN(t.year_range) ? t.year_range.push && (c = t.year_range[0], u = t.year_range[1]) : h = t.year_range), h = h || 10;\n                var f = f || Math.floor(h / 2);\n                c = c || n.getFullYear() - f, u = u || c + h;\n\n                for (var v = c; v < u; v++) {\n                  _ += \"<option value='\" + v + \"'>\" + v + \"</option>\";\n                }\n\n                break;\n\n              case \"%m\":\n                l = \"dhx_lightbox_month_select\", t._time_format_order[2] = o;\n\n                for (var v = 0; v < 12; v++) {\n                  _ += \"<option value='\" + v + \"'>\" + this.locale.date.month_full[v] + \"</option>\";\n                }\n\n                break;\n\n              case \"%d\":\n                l = \"dhx_lightbox_day_select\", t._time_format_order[1] = o;\n\n                for (var v = 1; v < 32; v++) {\n                  _ += \"<option value='\" + v + \"'>\" + v + \"</option>\";\n                }\n\n                break;\n\n              case \"%H:%i\":\n                l = \"dhx_lightbox_time_select\", t._time_format_order[0] = o;\n                var v = r,\n                    m = n.getDate();\n\n                for (t._time_values = []; v < a;) {\n                  _ += \"<option value='\" + v + \"'>\" + this.templates.time_picker(n) + \"</option>\", t._time_values.push(v), n.setTime(n.valueOf() + 60 * this.config.time_step * 1e3);\n                  v = 24 * (n.getDate() != m ? 1 : 0) * 60 + 60 * n.getHours() + n.getMinutes();\n                }\n\n            }\n\n            if (_) {\n              var p = g._waiAria.lightboxSelectAttrString(d);\n\n              s += \"<select class='\" + l + \"' \" + (t.readonly ? \"disabled='disabled'\" : \"\") + p + \">\" + _ + \"</select> \";\n            }\n          }\n\n          var x = g._lightbox_controls.defaults.select;\n          return \"<div style='height:\" + ((x ? x.height : 23) || 30) + \"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>\" + s + \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\" + s + \"</div>\";\n        },\n        set_value: function set_value(t, e, i, n) {\n          function a(t, e, i) {\n            for (var a = n._time_values, r = 60 * i.getHours() + i.getMinutes(), s = r, o = !1, d = 0; d < a.length; d++) {\n              var _ = a[d];\n\n              if (_ === r) {\n                o = !0;\n                break;\n              }\n\n              _ < r && (s = _);\n            }\n\n            t[e + l[0]].value = o ? r : s, o || s || (t[e + l[0]].selectedIndex = -1), t[e + l[1]].value = i.getDate(), t[e + l[2]].value = i.getMonth(), t[e + l[3]].value = i.getFullYear();\n          }\n\n          var r,\n              s,\n              o = g.config,\n              d = t.getElementsByTagName(\"select\"),\n              l = n._time_format_order;\n\n          if (o.full_day) {\n            if (!t._full_day) {\n              var _ = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \" + g.locale.labels.full_day + \"&nbsp;</label></input>\";\n\n              g.config.wide_form || (_ = t.previousSibling.innerHTML + _), t.previousSibling.innerHTML = _, t._full_day = !0;\n            }\n\n            var h = t.previousSibling.getElementsByTagName(\"input\")[0];\n            h.checked = 0 === g.date.time_part(i.start_date) && 0 === g.date.time_part(i.end_date), d[l[0]].disabled = h.checked, d[l[0] + d.length / 2].disabled = h.checked, h.onclick = function () {\n              if (h.checked) {\n                var e = {};\n                g.form_blocks.time.get_value(t, e, n), r = g.date.date_part(e.start_date), s = g.date.date_part(e.end_date), (+s == +r || +s >= +r && (0 !== i.end_date.getHours() || 0 !== i.end_date.getMinutes())) && (s = g.date.add(s, 1, \"day\"));\n              } else r = null, s = null;\n\n              d[l[0]].disabled = h.checked, d[l[0] + d.length / 2].disabled = h.checked, a(d, 0, r || i.start_date), a(d, 4, s || i.end_date);\n            };\n          }\n\n          if (o.auto_end_date && o.event_duration) for (var c = function c() {\n            o.auto_end_date && o.event_duration && (r = new Date(d[l[3]].value, d[l[2]].value, d[l[1]].value, 0, d[l[0]].value), s = new Date(r.getTime() + 60 * g.config.event_duration * 1e3), a(d, 4, s));\n          }, u = 0; u < 4; u++) {\n            d[u].onchange = c;\n          }\n          a(d, 0, i.start_date), a(d, 4, i.end_date);\n        },\n        get_value: function get_value(t, e, i) {\n          var n = t.getElementsByTagName(\"select\"),\n              a = i._time_format_order;\n\n          if (e.start_date = new Date(n[a[3]].value, n[a[2]].value, n[a[1]].value, 0, n[a[0]].value), e.end_date = new Date(n[a[3] + 4].value, n[a[2] + 4].value, n[a[1] + 4].value, 0, n[a[0] + 4].value), !n[a[3]].value || !n[a[3] + 4].value) {\n            var r = g.getEvent(g._lightbox_id);\n            r && (e.start_date = r.start_date, e.end_date = r.end_date);\n          }\n\n          return e.end_date <= e.start_date && (e.end_date = g.date.add(e.start_date, g.config.time_step, \"minute\")), {\n            start_date: new Date(e.start_date),\n            end_date: new Date(e.end_date)\n          };\n        },\n        focus: function focus(t) {\n          g._focus(t.getElementsByTagName(\"select\")[0]);\n        }\n      }\n    }, g._setLbPosition = function (t) {\n      if (t) {\n        var e = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop,\n            i = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft,\n            n = window.innerHeight || document.documentElement.clientHeight;\n        t.style.top = e ? Math.round(e + Math.max((n - t.offsetHeight) / 2, 0)) + \"px\" : Math.round(Math.max((n - t.offsetHeight) / 2, 0) + 9) + \"px\", document.documentElement.scrollWidth > document.body.offsetWidth ? t.style.left = Math.round(i + (document.body.offsetWidth - t.offsetWidth) / 2) + \"px\" : t.style.left = Math.round((document.body.offsetWidth - t.offsetWidth) / 2) + \"px\";\n      }\n    }, g.showCover = function (t) {\n      t && (t.style.display = \"block\", this._setLbPosition(t)), g.config.responsive_lightbox && (document.documentElement.classList.add(\"dhx_cal_overflow_container\"), document.body.classList.add(\"dhx_cal_overflow_container\")), this.show_cover();\n    }, g.showLightbox = function (t) {\n      if (t) {\n        if (!this.callEvent(\"onBeforeLightbox\", [t])) return void (this._new_event && (this._new_event = null));\n        var e = this.getLightbox();\n        this.showCover(e), this._fill_lightbox(t, e), this._waiAria.lightboxVisibleAttr(e), this.callEvent(\"onLightbox\", [t]);\n      }\n    }, g._fill_lightbox = function (t, e) {\n      var i = this.getEvent(t),\n          n = e.getElementsByTagName(\"span\"),\n          a = [];\n\n      if (g.templates.lightbox_header) {\n        a.push(\"\");\n        var r = g.templates.lightbox_header(i.start_date, i.end_date, i);\n        a.push(r), n[1].innerHTML = \"\", n[2].innerHTML = r;\n      } else {\n        var s = this.templates.event_header(i.start_date, i.end_date, i),\n            o = (this.templates.event_bar_text(i.start_date, i.end_date, i) || \"\").substr(0, 70);\n        a.push(s), a.push(o), n[1].innerHTML = s, n[2].innerHTML = o;\n      }\n\n      this._waiAria.lightboxHeader(e, a.join(\" \"));\n\n      for (var d = this.config.lightbox.sections, l = 0; l < d.length; l++) {\n        var _ = d[l],\n            h = g._get_lightbox_section_node(_),\n            c = this.form_blocks[_.type],\n            u = void 0 !== i[_.map_to] ? i[_.map_to] : _.default_value;\n\n        c.set_value.call(this, h, u, i, _), d[l].focus && c.focus.call(this, h);\n      }\n\n      g._lightbox_id = t;\n    }, g._get_lightbox_section_node = function (t) {\n      return document.getElementById(t.id).nextSibling;\n    }, g._lightbox_out = function (t) {\n      for (var e = this.config.lightbox.sections, i = 0; i < e.length; i++) {\n        var n = document.getElementById(e[i].id);\n        n = n ? n.nextSibling : n;\n        var a = this.form_blocks[e[i].type],\n            r = a.get_value.call(this, n, t, e[i]);\n        \"auto\" != e[i].map_to && (t[e[i].map_to] = r);\n      }\n\n      return t;\n    }, g._empty_lightbox = function (t) {\n      var e = g._lightbox_id,\n          i = this.getEvent(e);\n      this.getLightbox();\n      this._lame_copy(i, t), this.setEvent(i.id, i), this._edit_stop_event(i, !0), this.render_view_data();\n    }, g.hide_lightbox = function (t) {\n      g.endLightbox(!1, this.getLightbox());\n    }, g.hideCover = function (t) {\n      t && (t.style.display = \"none\"), this.hide_cover(), g.config.responsive_lightbox && (document.documentElement.classList.remove(\"dhx_cal_overflow_container\"), document.body.classList.remove(\"dhx_cal_overflow_container\"));\n    }, g.hide_cover = function () {\n      this._cover && this._cover.parentNode.removeChild(this._cover), this._cover = null;\n    }, g.show_cover = function () {\n      this._cover || (this._cover = document.createElement(\"div\"), this._cover.className = \"dhx_cal_cover\", document.body.appendChild(this._cover));\n    }, g.save_lightbox = function () {\n      var t = this._lightbox_out({}, this._lame_copy(this.getEvent(this._lightbox_id)));\n\n      this.checkEvent(\"onEventSave\") && !this.callEvent(\"onEventSave\", [this._lightbox_id, t, this._new_event]) || (this._empty_lightbox(t), this.hide_lightbox());\n    }, g.startLightbox = function (t, e) {\n      this._lightbox_id = t, this._custom_lightbox = !0, this._temp_lightbox = this._lightbox, this._lightbox = e, this.showCover(e);\n    }, g.endLightbox = function (t, e) {\n      var e = e || g.getLightbox(),\n          i = g.getEvent(this._lightbox_id);\n      i && this._edit_stop_event(i, t), t && g.render_view_data(), this.hideCover(e), this._custom_lightbox && (this._lightbox = this._temp_lightbox, this._custom_lightbox = !1), this._temp_lightbox = this._lightbox_id = null, this._waiAria.lightboxHiddenAttr(e), this.callEvent(\"onAfterLightbox\", []);\n    }, g.resetLightbox = function () {\n      g._lightbox && !g._custom_lightbox && g._lightbox.parentNode.removeChild(g._lightbox), g._lightbox = null;\n    }, g.cancel_lightbox = function () {\n      this._lightbox_id && this.callEvent(\"onEventCancel\", [this._lightbox_id, this._new_event]), this.hide_lightbox();\n    }, g.hideLightbox = g.cancel_lightbox, g._init_lightbox_events = function () {\n      this.getLightbox().onclick = function (t) {\n        var e = t ? t.target : event.srcElement;\n\n        if (e.className || (e = e.previousSibling), !(e && e.className && g._getClassName(e).indexOf(\"dhx_btn_set\") > -1) || (e = e.querySelector(\"[dhx_button]\"))) {\n          var i = g._getClassName(e);\n\n          if (e && i) switch (i) {\n            case \"dhx_save_btn\":\n              g.save_lightbox();\n              break;\n\n            case \"dhx_delete_btn\":\n              var n = g.locale.labels.confirm_deleting;\n\n              g._dhtmlx_confirm(n, g.locale.labels.title_confirm_deleting, function () {\n                g.deleteEvent(g._lightbox_id), g._new_event = null, g.hide_lightbox();\n              });\n\n              break;\n\n            case \"dhx_cancel_btn\":\n              g.cancel_lightbox();\n              break;\n\n            default:\n              if (e.getAttribute(\"dhx_button\")) g.callEvent(\"onLightboxButton\", [i, e, t]);else {\n                var a, r, s;\n                -1 != i.indexOf(\"dhx_custom_button\") && (-1 != i.indexOf(\"dhx_custom_button_\") ? (a = e.parentNode.getAttribute(\"index\"), s = e.parentNode.parentNode) : (a = e.getAttribute(\"index\"), s = e.parentNode, e = e.firstChild)), a && (r = g.form_blocks[g.config.lightbox.sections[a].type], r.button_click(a, e, s, s.nextSibling));\n              }\n          }\n        }\n      }, this.getLightbox().onkeydown = function (t) {\n        var e = t || window.event,\n            i = t.target || t.srcElement,\n            n = i.querySelector(\"[dhx_button]\");\n\n        switch (n || (n = i.parentNode.querySelector(\".dhx_custom_button, .dhx_readonly\")), (t || e).keyCode) {\n          case 32:\n            if ((t || e).shiftKey) return;\n            n && n.click && n.click();\n            break;\n\n          case g.keys.edit_save:\n            if ((t || e).shiftKey) return;\n            n && n.click ? n.click() : g.save_lightbox();\n            break;\n\n          case g.keys.edit_cancel:\n            g.cancel_lightbox();\n        }\n      };\n    }, g.setLightboxSize = function () {\n      var t = this._lightbox;\n\n      if (t) {\n        var e = t.childNodes[1];\n        e.style.height = \"0px\", e.style.height = e.scrollHeight + \"px\", t.style.height = e.scrollHeight + g.xy.lightbox_additional_height + \"px\", e.style.height = e.scrollHeight + \"px\";\n      }\n    }, g._init_dnd_events = function () {\n      g.event(document.body, \"mousemove\", g._move_while_dnd), g.event(document.body, \"mouseup\", g._finish_dnd), g._init_dnd_events = function () {};\n    }, g._move_while_dnd = function (t) {\n      if (g._dnd_start_lb) {\n        document.dhx_unselectable || (document.body.className += \" dhx_unselectable\", document.dhx_unselectable = !0);\n        var e = g.getLightbox(),\n            i = t && t.target ? [t.pageX, t.pageY] : [event.clientX, event.clientY];\n        e.style.top = g._lb_start[1] + i[1] - g._dnd_start_lb[1] + \"px\", e.style.left = g._lb_start[0] + i[0] - g._dnd_start_lb[0] + \"px\";\n      }\n    }, g._ready_to_dnd = function (t) {\n      var e = g.getLightbox();\n      g._lb_start = [parseInt(e.style.left, 10), parseInt(e.style.top, 10)], g._dnd_start_lb = t && t.target ? [t.pageX, t.pageY] : [event.clientX, event.clientY];\n    }, g._finish_dnd = function () {\n      g._lb_start && (g._lb_start = g._dnd_start_lb = !1, document.body.className = document.body.className.replace(\" dhx_unselectable\", \"\"), document.dhx_unselectable = !1);\n    }, g.getLightbox = function () {\n      if (!this._lightbox) {\n        var t = document.createElement(\"div\");\n        t.className = \"dhx_cal_light\", g.config.wide_form && (t.className += \" dhx_cal_light_wide\"), g.form_blocks.recurring && (t.className += \" dhx_cal_light_rec\"), g.config.rtl && (t.className += \" dhx_cal_light_rtl\"), g.config.responsive_lightbox && (t.className += \" dhx_cal_light_responsive\"), /msie|MSIE 6/.test(navigator.userAgent) && (t.className += \" dhx_ie6\"), t.style.visibility = \"hidden\";\n\n        for (var e = this._lightbox_template, i = this.config.buttons_left, n = \"\", a = 0; a < i.length; a++) {\n          n = this._waiAria.lightboxButtonAttrString(i[a]), e += \"<div \" + n + \" class='dhx_btn_set dhx_\" + (g.config.rtl ? \"right\" : \"left\") + \"_btn_set \" + i[a] + \"_set'><div dhx_button='1' class='\" + i[a] + \"'></div><div>\" + g.locale.labels[i[a]] + \"</div></div>\";\n        }\n\n        i = this.config.buttons_right;\n\n        for (var r = g.config.rtl, a = 0; a < i.length; a++) {\n          n = this._waiAria.lightboxButtonAttrString(i[a]), e += \"<div \" + n + \" class='dhx_btn_set dhx_\" + (r ? \"left\" : \"right\") + \"_btn_set \" + i[a] + \"_set' style='float:\" + (r ? \"left\" : \"right\") + \";'><div dhx_button='1' class='\" + i[a] + \"'></div><div>\" + g.locale.labels[i[a]] + \"</div></div>\";\n        }\n\n        e += \"</div>\", t.innerHTML = e, g.config.drag_lightbox && (t.firstChild.onmousedown = g._ready_to_dnd, t.firstChild.onselectstart = function () {\n          return !1;\n        }, t.firstChild.style.cursor = \"move\", g._init_dnd_events()), this._waiAria.lightboxAttr(t), document.body.insertBefore(t, document.body.firstChild), this._lightbox = t;\n        var s = this.config.lightbox.sections;\n        e = \"\";\n\n        for (var a = 0; a < s.length; a++) {\n          var o = this.form_blocks[s[a].type];\n\n          if (o) {\n            s[a].id = \"area_\" + this.uid();\n            var d = \"\";\n\n            if (s[a].button) {\n              var n = g._waiAria.lightboxSectionButtonAttrString(this.locale.labels[\"button_\" + s[a].button]);\n\n              d = \"<div \" + n + \" class='dhx_custom_button' index='\" + a + \"'><div class='dhx_custom_button_\" + s[a].button + \"'></div><div>\" + this.locale.labels[\"button_\" + s[a].button] + \"</div></div>\";\n            }\n\n            this.config.wide_form && (e += \"<div class='dhx_wrap_section'>\");\n            var l = this.locale.labels[\"section_\" + s[a].name];\n            \"string\" != typeof l && (l = s[a].name), e += \"<div id='\" + s[a].id + \"' class='dhx_cal_lsection'>\" + d + \"<label>\" + l + \"</label></div>\" + o.render.call(this, s[a]), e += \"</div>\";\n          }\n        }\n\n        for (var _ = t.getElementsByTagName(\"div\"), a = 0; a < _.length; a++) {\n          var h = _[a];\n\n          if (\"dhx_cal_larea\" == g._getClassName(h)) {\n            h.innerHTML = e;\n            break;\n          }\n        }\n\n        g._bindLightboxLabels(s), this.setLightboxSize(), this._init_lightbox_events(this), t.style.display = \"none\", t.style.visibility = \"visible\";\n      }\n\n      return this._lightbox;\n    }, g._bindLightboxLabels = function (t) {\n      for (var e = 0; e < t.length; e++) {\n        var i = t[e];\n\n        if (i.id && document.getElementById(i.id)) {\n          for (var n = document.getElementById(i.id), a = n.querySelector(\"label\"), r = g._get_lightbox_section_node(i); r && !r.querySelector;) {\n            r = r.nextSibling;\n          }\n\n          var s = !0;\n\n          if (r) {\n            var o = r.querySelector(\"input, select, textarea\");\n            o && (i.inputId = o.id || \"input_\" + g.uid(), o.id || (o.id = i.inputId), a.setAttribute(\"for\", i.inputId), s = !1);\n          }\n\n          if (s) {\n            g.form_blocks[i.type].focus && (a.onclick = function (t) {\n              return function () {\n                var e = g.form_blocks[t.type],\n                    i = g._get_lightbox_section_node(t);\n\n                e && e.focus && e.focus.call(g, i);\n              };\n            }(i));\n          }\n        }\n      }\n    }, g.attachEvent(\"onEventIdChange\", function (t, e) {\n      this._lightbox_id == t && (this._lightbox_id = e);\n    }), g._lightbox_template = \"<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>\", g._init_touch_events = function () {\n      if ((this.config.touch && (-1 != navigator.userAgent.indexOf(\"Mobile\") || -1 != navigator.userAgent.indexOf(\"iPad\") || -1 != navigator.userAgent.indexOf(\"Android\") || -1 != navigator.userAgent.indexOf(\"Touch\")) && !window.MSStream || \"MacIntel\" === navigator.platform && navigator.maxTouchPoints > 1) && (this.xy.scroll_width = 0, this._mobile = !0), this.config.touch) {\n        var t = !0;\n\n        try {\n          document.createEvent(\"TouchEvent\");\n        } catch (e) {\n          t = !1;\n        }\n\n        t ? this._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (t) {\n          return t.touches && t.touches.length > 1 ? null : t.touches[0] ? {\n            target: t.target,\n            pageX: t.touches[0].pageX,\n            pageY: t.touches[0].pageY,\n            clientX: t.touches[0].clientX,\n            clientY: t.touches[0].clientY\n          } : t;\n        }, function () {\n          return !1;\n        }) : window.PointerEvent || window.navigator.pointerEnabled ? this._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (t) {\n          return \"mouse\" == t.pointerType ? null : t;\n        }, function (t) {\n          return !t || \"mouse\" == t.pointerType;\n        }) : window.navigator.msPointerEnabled && this._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (t) {\n          return t.pointerType == t.MSPOINTER_TYPE_MOUSE ? null : t;\n        }, function (t) {\n          return !t || t.pointerType == t.MSPOINTER_TYPE_MOUSE;\n        });\n      }\n    }, g._touch_events = function (t, e, i) {\n      function n(t, e, n) {\n        t.addEventListener(e, function (t) {\n          if (g._is_lightbox_open()) return !0;\n          if (!i(t)) return n(t);\n        }, {\n          passive: !1\n        });\n      }\n\n      function a(t, e, i, n) {\n        if (!t || !e) return !1;\n\n        for (var a = t.target; a && a != g._obj;) {\n          a = a.parentNode;\n        }\n\n        if (a != g._obj) return !1;\n\n        if (g.matrix && g.matrix[g.getState().mode]) {\n          if (g.matrix[g.getState().mode].scrollable) return !1;\n        }\n\n        var r = Math.abs(t.pageY - e.pageY),\n            s = Math.abs(t.pageX - e.pageX);\n        return r < n && s > i && (!r || s / r > 3) && (t.pageX > e.pageX ? g._click.dhx_cal_next_button() : g._click.dhx_cal_prev_button(), !0);\n      }\n\n      function r(t) {\n        if (!i(t)) {\n          var e = g.getState().drag_mode,\n              n = !!g.matrix && g.matrix[g._mode],\n              a = g.render_view_data;\n          return \"create\" == e && n && (g.render_view_data = function () {\n            for (var t = g.getState().drag_id, e = g.getEvent(t), i = n.y_property, a = g.getEvents(e.start_date, e.end_date), r = 0; r < a.length; r++) {\n              a[r][i] != e[i] && (a.splice(r, 1), r--);\n            }\n\n            e._sorder = a.length - 1, e._count = a.length, this.render_data([e], g.getState().mode);\n          }), g._on_mouse_move(t), \"create\" == e && n && (g.render_view_data = a), t.preventDefault && t.preventDefault(), t.cancelBubble = !0, !1;\n        }\n      }\n\n      function s(t) {\n        i(t) || (g._hide_global_tip(), _ && (g._on_mouse_up(e(t || event)), g._temp_touch_block = !1), g._drag_id = null, g._drag_mode = null, g._drag_pos = null, g._pointerDragId = null, clearTimeout(l), _ = c = !1, h = !0);\n      }\n\n      var o,\n          d,\n          l,\n          _,\n          h,\n          c,\n          u = (-1 != navigator.userAgent.indexOf(\"Android\") && navigator.userAgent.indexOf(\"WebKit\"), 0);\n\n      n(document.body, t[0], function (t) {\n        if (!i(t)) {\n          var n = e(t);\n\n          if (n) {\n            if (_) return r(n), t.preventDefault && t.preventDefault(), t.cancelBubble = !0, g._update_global_tip(), !1;\n            if (d = e(t), c) return d ? void ((o.target != d.target || Math.abs(o.pageX - d.pageX) > 5 || Math.abs(o.pageY - d.pageY) > 5) && (h = !0, clearTimeout(l))) : void (h = !0);\n          }\n        }\n      }), n(this._els.dhx_cal_data[0], \"touchcancel\", s), n(this._els.dhx_cal_data[0], \"contextmenu\", function (t) {\n        if (!i(t)) return c ? (t && t.preventDefault && t.preventDefault(), (t || event).cancelBubble = !0, !1) : void 0;\n      }), n(this._obj, t[1], function (t) {\n        if (document && document.body && document.body.classList.add(\"dhx_cal_touch_active\"), !i(t)) {\n          g._pointerDragId = t.pointerId;\n          var n;\n          if (_ = h = !1, c = !0, !(n = d = e(t))) return void (h = !0);\n          var a = new Date();\n          if (!h && !_ && a - u < 250) return g._click.dhx_cal_data(n), window.setTimeout(function () {\n            n.type = \"dblclick\", g._on_dbl_click(n);\n          }, 50), t.preventDefault && t.preventDefault(), t.cancelBubble = !0, g._block_next_stop = !0, !1;\n\n          if (u = a, !h && !_ && g.config.touch_drag) {\n            var r = g._locate_event(document.activeElement),\n                s = g._locate_event(n.target),\n                f = o ? g._locate_event(o.target) : null;\n\n            if (r && s && r == s && r != f) return t.preventDefault && t.preventDefault(), t.cancelBubble = !0, g._ignore_next_click = !1, g._click.dhx_cal_data(n), o = n, !1;\n            l = setTimeout(function () {\n              _ = !0;\n\n              var t = o.target,\n                  e = g._getClassName(t);\n\n              t && -1 != e.indexOf(\"dhx_body\") && (t = t.previousSibling), g._on_mouse_down(o, t), g._drag_mode && \"create\" != g._drag_mode && g.for_rendered(g._drag_id, function (t, e) {\n                t.style.display = \"none\", g._rendered.splice(e, 1);\n              }), g.config.touch_tip && g._show_global_tip(), g.updateEvent(g._drag_id);\n            }, g.config.touch_drag), o = n;\n          }\n        }\n      }), n(this._els.dhx_cal_data[0], t[2], function (t) {\n        if (document && document.body && document.body.classList.remove(\"dhx_cal_touch_active\"), !i(t)) return g.config.touch_swipe_dates && !_ && a(o, d, 200, 100) && (g._block_next_stop = !0), _ && (g._ignore_next_click = !0, setTimeout(function () {\n          g._ignore_next_click = !1;\n        }, 100)), s(t), g._block_next_stop ? (g._block_next_stop = !1, t.preventDefault && t.preventDefault(), t.cancelBubble = !0, !1) : void 0;\n      }), g.event(document.body, t[2], s);\n    }, g._show_global_tip = function () {\n      g._hide_global_tip();\n\n      var t = g._global_tip = document.createElement(\"div\");\n      t.className = \"dhx_global_tip\", g._update_global_tip(1), document.body.appendChild(t);\n    }, g._update_global_tip = function (t) {\n      var e = g._global_tip;\n\n      if (e) {\n        var i = \"\";\n\n        if (g._drag_id && !t) {\n          var n = g.getEvent(g._drag_id);\n          n && (i = \"<div>\" + (n._timed ? g.templates.event_header(n.start_date, n.end_date, n) : g.templates.day_date(n.start_date, n.end_date, n)) + \"</div>\");\n        }\n\n        \"create\" == g._drag_mode || \"new-size\" == g._drag_mode ? e.innerHTML = (g.locale.labels.drag_to_create || \"Drag to create\") + i : e.innerHTML = (g.locale.labels.drag_to_move || \"Drag to move\") + i;\n      }\n    }, g._hide_global_tip = function () {\n      var t = g._global_tip;\n      t && t.parentNode && (t.parentNode.removeChild(t), g._global_tip = 0);\n    }, g._dp_init = function (t) {\n      t._methods = [\"_set_event_text_style\", \"\", \"_dp_change_event_id\", \"_dp_hook_delete\"], this._dp_change_event_id = function (t, e) {\n        g.getEvent(t) && g.changeEventId(t, e);\n      }, this._dp_hook_delete = function (e, i) {\n        if (g.getEvent(e)) return i && e != i && (\"true_deleted\" == this.getUserData(e, t.action_param) && this.setUserData(e, t.action_param, \"updated\"), this.changeEventId(e, i)), this.deleteEvent(i, !0);\n      }, this.attachEvent(\"onEventAdded\", function (e) {\n        !this._loading && this._validId(e) && t.setUpdated(e, !0, \"inserted\");\n      }), this.attachEvent(\"onConfirmedBeforeEventDelete\", function (e) {\n        if (this._validId(e)) {\n          var i = t.getState(e);\n          return \"inserted\" == i || this._new_event ? (t.setUpdated(e, !1), !0) : \"deleted\" != i && (\"true_deleted\" == i || (t.setUpdated(e, !0, \"deleted\"), !1));\n        }\n      }), this.attachEvent(\"onEventChanged\", function (e) {\n        !this._loading && this._validId(e) && t.setUpdated(e, !0, \"updated\");\n      }), g.attachEvent(\"onClearAll\", function () {\n        t._in_progress = {}, t._invalid = {}, t.updatedRows = [], t._waitMode = 0;\n      });\n\n      var e = function e(t, i, n) {\n        n = n || \"\", i = i || {};\n\n        for (var a in t) {\n          0 !== a.indexOf(\"_\") && (t[a] && t[a].getUTCFullYear ? i[n + a] = this.obj._helpers.formatDate(t[a]) : t[a] && \"object\" == typeof t[a] ? e.call(this, t[a], i, n + a + \".\") : i[n + a] = t[a]);\n        }\n\n        return i;\n      },\n          i = function i(t) {\n        var e = g.utils.copy(t);\n\n        for (var n in e) {\n          0 === n.indexOf(\"_\") ? delete e[n] : e[n] && (e[n].getUTCFullYear ? e[n] = this.obj._helpers.formatDate(e[n]) : \"object\" == typeof e[n] && (e[n] = i(e[n])));\n        }\n\n        return e;\n      };\n\n      t._getRowData = function (t, n) {\n        var a = this.obj.getEvent(t);\n        return \"JSON\" == this._tMode ? i.call(this, a) : e.call(this, a);\n      }, t._clearUpdateFlag = function () {}, t.attachEvent(\"insertCallback\", g._update_callback), t.attachEvent(\"updateCallback\", g._update_callback), t.attachEvent(\"deleteCallback\", function (t, e) {\n        this.obj.getEvent(e) ? (this.obj.setUserData(e, this.action_param, \"true_deleted\"), this.obj.deleteEvent(e)) : this.obj._add_rec_marker && this.obj._update_callback(t, e);\n      });\n    }, g._validId = function (t) {\n      return !0;\n    }, g.setUserData = function (t, e, i) {\n      if (t) {\n        var n = this.getEvent(t);\n        n && (n[e] = i);\n      } else this._userdata[e] = i;\n    }, g.getUserData = function (t, e) {\n      if (t) {\n        var i = this.getEvent(t);\n        return i ? i[e] : null;\n      }\n\n      return this._userdata[e];\n    }, g._set_event_text_style = function (t, e) {\n      if (g.getEvent(t)) {\n        this.for_rendered(t, function (t) {\n          t.style.cssText += \";\" + e;\n        });\n        var i = this.getEvent(t);\n        i._text_style = e, this.event_updated(i);\n      }\n    }, g._update_callback = function (t, e) {\n      var i = g._xmlNodeToJSON(t.firstChild);\n\n      \"none\" == i.rec_type && (i.rec_pattern = \"none\"), i.text = i.text || i._tagvalue, i.start_date = g._helpers.parseDate(i.start_date), i.end_date = g._helpers.parseDate(i.end_date), g.addEvent(i), g._add_rec_marker && g.setCurrentView();\n    }, g.getRootView = function () {\n      return {\n        view: {\n          render: function render() {\n            return {\n              tag: \"div\",\n              type: 1,\n              attrs: {\n                style: \"width:100%;height:100%;\"\n              },\n              hooks: {\n                didInsert: function didInsert() {\n                  g.setCurrentView();\n                }\n              },\n              body: [{\n                el: this.el,\n                type: 1\n              }]\n            };\n          },\n          init: function init() {\n            var t = document.createElement(\"DIV\");\n            t.id = \"scheduler_\" + g.uid(), t.style.width = \"100%\", t.style.height = \"100%\", t.classList.add(\"dhx_cal_container\"), t.cmp = \"grid\", t.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\">&nbsp;</div><div class=\"dhx_cal_next_button\">&nbsp;</div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>', g.init(t), this.el = t;\n          }\n        },\n        type: 4\n      };\n    }, g._skin_settings = {\n      fix_tab_position: [1, 0],\n      use_select_menu_space: [1, 0],\n      wide_form: [1, 0],\n      hour_size_px: [44, 42],\n      displayed_event_color: [\"#ff4a4a\", \"ffc5ab\"],\n      displayed_event_text_color: [\"#ffef80\", \"7e2727\"]\n    }, g._skin_xy = {\n      lightbox_additional_height: [90, 50],\n      nav_height: [59, 22],\n      bar_height: [24, 20]\n    }, g._is_material_skin = function () {\n      return g.skin ? (g.skin + \"\").indexOf(\"material\") > -1 : c();\n    };\n    var A, S;\n    window.addEventListener(\"DOMContentLoaded\", f), window.addEventListener(\"load\", f), g._border_box_events = function () {\n      return u();\n    }, g._configure = function (t, e, i) {\n      for (var n in e) {\n        void 0 === t[n] && (t[n] = e[n][i]);\n      }\n    }, g._skin_init = function () {\n      if (!g.skin) for (var t = document.getElementsByTagName(\"link\"), e = 0; e < t.length; e++) {\n        var i = t[e].href.match(\"dhtmlxscheduler_([a-z]+).css\");\n\n        if (i) {\n          g.skin = i[1];\n          break;\n        }\n      }\n      var n = 0;\n\n      if (!g.skin || \"classic\" !== g.skin && \"glossy\" !== g.skin || (n = 1), g._is_material_skin()) {\n        var a = g.config.buttons_left.$inital,\n            r = g.config.buttons_right.$inital;\n\n        if (a && g.config.buttons_left.slice().join() == a && r && g.config.buttons_right.slice().join() == r) {\n          var s = g.config.buttons_left.slice();\n          g.config.buttons_left = g.config.buttons_right.slice(), g.config.buttons_right = s;\n        }\n\n        g.xy.event_header_height = 18, g.xy.week_agenda_scale_height = 35, g.xy.map_icon_width = 38, g._lightbox_controls.defaults.textarea.height = 64, g._lightbox_controls.defaults.time.height = \"auto\";\n      }\n\n      if (this._configure(g.config, g._skin_settings, n), this._configure(g.xy, g._skin_xy, n), \"flat\" === g.skin && (g.xy.scale_height = 35, g.templates.hour_scale = function (t) {\n        var e = t.getMinutes();\n        return e = e < 10 ? \"0\" + e : e, \"<span class='dhx_scale_h'>\" + t.getHours() + \"</span><span class='dhx_scale_m'>&nbsp;\" + e + \"</span>\";\n      }), !n) {\n        var o = g.config.minicalendar;\n        o && (o.padding = 14), g.templates.event_bar_date = function (t, e, i) {\n          return \"• <b>\" + g.templates.event_date(t) + \"</b> \";\n        }, g.attachEvent(\"onTemplatesReady\", function () {\n          var t = g.date.date_to_str(\"%d\");\n          g.templates._old_month_day || (g.templates._old_month_day = g.templates.month_day);\n          var e = g.templates._old_month_day;\n\n          if (g.templates.month_day = function (i) {\n            if (\"month\" == this._mode) {\n              var n = t(i);\n              return 1 == i.getDate() && (n = g.locale.date.month_full[i.getMonth()] + \" \" + n), +i == +g.date.date_part(this._currentDate()) && (n = g.locale.labels.dhx_cal_today_button + \" \" + n), n;\n            }\n\n            return e.call(this, i);\n          }, g.config.fix_tab_position) {\n            var i = g._els.dhx_cal_navline[0].getElementsByTagName(\"div\"),\n                n = null,\n                a = 211,\n                r = [14, 75, 136],\n                s = 14;\n\n            g._is_material_skin() && (r = [16, 103, 192], a = 294, s = -1);\n\n            for (var o = 0; o < i.length; o++) {\n              var d = i[o],\n                  l = d.getAttribute(\"name\");\n\n              if (l) {\n                switch (d.style.right = \"auto\", l) {\n                  case \"day_tab\":\n                    d.style.left = r[0] + \"px\", d.className += \" dhx_cal_tab_first\";\n                    break;\n\n                  case \"week_tab\":\n                    d.style.left = r[1] + \"px\";\n                    break;\n\n                  case \"month_tab\":\n                    d.style.left = r[2] + \"px\", d.className += \" dhx_cal_tab_last\";\n                    break;\n\n                  default:\n                    d.style.left = a + \"px\", d.className += \" dhx_cal_tab_standalone\", a = a + s + d.offsetWidth;\n                }\n\n                d.className += \" \" + l;\n              } else 0 === (d.className || \"\").indexOf(\"dhx_minical_icon\") && d.parentNode == g._els.dhx_cal_navline[0] && (n = d);\n            }\n\n            n && (n.style.left = a + \"px\");\n          }\n        }), g._skin_init = function () {};\n      }\n    }, window.jQuery && function (t) {\n      var e = 0,\n          i = [];\n\n      t.fn.dhx_scheduler = function (n) {\n        if (\"string\" != typeof n) {\n          var a = [];\n          return this.each(function () {\n            if (this && this.getAttribute) if (this.getAttribute(\"dhxscheduler\")) a.push(window[this.getAttribute(\"dhxscheduler\")]);else {\n              var t = \"scheduler\";\n              e && (t = \"scheduler\" + (e + 1), window[t] = Scheduler.getSchedulerInstance());\n              var i = window[t];\n              this.setAttribute(\"dhxscheduler\", t);\n\n              for (var r in n) {\n                \"data\" != r && (i.config[r] = n[r]);\n              }\n\n              this.getElementsByTagName(\"div\").length || (this.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\">&nbsp;</div><div class=\"dhx_cal_next_button\">&nbsp;</div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>', this.className += \" dhx_cal_container\"), i.init(this, i.config.date, i.config.mode), n.data && i.parse(n.data), a.push(i), e++;\n            }\n          }), 1 === a.length ? a[0] : a;\n        }\n\n        if (i[n]) return i[n].apply(this, []);\n        t.error(\"Method \" + n + \" does not exist on jQuery.dhx_scheduler\");\n      };\n    }(jQuery), function () {\n      function t(t, e, i) {\n        e && (t._date = e), i && (t._mode = i);\n      }\n\n      var e = g.setCurrentView,\n          i = g.updateView,\n          n = null,\n          a = null,\n          r = function r(e, _r) {\n        var s = this;\n        window.clearTimeout(a), window.clearTimeout(n);\n        var o = s._date,\n            d = s._mode;\n        t(this, e, _r), a = setTimeout(function () {\n          if (!s.callEvent(\"onBeforeViewChange\", [d, o, _r || s._mode, e || s._date])) return void t(s, o, d);\n          i.call(s, e, _r), s.callEvent(\"onViewChange\", [s._mode, s._date]), window.clearTimeout(n), a = 0;\n        }, g.config.delay_render);\n      },\n          s = function s(e, r) {\n        var s = this,\n            o = arguments;\n        t(this, e, r), window.clearTimeout(n), n = setTimeout(function () {\n          a || i.apply(s, o);\n        }, g.config.delay_render);\n      };\n\n      g.attachEvent(\"onSchedulerReady\", function () {\n        g.config.delay_render ? (g.setCurrentView = r, g.updateView = s) : (g.setCurrentView = e, g.updateView = i);\n      });\n    }();\n\n    for (var k = 0; k < Scheduler._schedulerPlugins.length; k++) {\n      Scheduler._schedulerPlugins[k](g);\n    }\n\n    return g._internal_id = Scheduler._seed++, Scheduler.$syncFactory && Scheduler.$syncFactory(g), g;\n  }, window.scheduler = Scheduler.getSchedulerInstance(), window.Scheduler = {\n    plugin: scheduler.bind(Scheduler.plugin, Scheduler)\n  }, dhtmlx && dhtmlx.attaches && (dhtmlx.attaches.attachScheduler = function (t, e, i, n) {\n    var i = i || '<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>',\n        a = document.createElement(\"DIV\");\n    return a.id = \"dhxSchedObj_\" + this._genStr(12), a.innerHTML = '<div id=\"' + a.id + '\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\"><div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\">&nbsp;</div><div class=\"dhx_cal_next_button\">&nbsp;</div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div>' + i + '</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>', document.body.appendChild(a.firstChild), this.attachObject(a.id, !1, !0), this.vs[this.av].sched = n, this.vs[this.av].schedId = a.id, n.setSizes = n.updateView, n.destructor = function () {}, n.init(a.id, t, e), this.vs[this._viewRestore()].sched;\n  });\n}();","map":{"version":3,"sources":["C:\\Users\\Chara.BOOK-TUAT0373MQ\\OneDrive\\Documents\\GitHub\\wi23-hack-team-3\\server\\weekly-schedule\\node_modules\\dhtmlx-scheduler\\codebase\\sources\\dhtmlxscheduler.js"],"names":["window","dhtmlx","obj","a","extend_api","name","map","ext","t","that","tagName","apply","this","_init","arguments","_patch","prototype","dhtmlXHeir","dhtmlxAjax","get","url","callback","dtmlXMLLoaderObject","async","length","waitCall","loadXML","post","postSync","funcObject","dhtmlObject","rSeed","xmlDoc","onloadAction","mainObject","count","waitLoadFunction","once","check","readyState","getXMLTopNode","oldObj","z","responseXML","temp","getElementsByTagName","indexOf","split","documentElement","_retry","_isIE","dhtmlxError","throwError","document","createElement","loadXMLString","xmlString","silent","parser","DOMParser","ActiveXObject","onreadystatechange","filePath","postMode","postVars","rpc","Date","valueOf","XMLHttpRequest","open","setRequestHeader","navigator","userAgent","send","destructor","_filterXPath","_getAllNamedChilds","doXPath","doXPathOpera","doXSLTransToObject","doXSLTransToString","doSerialization","xmlNodeToJSON","setXSLParamValue","node","i","attributes","value","firstChild","nodeValue","childNodes","push","dhtmlDragAndDropObject","dhtmlDragAndDrop","lastLanding","dragNode","dragStartNode","dragStartObject","tempDOMU","tempDOMM","waitDrag","htmlNode","onmousedown","dragStarter","dragLanding","addDraggableItem","preCreateDragCopy","addDragLanding","e","body","onmouseup","onmousemove","stopDrag","callDrag","downtime","preventDefault","event","dragger","_createDragNode","onselectstart","gldragNode","appendChild","pWindow","initFrameRoute","parentNode","grd","old","removeChild","_dragOut","div","innerHTML","outerHTML","cloneNode","oldBody","style","top","clientY","fy","scrollTop","srcElement","target","checkLanding","calculateFramePosition","n","el","parent","frames","frameElement","offsetParent","fx","offsetLeft","offsetTop","ls","htmlObject","_dragIn","clientX","_onNotFound","mode","stopFrameRoute","win","_isFF","_FFrv","_isOpera","_isKHTML","_isMacOS","_isChrome","_KHTMLrv","_OperaRv","parseFloat","substr","appName","xpathExp","docObj","namespace","result_type","XPathResult","setProperty","selectSingleNode","selectNodes","Array","nodeObj","nodeName","retType","ANY_TYPE","FIRST_ORDERED_NODE_TYPE","rowsCol","col","evaluate","pref","singleNodeValue","thisColMemb","iterateNext","_dhtmlxError","type","params","catchError","func_name","catches","replace","b","c","getAttribute","toUpperCase","dhtmlxEvent","handler","addEventListener","attachEvent","xslDoc","item","paramName","paramValue","result","XSLProcessor","XSLTProcessor","importStylesheet","transformToDocument","transformNode","res","dhtmlxEventable","catcher","callObj","toLowerCase","eventCatcher","addEvent","callEvent","arg0","checkEvent","dhx_catch","zr","ev","eval","removeEvent","id","detachEvent","list","detachAllEvents","_dhx_msg_cfg","config","setTimeout","box","usercall","modality","modal_key","code","which","keyCode","message","keyboard","scheduler","_getClassName","click","cover","onkeydown","className","scrollHeight","display","button","text","css","_waiAria","messageButtonAttrString","info","area","position","hide","onclick","messageInfoAttr","insertBefore","expire","pull","_boxStructure","ok","cancel","setAttribute","contentId","uid","messageModalAttr","inner","hasTitle","width","height","title","ok_text","locale","labels","message_ok","undefined","cancel_text","message_cancel","buttons","content","source","_createBox","hidden","y","left","x","modalbox","focus","alertPopup","confirmPopup","boxPopup","alert","box_params","confirm","focusable","_getFocusableNodes","seed","timers","hideAll","key","clearTimeout","dataProcessor","serverProcessorURL","serverProcessor","action_param","object","updatedRows","autoUpdate","updateMode","_tMode","_headers","_payload","post_delim","_waitMode","_in_progress","_invalid","mandatoryFields","messages","styles","updated","deleted","invalid","invalid_cell","error","clear","enableUTFencoding","setTransactionMode","total","payload","_tSend","_endnm","contentType","hasContentType","headers","match","escape","data","_utf","encodeURIComponent","setDataColumns","val","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","setUpdateMode","dnd","ignore","master","_silent_mode","call","setUpdated","rowId","state","existing","getUserData","set_invalid","ind","setUserData","is_invalid","splice","_clearUpdateFlag","markRow","sendData","str","_methods","details","getState","toString","checkBeforeUpdate","mytype","_h2","editStop","sendAllData","_beforeSendData","_getRowData","_sendData","serialize","serialize_one","stack","keys","hasOwnProperty","join","security_key","_applyPayload","ajax","$ajax","urlSeparator","a1","back","xml","ids","afterUpdate","a3","_user","a4","query","method","action","gr_id","JSON","stringify","slice","valid","_getAllData","out","has_one","row","setVerificator","verifFunction","clearVerificator","findRow","pattern","defineAction","_uActions","afterUpdateCallback","sid","tid","btag","marker","correct","soid","_errorResponse","cleanUpdate","status","tag","parse","responseText","finalizeUpdate","xmltop","atag","xpath","init","anObj","_dp_init","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","interval","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","self","setInterval","loadUpdate","getUpdates","_v","_a","arr","version","vers","upds","init_original","_dataprocessor","ajax_error","Scheduler","_seed","plugin","_schedulerPlugins","getSchedulerInstance","commonViews","agenda","unit","timeline","week_agenda","year","anythingElse","requiredExtensions","limit","_commonErrorMessages","unknownView","view","relatedDoc","relatedExtension","collapsedContainer","createTimelineView","Error","createGridView","grid","addMarkedTimespan","renderCalendar","exportToPNG","exportToPDF","element","forEach","cssClass","classList","add","itemTypes","rows_container","fix_tab_position","$firstTab","$lastTab","date","builtInButton","minicalendarButton","minicalendarDiv","isCalendarVisible","destroyCalendar","navigation","calendar","setCurrentView","html_element","findRenderer","renderer","spacer","rows","cols","renderElement","html","align","prepareConfig","renderLayout","fragment","createDocumentFragment","items","isArray","next","_init_nav_bar","navBar","$container","querySelector","_update_nav_bar","previousNavbar","previousHeight","container","heightChanged","configChanged","newHeight","xy","nav_height","_els","get_elements","set_actions","_detachDomEvent","_init_once","isAttachedNode","root","getWindowSize","w","innerWidth","clientWidth","h","innerHeight","clientHeight","equals","listenWindowResize","oldSize","resizeDelay","newSize","updateView","addResizeListener","getComputedStyle","getPropertyValue","resizeWatcher","tabIndex","wai_aria_attributes","layout","navbar","render","header","dataArea","hasSchedulerMarkup","createDefaultHeader","views","nav","matrix","_props","_grid","names","viewName","concat","_currentDate","_obj","getElementById","offsetHeight","offsetWidth","console","wai_aria_application_role","_skin_init","_scroll","_quirks","$env","isIE","compatMode","_quirks7","appVersion","init_templates","_init_touch_events","set_sizes","min_event_height","scroll_width","scale_height","month_scale_height","menu_width","margin_top","margin_left","editor_width","month_head_height","event_header_height","edit_save","edit_cancel","bind","functor","_is_material_skin","materialScalePlaceholder","_lightbox","_setLbPosition","set_xy","scale_x","scale_s","actual_height","data_y","direction","Math","max","rtl","els","class_name","attr_value","label","labelAttr","unset_actions","_click","ondblclick","oncontextmenu","_temp_touch_block","_on_mouse_move","_ignore_next_click","_on_mouse_down","_on_mouse_up","_on_dbl_click","src","_locate_event","select","_select_id","_close_not_saved","unselect","updateEvent","getEvent","_mode","_date","min_date","_min_date","max_date","_max_date","editor_id","_edit_id","lightbox_id","_lightbox_id","new_event","_new_event","select_id","expanded","drag_id","_drag_id","drag_mode","_drag_mode","dhx_cal_data","cancelBubble","getActionData","readonly","mask","trg","dhx_cal_prev_button","dhx_cal_next_button","def_step","step","dhx_cal_today_button","dhx_cal_tab","substring","search","delete","confirm_deleting","deleteEvent","edit","save","showLightbox","_dhtmlx_confirm","opts","addEventNow","start","end","base","_isObject","_isDate","start_date","round","d","start_hour","first_hour","getHours","setHours","end_date","setTime","_loading","_drag_event","eventId","dblclick_create","details_on_dblclick","_table_view","_timed","_get_column_index","x_pos","column","_cols","_ignores","floor","_week_indexes_from_pos","pos","min","ceil","_mouse_coords","pageX","pageY","scrollLeft","clientLeft","clientTop","_colsS","$domHelpers","getAbsoluteTop","dy","time_step","_ignores_detected","preserve_length","x_step","x_unit","timestamp","confirm_closing","title_confirm_closing","positive_closing","_correct_shift","getTimezoneOffset","_is_pos_changed","old_pos","new_pos","diff","old_val","new_val","acc","abs","_drag_pos","d_pos","has_moved","len","_start_correction","_end_correction","last_hour","getMinutes","_get_fictional_event_length","_correct_drag_end_date","duration","mousedownPos","_get_date_from_pos","_drag_start","fields","timeStep","custom","time_part","_dragEventBody","_move_event_shift","_correct_drag_start_date","_event_length","resize_date","_drag_from_start","day","date_part","resize_from_start","end_day_start","end_day_date","firstHour","lastHour","maxY","minDate","maxDate","preciseDate","precisePos","cursor","shift","new_end","new_start","limit_drag_out","all_timed","_get_section_view","_get_event_sday","getView","update_render","sx","update_view","for_rendered","r","classname","drag_event_body","_lame_clone","_get_private_properties","_clear_temporary_properties","clean","flagged_event","current_state","initial","_mobile","moved","is_new","_dhx_changed","_lame_copy","edit_on_create","render_view_data","_trigger_dyn_loading","_load_mode","_load","_render_wait","_reset_ignores","isViewExists","templates","_set_aria_buttons_attrs","buttonGroups","group","j","prev","headerButtonsAttributes","oldClass","newClass","dhx_multi_day","prev_scroll","preserve_scroll","multidayScroll","_dy_shift","tabs","tab","headerToggleState","remove","_render_x_header","offset_top","head","left_border","columnHeaderText","dayHeaderAttr","_get_columns_num","from","to","count_n","_get_timeunit_start","_get_view_end","dd","ed","_calc_scale_sizes","summ","_process_ignores","realcount","scale_width","_set_scale_col_size","hour_size_px","sd","today","parseInt","scales","cls","week_date_class","dayColumnAttr","data_area","day_start","_getNavDateElement","_reset_scale","drag_resize","drag_move","_scales","week_start","scaleElement","navBarDateStr","navBarDateAttr","_render_scales","_reset_month_scale","_reset_hours_scale","multi_day","c1","visibility","totalWidth","col_length","offset","hiddenWidth","c2","cc","hourScaleAttr","scroll_hour","now_date","preserve","ign_date","_render_month_scale","view_start","cd","tdwidths","cell_width","getCellHeight","heights","cellheight","table","tableBody","rendered_dates","row_height","cell","month_date_class","format_date","body_class","head_class","monthCellAttr","cellHead","month_day","cellBody","bf1","getDate","divs","getLabel","property","updateCollection","list_name","collection","serverList","resetLightbox","hideCover","cache","Object","create","n_ev","section","_focus","_get_real_event_length","fd","ev_length","hours","start_slot","end_slot","_get_date_index","last_column","dir","per_day","days","_get_section_property","y_property","map_to","_is_initialized","_is_lightbox_open","baseVal","eventRemove","removeEventListener","isVisible","currentStyle","hiddenSection","recurringSection","_locate_css","hasNonNegativeTabIndex","isNaN","hasHref","isEnabled","input","textarea","hasAttribute","nodes","querySelectorAll","nodesArray","$position","sort","_trim","String","trim","getFullYear","getMonth","htmlTags","RegExp","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","attr","setAttributes","values","aria-label","day_date","role","isActive","aria-pressed","getHeaderCellAttr","dateString","eventAttr","_eventCommonAttr","event_text","setEventBarAttr","_getAttributes","attributeSetter","arg","eventBarAttrString","agendaHeadAttrString","agendaHeadDescriptionString","agendaHeadDateString","agendaDataAttrString","agendaEventAttrString","attrs","agendaDetailsBtnString","gridAttrString","gridRowAttrString","gridCellAttrString","mapAttrString","mapRowAttrString","mapDetailsBtnString","minicalHeader","headerId","aria-live","aria-atomic","minicalGrid","aria-labelledby","minicalRow","minicalDayCell","selected","minicalHeadCell","weekAgendaDayCell","weekAgendaEvent","lightboxHiddenAttr","lightboxVisibleAttr","tabindex","yearHeader","yearGrid","yearHeadCell","yearRow","yearDayCell","lightboxAttr","lightboxButtonAttrString","buttonName","eventMenuAttrString","iconName","lightboxHeader","headerText","lightboxSelectAttrString","time_option","month","hour","minute","buttonLabel","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","isDisabled","pop","isStringObject","Function","constructor","isNumberObject","isBooleanObject","isDate","utils","mixin","force","f","copy","Number","Boolean","getAbsoluteLeft","getOffset","getOffsetSum","elem","getOffsetRect","getBoundingClientRect","test","docElem","pageYOffset","pageXOffset","dummy","dummyBox","closest","selector","insertAfter","newNode","referenceNode","nextSibling","Element","matches","msMatchesSelector","webkitMatchesSelector","nodeType","isIE6","isIE7","isIE8","isOpera","isKHTML","isFF","isIPad","isEdge","tagname","xhr","first","ownerDocument","_call","onLoad","put","postData","del","getLong","postLong","longParams","isQt","getTime","generateStringToDate","format","utc","splt","s","month_short","month_short_hash","_bind_host_object","setMinutes","setSeconds","setMilliseconds","getDay","start_on_monday","month_start","setDate","year_start","setMonth","_add_days","inc","ndate","datesDiff","rest","to_fixed","num","date_to_str","str_to_date","exactFormat","isMDYDate","datestr","MMddyyyyhhIIss","isDMYDate","ddMMyyyyhhIIss","isISO8601","ISO8601","parseYMD","parseMDY","parseDMY","parse_exact_format","getISOWeek","isYMDDate","parseExactFormat","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","day_full","day_short","day_tab","week_tab","month_tab","icon_save","icon_cancel","icon_edit","icon_delete","section_description","section_time","full_day","confirm_recurring","section_recurring","button_recurring","button_recurring_open","button_edit_series","button_edit_occurrence","agenda_tab","description","year_tab","week_agenda_tab","grid_tab","drag_to_create","drag_to_move","repeat_radio_day","repeat_radio_week","repeat_radio_month","repeat_radio_year","repeat_radio_day_type","repeat_text_day_count","repeat_radio_day_type2","repeat_text_week_count","repeat_radio_month_type","repeat_radio_month_start","repeat_text_month_day","repeat_text_month_count","repeat_text_month_count2_before","repeat_text_month_count2_after","repeat_year_label","select_year_day2","repeat_text_year_day","select_year_month","repeat_radio_end","repeat_text_occurences_count","repeat_radio_end2","month_for_recurring","day_for_recurring","default_date","month_date","load_date","week_date","hour_date","date_format","api_date","drag_create","details_on_create","resize_month_events","resize_month_timed","responsive_lightbox","cascade_event_display","cascade_event_count","cascade_event_margin","multi_day_height_limit","drag_lightbox","server_utc","touch","touch_tip","touch_drag","quick_info_detached","drag_highlight","icons_edit","icons_select","buttons_left","buttons_right","lightbox","sections","highlight_displayed_event","delay_render","$inital","_helpers","parseDate","xml_date","parse_date","formatDate","xml_format","dhx_save_btn","dhx_cancel_btn","d1","d2","day_scale_date","month_scale_date","week_scale_date","time_picker","event_date","load_format","event_header","event_class","event_bar_date","event_bar_text","month_events_link","drag_marker_class","drag_marker_content","tooltip_date_format","tooltip_text","_events","clearAll","_loaded","clear_view","extra_data","event_duration","isOneDayEvent","event_updated","setEvent","hash","_rendered","changeEventId","new_id","create_getter","create_setter","is_visible_events","clear_event","evFirstHour","evLastHour","checkEndDate","get_visible_events","only_timed","filter_event","filter","_is_main_area_event","evs","hold","full","_not_render","_recalculate_timed","tvs","tvd","_rendered_location","render_data","buffer","renderedLocation","_view_month_day","_render_month_link","toRender","_sday","_eday","curr","_sweek","getEvents","_get_event_bar_pos","widt","x2","_pre_render_events","containers","render_event_bar","max_evs","max_month_events","locate_holder","real","render_event","_get_first_visible_cell","cells","hb","bar_height","h_old","_pre_render_events_line","_pre_render_events_table","evl","cellHeight","cHeight","unshift","scale_settings","sum_width","row_heights","scroll_fix","full_multi_day_height","used_multi_day_height","used_multi_day_height_css","multi_day_section","multi_day_icon","overflowY","datePart","_get_event_mapped_end_date","separate_short_events","ev_duration","_min_mapped_duration","evs_originals","sh","eh","_inner","t_end_date","slot_index","sorderSet","t_ev","_sorder","_is_sorder","k","_max_sorder","max_count","_count","_copy_event","_time_order","_is_any_multiday_cell_visible","isAnyCellVisible","checkDate","noCells","lastDayEnd","cellIndex","locate_holder_day","weekCellIndex","weeks","chunks_info","first_chunk","last_chunk","chunk_info","locate_s","locate_e","_length","stack_line","_first_chunk","_last_chunk","_copy_dummy","_y_from_date","sm","_calc_event_y","min_height","em","parentWidth","menu","menu_offset","pos_y","ev_count","ev_sorder","margin","right","_render_v_bar","_text_style","zIndex","color","backgroundColor","tplClass","cssText","_editor","shiftKey","icons","icons_str","bg_color","textColor","ariaAttr","highlightEventPosition","contentA","contentB","bottom","cs","cse","inner_html","headerWidth","bodyWidth","bodyHeight","footer_class","_drag_resize","footerWidth","renderEvent","past","_get_dnd_order","order","ev_height","max_height","_orig_sorder","evTop","columns","y_event_offset","resize_handle","resizable","left_chunk","right_chunk","resize_left","resize_right","timed","strict","charAt","_edit_stop_event","getRenderedEvent","rendered_events","rendered_event","showEvent","original_color","original_text_color","displayed_event_color","displayed_event_text_color","restoreOriginalColors","section_delimiter","posFromSection","posFromDate","dx","_smartRenderingEnabled","handlerId","scrollTo","_append_drag_marker","m","zone","scale","lastChild","previousSibling","size","_update_marker_position","_load_url","prevent_cache","ajaxCallback","response","on_load","lf","cache_line","temp_to","_parsers","canParse","topElement","loader","csrfToken","itms","itm","udx","_xmlNodeToJSON","ud","_userdata","_init_event","json","events","dhx_security","collections","collections_loaded","option","option_key","ical","c_start","c_end","incoming","event_r","e_start","e_end","exec","param","param_r","parse_param","dh","dm","utcMark","dn","UTC","foundParser","_process","_process_loading","_after_call","_tagvalue","_init_date","load","setLoadMode","array","child","show_loading","_x","_y","_lightbox_controls","formSection","getLightbox","getValue","form_blocks","get_value","setValue","set_value","get_template_control","control","get_select_control","get_textarea_control","get_time_control","template","time","sns","defaults","defaultHeight","_get_input","_dhx_onchange","onchange","options","time_format","_time_format_order","cfg","dt","last","limit_time_select","p","selectBoxClass","range","start_year","end_year","year_range","month_full","tdate","_time_values","ariaAttrs","_full_day","wide_form","checked","disabled","_fill_lightbox_select","auto_end_date","_update_lightbox_select","time_values","direct_value","fixed_value","value_found","t_v","selectedIndex","original","viewHeight","showCover","show_cover","_fill_lightbox","lightbox_header","headerContent","headerDate","headerTitle","current_sns","_get_lightbox_section_node","block","default_value","_lightbox_out","_empty_lightbox","hide_lightbox","endLightbox","hide_cover","_cover","save_lightbox","startLightbox","_custom_lightbox","_temp_lightbox","cancel_lightbox","hideLightbox","_init_lightbox_events","title_confirm_deleting","index","sec","button_click","buttonTarget","setLightboxSize","con","lightbox_additional_height","_init_dnd_events","_move_while_dnd","_finish_dnd","_dnd_start_lb","dhx_unselectable","lb","_lb_start","now","_ready_to_dnd","recurring","_lightbox_template","lightboxSectionButtonAttrString","label_name","ds","t_ds","_bindLightboxLabels","labelBlock","inputBlock","fallback","inputId","old_id","touchEventsSupported","createEvent","_touch_events","touches","PointerEvent","pointerEnabled","pointerType","MSPOINTER_TYPE_MOUSE","accessor","tracker","timer","scroll_mode","action_mode","dblclicktime","attachTouchEvent","passive","check_direction_swipe","s_ev","e_ev","max_dy","scrollable","doMouseMove","original_render","_update_global_tip","_pointerDragId","pointerId","fake_event","_block_next_stop","actTask","activeElement","fakeTask","sourceTask","_show_global_tip","drag_cancel","_hide_global_tip","toptip","_global_tip","dp","_dp_change_event_id","_dp_hook_delete","_validId","prefix","serializeJSON","_update_callback","upd","_add_rec_marker","_set_event_text_style","rec_type","rec_pattern","getRootView","hooks","didInsert","cmp","use_select_menu_space","_skin_xy","skin","checkIfMaterialSkin","calculatedMaterial","probe","cachedBorderBoxValue","checkIfBorderBoxStyling","boxSizing","refreshAfterLoad","_border_box_events","oldStyling","_configure","links","href","set","defaultButtonsLeft","defaultButtonsRight","tmp","week_agenda_scale_height","map_icon_width","_skin_settings","hour_scale","minic","minicalendar","padding","old_month_day","_old_month_day","navline_divs","minical","positions","jQuery","$","counter","methods","fn","dhx_scheduler","each","comp","update_view_timer","curr_view_timer","lazy_setCurrentView","oldDate","oldMode","updateFlags","lazy_updateView","ars","_internal_id","$syncFactory","attaches","attachScheduler","_genStr","attachObject","vs","av","sched","schedId","_viewRestore"],"mappings":"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","sourcesContent":["/*\n\n@license\ndhtmlxScheduler v.5.3.13 Standard\r\n\r\nTo use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com\r\n\r\n(c) XB Software Ltd.\r\n\n*/\n(function () {\r\n\tif (!window.dhtmlx) {\r\n\twindow.dhtmlx = function (obj) {\r\n\t\tfor (var a in obj) dhtmlx[a] = obj[a];\r\n\t\treturn dhtmlx; //simple singleton\r\n\t};\r\n}\r\n\r\ndhtmlx.extend_api = function (name, map, ext) {\r\n\tvar t = window[name];\r\n\tif (!t) return; //component not defined\r\n\twindow[name] = function (obj) {\r\n\t\tvar that;\r\n\r\n\t\tif (obj && typeof obj == \"object\" && !obj.tagName) {\r\n\t\t\tthat = t.apply(this, (map._init ? map._init(obj) : arguments));\r\n\t\t\t//global settings\r\n\t\t\tfor (var a in dhtmlx)\r\n\t\t\t\tif (map[a]) this[map[a]](dhtmlx[a]);\r\n\t\t\t//local settings\r\n\t\t\tfor (var a in obj) {\r\n\t\t\t\tif (map[a]) this[map[a]](obj[a]);\r\n\t\t\t\telse if (a.indexOf(\"on\") === 0) {\r\n\t\t\t\t\tthis.attachEvent(a, obj[a]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tthat = t.apply(this, arguments);\r\n\t\tif (map._patch) map._patch(this);\r\n\t\treturn that || this;\r\n\t};\r\n\twindow[name].prototype = t.prototype;\r\n\tif (ext)\r\n\t\tdhtmlXHeir(window[name].prototype, ext);\r\n};\r\n\r\n// TODO: remove\r\nwindow.dhtmlxAjax = {\r\n\tget: function (url, callback) {\r\n\t\tvar t = new dtmlXMLLoaderObject(true);\r\n\t\tt.async = (arguments.length < 3);\r\n\t\tt.waitCall = callback;\r\n\t\tt.loadXML(url);\r\n\t\treturn t;\r\n\t},\r\n\tpost: function (url, post, callback) {\r\n\t\tvar t = new dtmlXMLLoaderObject(true);\r\n\t\tt.async = (arguments.length < 4);\r\n\t\tt.waitCall = callback;\r\n\t\tt.loadXML(url, true, post);\r\n\t\treturn t;\r\n\t},\r\n\tgetSync: function (url) {\r\n\t\treturn this.get(url, null, true);\r\n\t},\r\n\tpostSync: function (url, post) {\r\n\t\treturn this.post(url, post, null, true);\r\n\t}\r\n};\r\n\r\n\r\n// TODO: remove\r\n/**\r\n *\t @desc: xmlLoader object\r\n\t*\t @type: private\r\n\t*\t @param: funcObject - xml parser function\r\n\t*\t @param: object - jsControl object\r\n\t*\t @param: async - sync/async mode (async by default)\r\n\t*\t @param: rSeed - enable/disable random seed ( prevent IE caching)\r\n\t*\t @topic: 0\r\n\t*/\r\nfunction dtmlXMLLoaderObject(funcObject, dhtmlObject, async, rSeed) {\r\n\tthis.xmlDoc = \"\";\r\n\r\n\tif (typeof (async) != \"undefined\")\r\n\t\tthis.async = async;\r\n\telse\r\n\t\tthis.async = true;\r\n\r\n\tthis.onloadAction = funcObject || null;\r\n\tthis.mainObject = dhtmlObject || null;\r\n\tthis.waitCall = null;\r\n\tthis.rSeed = rSeed || false;\r\n\treturn this;\r\n}\r\n\r\nwindow.dtmlXMLLoaderObject = dtmlXMLLoaderObject;\r\n\r\ndtmlXMLLoaderObject.count = 0;\r\n\r\n/**\r\n *\t @desc: xml loading handler\r\n\t*\t @type: private\r\n\t*\t @param: dtmlObject - xmlLoader object\r\n\t*\t @topic: 0\r\n\t*/\r\ndtmlXMLLoaderObject.prototype.waitLoadFunction = function (dhtmlObject) {\r\n\tvar once = true;\r\n\tthis.check = function () {\r\n\t\tif ((dhtmlObject) && (dhtmlObject.onloadAction)) {\r\n\t\t\tif ((!dhtmlObject.xmlDoc.readyState) || (dhtmlObject.xmlDoc.readyState == 4)) {\r\n\t\t\t\tif (!once)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tonce = false; //IE 5 fix\r\n\t\t\t\tdtmlXMLLoaderObject.count++;\r\n\t\t\t\tif (typeof dhtmlObject.onloadAction == \"function\")\r\n\t\t\t\t\tdhtmlObject.onloadAction(dhtmlObject.mainObject, null, null, null, dhtmlObject);\r\n\r\n\t\t\t\tif (dhtmlObject.waitCall) {\r\n\t\t\t\t\tdhtmlObject.waitCall.call(this, dhtmlObject);\r\n\t\t\t\t\tdhtmlObject.waitCall = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn this.check;\r\n};\r\n\r\n/**\r\n *\t @desc: return XML top node\r\n\t*\t @param: tagName - top XML node tag name (not used in IE, required for Safari and Mozilla)\r\n\t*\t @type: private\r\n\t*\t @returns: top XML node\r\n\t*\t @topic: 0\r\n\t*/\r\ndtmlXMLLoaderObject.prototype.getXMLTopNode = function (tagName, oldObj) {\r\n\tvar z;\r\n\r\n\tif (this.xmlDoc.responseXML) {\r\n\t\tvar temp = this.xmlDoc.responseXML.getElementsByTagName(tagName);\r\n\t\tif (temp.length === 0 && tagName.indexOf(\":\") != -1)\r\n\t\t\tvar temp = this.xmlDoc.responseXML.getElementsByTagName((tagName.split(\":\"))[1]);\r\n\t\tz = temp[0];\r\n\t} else\r\n\t\tz = this.xmlDoc.documentElement;\r\n\r\n\tif (z) {\r\n\t\tthis._retry = false;\r\n\t\treturn z;\r\n\t}\r\n\r\n\tif (!this._retry && _isIE) {\r\n\t\tthis._retry = true;\r\n\t\tvar oldObj = this.xmlDoc;\r\n\t\tthis.loadXMLString(this.xmlDoc.responseText.replace(/^[\\s]+/, \"\"), true);\r\n\t\treturn this.getXMLTopNode(tagName, oldObj);\r\n\t}\r\n\r\n\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\r\n\t\t(oldObj || this.xmlDoc),\r\n\t\tthis.mainObject\r\n\t]);\r\n\r\n\treturn document.createElement(\"div\");\r\n};\r\n\r\n/**\r\n *\t @desc: load XML from string\r\n\t*\t @type: private\r\n\t*\t @param: xmlString - xml string\r\n\t*\t @topic: 0\r\n\t*/\r\ndtmlXMLLoaderObject.prototype.loadXMLString = function (xmlString, silent) {\r\n\r\n\tif (!_isIE) {\r\n\t\tvar parser = new DOMParser();\r\n\t\tthis.xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\r\n\t} else {\r\n\t\tthis.xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\tthis.xmlDoc.async = this.async;\r\n\t\tthis.xmlDoc.onreadystatechange = function () { };\r\n\t\tthis.xmlDoc[\"loadXM\" + \"L\"](xmlString);\r\n\t}\r\n\r\n\tif (silent)\r\n\t\treturn;\r\n\r\n\tif (this.onloadAction)\r\n\t\tthis.onloadAction(this.mainObject, null, null, null, this);\r\n\r\n\tif (this.waitCall) {\r\n\t\tthis.waitCall();\r\n\t\tthis.waitCall = null;\r\n\t}\r\n};\r\n/**\r\n *\t @desc: load XML\r\n\t*\t @type: private\r\n\t*\t @param: filePath - xml file path\r\n\t*\t @param: postMode - send POST request\r\n\t*\t @param: postVars - list of vars for post request\r\n\t*\t @topic: 0\r\n\t*/\r\ndtmlXMLLoaderObject.prototype.loadXML = function (filePath, postMode, postVars, rpc) {\r\n\tif (this.rSeed)\r\n\t\tfilePath += ((filePath.indexOf(\"?\") != -1) ? \"&\" : \"?\") + \"a_dhx_rSeed=\" + (new Date()).valueOf();\r\n\tthis.filePath = filePath;\r\n\r\n\tif ((!_isIE) && (window.XMLHttpRequest))\r\n\t\tthis.xmlDoc = new XMLHttpRequest();\r\n\telse {\r\n\t\tthis.xmlDoc = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t}\r\n\r\n\tif (this.async)\r\n\t\tthis.xmlDoc.onreadystatechange = new this.waitLoadFunction(this);\r\n\tif (typeof postMode == \"string\")\r\n\t\tthis.xmlDoc.open(postMode, filePath, this.async);\r\n\telse\r\n\t\tthis.xmlDoc.open(postMode ? \"POST\" : \"GET\", filePath, this.async);\r\n\r\n\tif (rpc) {\r\n\t\tthis.xmlDoc.setRequestHeader(\"User-Agent\", \"dhtmlxRPC v0.1 (\" + navigator.userAgent + \")\");\r\n\t\tthis.xmlDoc.setRequestHeader(\"Content-type\", \"text/xml\");\r\n\t}\r\n\r\n\telse if (postMode)\r\n\t\tthis.xmlDoc.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n\r\n\tthis.xmlDoc.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\tthis.xmlDoc.send(null || postVars);\r\n\r\n\tif (!this.async)\r\n\t\t(new this.waitLoadFunction(this))();\r\n};\r\n/**\r\n *\t @desc: destructor, cleans used memory\r\n\t*\t @type: private\r\n\t*\t @topic: 0\r\n\t*/\r\ndtmlXMLLoaderObject.prototype.destructor = function () {\r\n\tthis._filterXPath = null;\r\n\tthis._getAllNamedChilds = null;\r\n\tthis._retry = null;\r\n\tthis.async = null;\r\n\tthis.rSeed = null;\r\n\tthis.filePath = null;\r\n\tthis.onloadAction = null;\r\n\tthis.mainObject = null;\r\n\tthis.xmlDoc = null;\r\n\tthis.doXPath = null;\r\n\tthis.doXPathOpera = null;\r\n\tthis.doXSLTransToObject = null;\r\n\tthis.doXSLTransToString = null;\r\n\tthis.loadXML = null;\r\n\tthis.loadXMLString = null;\r\n\t// this.waitLoadFunction = null;\r\n\tthis.doSerialization = null;\r\n\tthis.xmlNodeToJSON = null;\r\n\tthis.getXMLTopNode = null;\r\n\tthis.setXSLParamValue = null;\r\n\treturn null;\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype.xmlNodeToJSON = function (node) {\r\n\tvar t = {};\r\n\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\tt[\"_tagvalue\"] = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\tvar name = node.childNodes[i].tagName;\r\n\t\tif (name) {\r\n\t\t\tif (!t[name]) t[name] = [];\r\n\t\t\tt[name].push(this.xmlNodeToJSON(node.childNodes[i]));\r\n\t\t}\r\n\t}\r\n\treturn t;\r\n};\r\n\r\nfunction dhtmlDragAndDropObject() {\r\n\tif (window.dhtmlDragAndDrop)\r\n\t\treturn window.dhtmlDragAndDrop;\r\n\r\n\tthis.lastLanding = 0;\r\n\tthis.dragNode = 0;\r\n\tthis.dragStartNode = 0;\r\n\tthis.dragStartObject = 0;\r\n\tthis.tempDOMU = null;\r\n\tthis.tempDOMM = null;\r\n\tthis.waitDrag = 0;\r\n\twindow.dhtmlDragAndDrop = this;\r\n\r\n\treturn this;\r\n}\r\n\r\nwindow.dhtmlDragAndDropObject = dhtmlDragAndDropObject;\r\n\r\ndhtmlDragAndDropObject.prototype.removeDraggableItem = function (htmlNode) {\r\n\thtmlNode.onmousedown = null;\r\n\thtmlNode.dragStarter = null;\r\n\thtmlNode.dragLanding = null;\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.addDraggableItem = function (htmlNode, dhtmlObject) {\r\n\thtmlNode.onmousedown = this.preCreateDragCopy;\r\n\thtmlNode.dragStarter = dhtmlObject;\r\n\tthis.addDragLanding(htmlNode, dhtmlObject);\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.addDragLanding = function (htmlNode, dhtmlObject) {\r\n\thtmlNode.dragLanding = dhtmlObject;\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.preCreateDragCopy = function (e) {\r\n\tif ((e || window.event) && (e || event).button == 2)\r\n\t\treturn;\r\n\r\n\tif (window.dhtmlDragAndDrop.waitDrag) {\r\n\t\twindow.dhtmlDragAndDrop.waitDrag = 0;\r\n\t\tdocument.body.onmouseup = window.dhtmlDragAndDrop.tempDOMU;\r\n\t\tdocument.body.onmousemove = window.dhtmlDragAndDrop.tempDOMM;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (window.dhtmlDragAndDrop.dragNode)\r\n\t\twindow.dhtmlDragAndDrop.stopDrag(e);\r\n\r\n\twindow.dhtmlDragAndDrop.waitDrag = 1;\r\n\twindow.dhtmlDragAndDrop.tempDOMU = document.body.onmouseup;\r\n\twindow.dhtmlDragAndDrop.tempDOMM = document.body.onmousemove;\r\n\twindow.dhtmlDragAndDrop.dragStartNode = this;\r\n\twindow.dhtmlDragAndDrop.dragStartObject = this.dragStarter;\r\n\tdocument.body.onmouseup = window.dhtmlDragAndDrop.preCreateDragCopy;\r\n\tdocument.body.onmousemove = window.dhtmlDragAndDrop.callDrag;\r\n\twindow.dhtmlDragAndDrop.downtime = new Date().valueOf();\r\n\r\n\r\n\tif ((e) && (e.preventDefault)) {\r\n\t\te.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.callDrag = function (e) {\r\n\tif (!e)\r\n\t\te = window.event;\r\n\tvar dragger = window.dhtmlDragAndDrop;\r\n\tif ((new Date()).valueOf() - dragger.downtime < 100) return;\r\n\r\n\t//if ((e.button == 0)&&(_isIE))\r\n\t//\treturn dragger.stopDrag();\r\n\r\n\tif (!dragger.dragNode) {\r\n\t\tif (dragger.waitDrag) {\r\n\t\t\tdragger.dragNode = dragger.dragStartObject._createDragNode(dragger.dragStartNode, e);\r\n\r\n\t\t\tif (!dragger.dragNode)\r\n\t\t\t\treturn dragger.stopDrag();\r\n\r\n\t\t\tdragger.dragNode.onselectstart = function () { return false; };\r\n\t\t\tdragger.gldragNode = dragger.dragNode;\r\n\t\t\tdocument.body.appendChild(dragger.dragNode);\r\n\t\t\tdocument.body.onmouseup = dragger.stopDrag;\r\n\t\t\tdragger.waitDrag = 0;\r\n\t\t\tdragger.dragNode.pWindow = window;\r\n\t\t\tdragger.initFrameRoute();\r\n\t\t}\r\n\t\telse return dragger.stopDrag(e, true);\r\n\t}\r\n\r\n\tif (dragger.dragNode.parentNode != window.document.body && dragger.gldragNode) {\r\n\t\tvar grd = dragger.gldragNode;\r\n\r\n\t\tif (dragger.gldragNode.old)\r\n\t\t\tgrd = dragger.gldragNode.old;\r\n\r\n\t\t//if (!document.all) dragger.calculateFramePosition();\r\n\t\tgrd.parentNode.removeChild(grd);\r\n\t\tvar oldBody = dragger.dragNode.pWindow;\r\n\r\n\t\tif (grd.pWindow && grd.pWindow.dhtmlDragAndDrop.lastLanding)\r\n\t\t\tgrd.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(grd.pWindow.dhtmlDragAndDrop.lastLanding);\r\n\r\n\t\t//\t\tvar oldp=dragger.dragNode.parentObject;\r\n\t\tif (_isIE) {\r\n\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\tdiv.innerHTML = dragger.dragNode.outerHTML;\r\n\t\t\tdragger.dragNode = div.childNodes[0];\r\n\t\t} else\r\n\t\t\tdragger.dragNode = dragger.dragNode.cloneNode(true);\r\n\r\n\t\tdragger.dragNode.pWindow = window;\r\n\t\t//\t\tdragger.dragNode.parentObject=oldp;\r\n\r\n\t\tdragger.gldragNode.old = dragger.dragNode;\r\n\t\tdocument.body.appendChild(dragger.dragNode);\r\n\t\toldBody.dhtmlDragAndDrop.dragNode = dragger.dragNode;\r\n\t}\r\n\r\n\tdragger.dragNode.style.left = e.clientX + 15 +\r\n\t\t(dragger.fx ? dragger.fx * (-1) : 0) +\r\n\t\t(document.body.scrollLeft || document.documentElement.scrollLeft) + \"px\";\r\n\tdragger.dragNode.style.top = e.clientY + 3 +\r\n\t\t(dragger.fy ? dragger.fy * (-1) : 0) +\r\n\t\t(document.body.scrollTop || document.documentElement.scrollTop) + \"px\";\r\n\r\n\tvar z;\r\n\tif (!e.srcElement)\r\n\t\tz = e.target;\r\n\telse\r\n\t\tz = e.srcElement;\r\n\tdragger.checkLanding(z, e);\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.calculateFramePosition = function (n) {\r\n\t//this.fx = 0, this.fy = 0;\r\n\tif (window.name) {\r\n\t\tvar el = parent.frames[window.name].frameElement.offsetParent;\r\n\t\tvar fx = 0;\r\n\t\tvar fy = 0;\r\n\r\n\t\twhile (el) {\r\n\t\t\tfx += el.offsetLeft;\r\n\t\t\tfy += el.offsetTop;\r\n\t\t\tel = el.offsetParent;\r\n\t\t}\r\n\r\n\t\tif ((parent.dhtmlDragAndDrop)) {\r\n\t\t\tvar ls = parent.dhtmlDragAndDrop.calculateFramePosition(1);\r\n\t\t\tfx += ls.split('_')[0] * 1;\r\n\t\t\tfy += ls.split('_')[1] * 1;\r\n\t\t}\r\n\r\n\t\tif (n)\r\n\t\t\treturn fx + \"_\" + fy;\r\n\t\telse\r\n\t\t\tthis.fx = fx;\r\n\t\tthis.fy = fy;\r\n\t}\r\n\treturn \"0_0\";\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.checkLanding = function (htmlObject, e) {\r\n\tif ((htmlObject) && (htmlObject.dragLanding)) {\r\n\t\tif (this.lastLanding)\r\n\t\t\tthis.lastLanding.dragLanding._dragOut(this.lastLanding);\r\n\t\tthis.lastLanding = htmlObject;\r\n\t\tthis.lastLanding = this.lastLanding.dragLanding._dragIn(this.lastLanding, this.dragStartNode, e.clientX,\r\n\t\t\te.clientY, e);\r\n\t\tthis.lastLanding_scr = (_isIE ? e.srcElement : e.target);\r\n\t} else {\r\n\t\tif ((htmlObject) && (htmlObject.tagName != \"BODY\"))\r\n\t\t\tthis.checkLanding(htmlObject.parentNode, e);\r\n\t\telse {\r\n\t\t\tif (this.lastLanding)\r\n\t\t\t\tthis.lastLanding.dragLanding._dragOut(this.lastLanding, e.clientX, e.clientY, e);\r\n\t\t\tthis.lastLanding = 0;\r\n\r\n\t\t\tif (this._onNotFound)\r\n\t\t\t\tthis._onNotFound();\r\n\t\t}\r\n\t}\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.stopDrag = function (e, mode) {\r\n\tvar dragger = window.dhtmlDragAndDrop;\r\n\r\n\tif (!mode) {\r\n\t\tdragger.stopFrameRoute();\r\n\t\tvar temp = dragger.lastLanding;\r\n\t\tdragger.lastLanding = null;\r\n\r\n\t\tif (temp)\r\n\t\t\ttemp.dragLanding._drag(dragger.dragStartNode, dragger.dragStartObject, temp,\r\n\t\t\t\t(_isIE ? event.srcElement : e.target));\r\n\t}\r\n\tdragger.lastLanding = null;\r\n\r\n\tif ((dragger.dragNode) && (dragger.dragNode.parentNode == document.body))\r\n\t\tdragger.dragNode.parentNode.removeChild(dragger.dragNode);\r\n\tdragger.dragNode = 0;\r\n\tdragger.gldragNode = 0;\r\n\tdragger.fx = 0;\r\n\tdragger.fy = 0;\r\n\tdragger.dragStartNode = 0;\r\n\tdragger.dragStartObject = 0;\r\n\tdocument.body.onmouseup = dragger.tempDOMU;\r\n\tdocument.body.onmousemove = dragger.tempDOMM;\r\n\tdragger.tempDOMU = null;\r\n\tdragger.tempDOMM = null;\r\n\tdragger.waitDrag = 0;\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.stopFrameRoute = function (win) {\r\n\tif (win)\r\n\t\twindow.dhtmlDragAndDrop.stopDrag(1, 1);\r\n\r\n\tfor (var i = 0; i < window.frames.length; i++) {\r\n\t\ttry {\r\n\t\t\tif ((window.frames[i] != win) && (window.frames[i].dhtmlDragAndDrop))\r\n\t\t\t\twindow.frames[i].dhtmlDragAndDrop.stopFrameRoute(window);\r\n\t\t} catch (e) { }\r\n\t}\r\n\r\n\ttry {\r\n\t\tif ((parent.dhtmlDragAndDrop) && (parent != window) && (parent != win))\r\n\t\t\tparent.dhtmlDragAndDrop.stopFrameRoute(window);\r\n\t} catch (e) { }\r\n};\r\n\r\ndhtmlDragAndDropObject.prototype.initFrameRoute = function (win, mode) {\r\n\tif (win) {\r\n\t\twindow.dhtmlDragAndDrop.preCreateDragCopy();\r\n\t\twindow.dhtmlDragAndDrop.dragStartNode = win.dhtmlDragAndDrop.dragStartNode;\r\n\t\twindow.dhtmlDragAndDrop.dragStartObject = win.dhtmlDragAndDrop.dragStartObject;\r\n\t\twindow.dhtmlDragAndDrop.dragNode = win.dhtmlDragAndDrop.dragNode;\r\n\t\twindow.dhtmlDragAndDrop.gldragNode = win.dhtmlDragAndDrop.dragNode;\r\n\t\twindow.document.body.onmouseup = window.dhtmlDragAndDrop.stopDrag;\r\n\t\twindow.waitDrag = 0;\r\n\r\n\t\tif (((!_isIE) && (mode)) && ((!_isFF) || (_FFrv < 1.8)))\r\n\t\t\twindow.dhtmlDragAndDrop.calculateFramePosition();\r\n\t}\r\n\ttry {\r\n\t\tif ((parent.dhtmlDragAndDrop) && (parent != window) && (parent != win))\r\n\t\t\tparent.dhtmlDragAndDrop.initFrameRoute(window);\r\n\t} catch (e) { }\r\n\r\n\tfor (var i = 0; i < window.frames.length; i++) {\r\n\t\ttry {\r\n\t\t\tif ((window.frames[i] != win) && (window.frames[i].dhtmlDragAndDrop))\r\n\t\t\t\twindow.frames[i].dhtmlDragAndDrop.initFrameRoute(window, ((!win || mode) ? 1 : 0));\r\n\t\t} catch (e) { }\r\n\t}\r\n};\r\n\r\nvar _isFF = false;\r\nvar _isIE = false;\r\nvar _isOpera = false;\r\nvar _isKHTML = false;\r\nvar _isMacOS = false;\r\nvar _isChrome = false;\r\nvar _FFrv = false;\r\nvar _KHTMLrv = false;\r\nvar _OperaRv = false;\r\n\r\nif (navigator.userAgent.indexOf('Macintosh') != -1)\r\n\t_isMacOS = true;\r\n\r\n\r\nif (navigator.userAgent.toLowerCase().indexOf('chrome') > -1)\r\n\t_isChrome = true;\r\n\r\nif ((navigator.userAgent.indexOf('Safari') != -1) || (navigator.userAgent.indexOf('Konqueror') != -1)) {\r\n\t_KHTMLrv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Safari') + 7, 5));\r\n\r\n\tif (_KHTMLrv > 525) { //mimic FF behavior for Safari 3.1+\r\n\t\t_isFF = true;\r\n\t\t_FFrv = 1.9;\r\n\t} else\r\n\t\t_isKHTML = true;\r\n} else if (navigator.userAgent.indexOf('Opera') != -1) {\r\n\t_isOpera = true;\r\n\t_OperaRv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Opera') + 6, 3));\r\n}\r\n\r\n\r\nelse if (navigator.appName.indexOf(\"Microsoft\") != -1) {\r\n\t_isIE = true;\r\n\tif ((navigator.appVersion.indexOf(\"MSIE 8.0\") != -1 || navigator.appVersion.indexOf(\"MSIE 9.0\") != -1 || navigator.appVersion.indexOf(\"MSIE 10.0\") != -1) && document.compatMode != \"BackCompat\") {\r\n\t\t_isIE = 8;\r\n\t}\r\n} else if (navigator.appName == 'Netscape' && navigator.userAgent.indexOf(\"Trident\") != -1) {\r\n\t//ie11\r\n\t_isIE = 8;\r\n} else {\r\n\t_isFF = true;\r\n\t_FFrv = parseFloat(navigator.userAgent.split(\"rv:\")[1]);\r\n}\r\n\r\n\r\n//multibrowser Xpath processor\r\ndtmlXMLLoaderObject.prototype.doXPath = function (xpathExp, docObj, namespace, result_type) {\r\n\tif (_isKHTML || (!_isIE && !window.XPathResult))\r\n\t\treturn this.doXPathOpera(xpathExp, docObj);\r\n\r\n\tif (_isIE) { //IE\r\n\t\tif (!docObj)\r\n\t\t\tif (!this.xmlDoc.nodeName)\r\n\t\t\t\tdocObj = this.xmlDoc.responseXML;\r\n\t\t\telse\r\n\t\t\t\tdocObj = this.xmlDoc;\r\n\r\n\t\tif (!docObj)\r\n\t\t\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\r\n\t\t\t\t(docObj || this.xmlDoc),\r\n\t\t\t\tthis.mainObject\r\n\t\t\t]);\r\n\r\n\t\tif (namespace)\r\n\t\t\tdocObj.setProperty(\"SelectionNamespaces\", \"xmlns:xsl='\" + namespace + \"'\"); //\r\n\r\n\t\tif (result_type == 'single') {\r\n\t\t\treturn docObj.selectSingleNode(xpathExp);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn docObj.selectNodes(xpathExp) || new Array(0);\r\n\t\t}\r\n\t} else { //Mozilla\r\n\t\tvar nodeObj = docObj;\r\n\r\n\t\tif (!docObj) {\r\n\t\t\tif (!this.xmlDoc.nodeName) {\r\n\t\t\t\tdocObj = this.xmlDoc.responseXML;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdocObj = this.xmlDoc;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!docObj)\r\n\t\t\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\r\n\t\t\t\t(docObj || this.xmlDoc),\r\n\t\t\t\tthis.mainObject\r\n\t\t\t]);\r\n\r\n\t\tif (docObj.nodeName.indexOf(\"document\") != -1) {\r\n\t\t\tnodeObj = docObj;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnodeObj = docObj;\r\n\t\t\tdocObj = docObj.ownerDocument;\r\n\t\t}\r\n\t\tvar retType = XPathResult.ANY_TYPE;\r\n\r\n\t\tif (result_type == 'single')\r\n\t\t\tretType = XPathResult.FIRST_ORDERED_NODE_TYPE;\r\n\t\tvar rowsCol = [];\r\n\t\tvar col = docObj.evaluate(xpathExp, nodeObj, function (pref) {\r\n\t\t\treturn namespace;\r\n\t\t}, retType, null);\r\n\r\n\t\tif (retType == XPathResult.FIRST_ORDERED_NODE_TYPE) {\r\n\t\t\treturn col.singleNodeValue;\r\n\t\t}\r\n\t\tvar thisColMemb = col.iterateNext();\r\n\r\n\t\twhile (thisColMemb) {\r\n\t\t\trowsCol[rowsCol.length] = thisColMemb;\r\n\t\t\tthisColMemb = col.iterateNext();\r\n\t\t}\r\n\t\treturn rowsCol;\r\n\t}\r\n};\r\n\r\nfunction _dhtmlxError(type, name, params) {\r\n\tif (!this.catches)\r\n\t\tthis.catches = [];\r\n\r\n\treturn this;\r\n}\r\n\r\n_dhtmlxError.prototype.catchError = function (type, func_name) {\r\n\tthis.catches[type] = func_name;\r\n};\r\n\r\n_dhtmlxError.prototype.throwError = function (type, name, params) {\r\n\tif (this.catches[type])\r\n\t\treturn this.catches[type](type, name, params);\r\n\r\n\tif (this.catches[\"ALL\"])\r\n\t\treturn this.catches[\"ALL\"](type, name, params);\r\n\r\n\twindow.alert(\"Error type: \" + arguments[0] + \"\\nDescription: \" + arguments[1]);\r\n\treturn null;\r\n};\r\n\r\nwindow.dhtmlxError = new _dhtmlxError();\r\n\r\n\r\n//opera fake, while 9.0 not released\r\n//multibrowser Xpath processor\r\ndtmlXMLLoaderObject.prototype.doXPathOpera = function (xpathExp, docObj) {\r\n\t//this is fake for Opera\r\n\tvar z = xpathExp.replace(/[\\/]+/gi, \"/\").split('/');\r\n\tvar obj = null;\r\n\tvar i = 1;\r\n\r\n\tif (!z.length)\r\n\t\treturn [];\r\n\r\n\tif (z[0] == \".\")\r\n\t\tobj = [docObj]; else if (z[0] === \"\") {\r\n\t\t\tobj = (this.xmlDoc.responseXML || this.xmlDoc).getElementsByTagName(z[i].replace(/\\[[^\\]]*\\]/g, \"\"));\r\n\t\t\ti++;\r\n\t\t} else\r\n\t\treturn [];\r\n\r\n\tfor (i; i < z.length; i++)obj = this._getAllNamedChilds(obj, z[i]);\r\n\r\n\tif (z[i - 1].indexOf(\"[\") != -1)\r\n\t\tobj = this._filterXPath(obj, z[i - 1]);\r\n\treturn obj;\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype._filterXPath = function (a, b) {\r\n\tvar c = [];\r\n\tvar b = b.replace(/[^\\[]*\\[\\@/g, \"\").replace(/[\\[\\]\\@]*/g, \"\");\r\n\r\n\tfor (var i = 0; i < a.length; i++)\r\n\t\tif (a[i].getAttribute(b))\r\n\t\t\tc[c.length] = a[i];\r\n\r\n\treturn c;\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype._getAllNamedChilds = function (a, b) {\r\n\tvar c = [];\r\n\r\n\tif (_isKHTML)\r\n\t\tb = b.toUpperCase();\r\n\r\n\tfor (var i = 0; i < a.length; i++)for (var j = 0; j < a[i].childNodes.length; j++) {\r\n\t\tif (_isKHTML) {\r\n\t\t\tif (a[i].childNodes[j].tagName && a[i].childNodes[j].tagName.toUpperCase() == b)\r\n\t\t\t\tc[c.length] = a[i].childNodes[j];\r\n\t\t}\r\n\r\n\t\telse if (a[i].childNodes[j].tagName == b)\r\n\t\t\tc[c.length] = a[i].childNodes[j];\r\n\t}\r\n\r\n\treturn c;\r\n};\r\n\r\nfunction dhtmlXHeir(a, b) {\r\n\tfor (var c in b)\r\n\t\tif (typeof (b[c]) == \"function\")\r\n\t\t\ta[c] = b[c];\r\n\treturn a;\r\n}\r\n\r\nif (typeof (window.dhtmlxEvent) == 'undefined') {\r\n\twindow.dhtmlxEvent = function dhtmlxEvent(el, event, handler) {\r\n\t\tif (el.addEventListener)\r\n\t\t\tel.addEventListener(event, handler, false);\r\n\r\n\t\telse if (el.attachEvent)\r\n\t\t\tel.attachEvent(\"on\" + event, handler);\r\n\t};\r\n}\r\n\r\n//============= XSL Extension ===================================\r\n\r\ndtmlXMLLoaderObject.prototype.xslDoc = null;\r\ndtmlXMLLoaderObject.prototype.setXSLParamValue = function (paramName, paramValue, xslDoc) {\r\n\tif (!xslDoc)\r\n\t\txslDoc = this.xslDoc;\r\n\r\n\tif (xslDoc.responseXML)\r\n\t\txslDoc = xslDoc.responseXML;\r\n\tvar item =\r\n\t\tthis.doXPath(\"/xsl:stylesheet/xsl:variable[@name='\" + paramName + \"']\", xslDoc,\r\n\t\t\t\"http:/\\/www.w3.org/1999/XSL/Transform\", \"single\");\r\n\r\n\tif (item)\r\n\t\titem.firstChild.nodeValue = paramValue;\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype.doXSLTransToObject = function (xslDoc, xmlDoc) {\r\n\tif (!xslDoc)\r\n\t\txslDoc = this.xslDoc;\r\n\r\n\tif (xslDoc.responseXML)\r\n\t\txslDoc = xslDoc.responseXML;\r\n\r\n\tif (!xmlDoc)\r\n\t\txmlDoc = this.xmlDoc;\r\n\r\n\tif (xmlDoc.responseXML)\r\n\t\txmlDoc = xmlDoc.responseXML;\r\n\r\n\r\n\tvar result;\r\n\t//Mozilla\r\n\tif (!_isIE) {\r\n\t\tif (!this.XSLProcessor) {\r\n\t\t\tthis.XSLProcessor = new XSLTProcessor();\r\n\t\t\tthis.XSLProcessor.importStylesheet(xslDoc);\r\n\t\t}\r\n\t\tresult = this.XSLProcessor.transformToDocument(xmlDoc);\r\n\t} else {\r\n\t\tresult = new ActiveXObject(\"Msxml2.DOMDocument.3.0\");\r\n\t\ttry {\r\n\t\t\txmlDoc.transformNodeToObject(xslDoc, result);\r\n\t\t} catch (e) {\r\n\t\t\tresult = xmlDoc.transformNode(xslDoc);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype.doXSLTransToString = function (xslDoc, xmlDoc) {\r\n\tvar res = this.doXSLTransToObject(xslDoc, xmlDoc);\r\n\tif (typeof (res) == \"string\")\r\n\t\treturn res;\r\n\treturn this.doSerialization(res);\r\n};\r\n\r\ndtmlXMLLoaderObject.prototype.doSerialization = function (xmlDoc) {\r\n\tif (!xmlDoc)\r\n\t\txmlDoc = this.xmlDoc;\r\n\tif (xmlDoc.responseXML)\r\n\t\txmlDoc = xmlDoc.responseXML;\r\n\tif (!_isIE) {\r\n\t\tvar xmlSerializer = new XMLSerializer();\r\n\t\treturn xmlSerializer.serializeToString(xmlDoc);\r\n\t} else\r\n\t\treturn xmlDoc.xml;\r\n};\r\n\r\n/**\r\n *   @desc:\r\n *   @type: private\r\n */\r\nwindow.dhtmlxEventable = function (obj) {\r\n\tobj.attachEvent = function (name, catcher, callObj) {\r\n\t\tname = 'ev_' + name.toLowerCase();\r\n\t\tif (!this[name])\r\n\t\t\tthis[name] = new this.eventCatcher(callObj || this);\r\n\r\n\t\treturn (name + ':' + this[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.callEvent = function (name, arg0) {\r\n\t\tname = 'ev_' + name.toLowerCase();\r\n\t\tif (this[name])\r\n\t\t\treturn this[name].apply(this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent = function (name) {\r\n\t\treturn (!!this['ev_' + name.toLowerCase()]);\r\n\t};\r\n\tobj.eventCatcher = function (obj) {\r\n\t\tvar dhx_catch = [];\r\n\t\tvar z = function () {\r\n\t\t\tvar res = true;\r\n\t\t\tfor (var i = 0; i < dhx_catch.length; i++) {\r\n\t\t\t\tif (dhx_catch[i]) {\r\n\t\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\t\tres = res && zr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\t\tz.addEvent = function (ev) {\r\n\t\t\tif (typeof (ev) != \"function\")\r\n\t\t\t\tev = eval(ev);\r\n\t\t\tif (ev)\r\n\t\t\t\treturn dhx_catch.push(ev) - 1;\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tz.removeEvent = function (id) {\r\n\t\t\tdhx_catch[id] = null;\r\n\t\t};\r\n\t\treturn z;\r\n\t};\r\n\tobj.detachEvent = function (id) {\r\n\t\tif (id) {\r\n\t\t\tvar list = id.split(':');//get EventName and ID\r\n\t\t\tthis[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function () {\r\n\t\tfor (var name in this) {\r\n\t\t\tif (name.indexOf(\"ev_\") === 0) {\r\n\t\t\t\tthis.detachEvent(name);\r\n\t\t\t\tthis[name] = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tobj = null;\r\n};\r\nif(!window.dhtmlx)\r\n\twindow.dhtmlx = {};\r\n\r\n(function(){\r\n\tvar _dhx_msg_cfg = null;\r\n\tfunction callback(config, result){\r\n\t\tsetTimeout(function(){\r\n\t\t\tif(!config.box) return;\r\n\r\n\t\t\tvar usercall = config.callback;\r\n\t\t\tmodality(false);\r\n\t\t\tconfig.box.parentNode.removeChild(config.box);\r\n\t\t\tdhtmlx.callEvent(\"onAfterMessagePopup\", [config.box]);\r\n\t\t\t_dhx_msg_cfg = config.box = null;\r\n\r\n\t\t\tif (usercall)\r\n\t\t\t\tusercall(result);\r\n\t\t},1);\r\n\t}\r\n\r\n\tfunction modal_key(e){\r\n\t\tif (_dhx_msg_cfg){\r\n\t\t\te = e||event;\r\n\t\t\tvar code = e.which||event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (dhtmlx.message.keyboard){\r\n\t\t\t\tif (code == 13 || code == 32){\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif(scheduler._getClassName(target).indexOf(\"dhtmlx_popup_button\") > -1 && target.click){\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27){\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(preventDefault){\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (document.attachEvent)\r\n\t\tdocument.attachEvent(\"onkeydown\", modal_key);\r\n\telse\r\n\t\tdocument.addEventListener(\"keydown\", modal_key, true);\r\n\t\t\r\n\tfunction modality(mode){\r\n\t\tif(!modality.cover){\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height =  document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode?\"inline-block\":\"none\";\r\n\t}\r\n\r\n\tfunction button(text, result, css){\r\n\t\tvar buttonAriaAttrs = scheduler._waiAria.messageButtonAttrString(text);\r\n\t\t// css - for locale-independent class name\r\n\t\tvar className = css ? css : (text || \"\");\r\n\t\tvar button_css = \"dhtmlx_\"+(className).toLowerCase().replace(/ /g, \"_\")+\"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \"+buttonAriaAttrs+\"class='dhtmlx_popup_button \"+button_css+\"' result='\"+result+\"' ><div>\"+text+\"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text){\r\n\t\tif (!t.area){\r\n\t\t\tt.area = document.createElement(\"div\");\r\n\t\t\tt.area.className = \"dhtmlx_message_area\";\r\n\t\t\tt.area.style[t.position]=\"5px\";\r\n\t\t\tdocument.body.appendChild(t.area);\r\n\t\t}\r\n\r\n\t\tt.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\"+text.text+\"</div>\";\r\n\t\tmessage.className = \"dhtmlx-info dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function(){\r\n\t\t\tt.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tscheduler._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (t.position == \"bottom\" && t.area.firstChild)\r\n\t\t\tt.area.insertBefore(message,t.area.firstChild);\r\n\t\telse\r\n\t\t\tt.area.appendChild(message);\r\n\t\t\r\n\t\tif (text.expire > 0)\r\n\t\t\tt.timers[text.id]=window.setTimeout(function(){\r\n\t\t\t\tt.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tt.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\tfunction _boxStructure(config, ok, cancel){\r\n\t\tvar box = document.createElement(\"div\");\r\n\t\tbox.className = \" dhtmlx_modal_box dhtmlx-\"+config.type;\r\n\t\tbox.setAttribute(\"dhxbox\", 1);\r\n\r\n\t\tvar contentId = scheduler.uid();\r\n\t\tscheduler._waiAria.messageModalAttr(box, contentId);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tvar hasTitle = false;\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title) {\r\n\t\t\tinner += '<div class=\"dhtmlx_popup_title\" id=\"'+contentId+'\">' + config.title + '</div>';\r\n\t\t\thasTitle = true;\r\n\t\t}\r\n\r\n\t\tinner+='<div class=\"dhtmlx_popup_text\" '+(!hasTitle ? ' id=\"'+contentId+'\" ' : \"\")+'><span>'+(config.content?'':config.text)+'</span></div><div  class=\"dhtmlx_popup_controls\">';\r\n\t\tif (ok){\r\n\t\t\tvar ok_text = (config.ok || scheduler.locale.labels.message_ok);\r\n\t\t\t//default value for compatibility with custom locales some people have\r\n\t\t\tif(ok_text === undefined) ok_text = \"OK\";\r\n\t\t\tinner += button(ok_text, true, \"ok\");\r\n\t\t}\r\n\t\tif (cancel){\r\n\t\t\tvar cancel_text = (config.cancel || scheduler.locale.labels.message_cancel);\r\n\t\t\tif(cancel_text === undefined) cancel_text = \"Cancel\";\r\n\t\t\tinner += button(cancel_text, false, \"cancel\");\r\n\t\t}\r\n\t\tif (config.buttons){\r\n\t\t\tfor (var i=0; i<config.buttons.length; i++)\r\n\t\t\t\tinner += button(config.buttons[i],i);\r\n\t\t}\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content){\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\") \r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title?1:0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function(e){\r\n\t\t\te = e ||event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tvar className = scheduler._getClassName(source);\r\n\t\t\tif (!className) source = source.parentNode;\r\n\r\n\t\t\tclassName = scheduler._getClassName(source);\r\n\r\n\t\t\tif (className.split(\" \")[0] == \"dhtmlx_popup_button\"){\r\n\t\t\t\tvar result = source.getAttribute(\"result\");\r\n\t\t\t\tresult = (result == \"true\")||(result == \"false\"?false:result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\t//if (ok||cancel)\r\n\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\tfunction _createBox(config, ok, cancel){\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\t\t\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth) - box.offsetWidth)/2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight) - box.offsetHeight)/2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y+'px';\r\n\t\tbox.style.left = x+'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tdhtmlx.modalbox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tdhtmlx.modalbox.hide(box);\r\n\r\n\t\tdhtmlx.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config){\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\tfunction confirmPopup(config){\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\tfunction boxPopup(config){\r\n\t\treturn _createBox(config);\r\n\t}\r\n\tfunction box_params(text, type, callback){\r\n\t\tif (typeof text != \"object\"){\r\n\t\t\tif (typeof type == \"function\"){\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text:text, type:type, callback:callback };\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\tfunction params(text, type, expire, id){\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text:text, type:type, expire:expire, id:id};\r\n\t\ttext.id = text.id||t.uid();\r\n\t\ttext.expire = text.expire||t.expire;\r\n\t\treturn text;\r\n\t}\r\n\tdhtmlx.alert = function(){\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tdhtmlx.confirm = function(){\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tdhtmlx.modalbox = function(){\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tdhtmlx.modalbox.hide = function(node){\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(\"dhxbox\"))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\t\t}\r\n\t};\r\n\r\n\tdhtmlx.modalbox.focus = function(node){\r\n\t\tsetTimeout(function(){\r\n\t\t\tvar focusable = scheduler._getFocusableNodes(node);\r\n\t\t\tif(focusable.length){\r\n\t\t\t\tif(focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar t = dhtmlx.message = function(text, type, expire, id){\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type||\"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype){\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tt.seed = (new Date()).valueOf();\r\n\tt.uid = function(){return t.seed++;};\r\n\tt.expire = 4000;\r\n\tt.keyboard = true;\r\n\tt.position = \"top\";\r\n\tt.pull = {};\r\n\tt.timers = {};\r\n\r\n\tt.hideAll = function(){\r\n\t\tfor (var key in t.pull)\r\n\t\t\tt.hide(key);\r\n\t};\r\n\tt.hide = function(id){\r\n\t\tvar obj = t.pull[id];\r\n\t\tif (obj && obj.parentNode){\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t},2000);\r\n\t\t\tobj.className+=\" hidden\";\r\n\t\t\t\r\n\t\t\tif(t.timers[id])\r\n\t\t\t\twindow.clearTimeout(t.timers[id]);\r\n\t\t\tdelete t.pull[id];\r\n\t\t}\r\n\t};\r\n})();\r\nif(!dhtmlx.attachEvent){\r\n\tdhtmlxEventable(dhtmlx);\r\n}\r\n/**\r\n *\t@desc: constructor, data processor object\r\n *\t@param: serverProcessorURL - url used for update\r\n *\t@type: public\r\n */\r\nvar dataProcessor = window.dataProcessor = function (serverProcessorURL) {\r\n\tthis.serverProcessor = serverProcessorURL;\r\n\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode = \"GET\";\r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\r\n\tthis._waitMode = 0;\r\n\tthis._in_progress = {};//?\r\n\tthis._invalid = {};\r\n\tthis.mandatoryFields = [];\r\n\tthis.messages = [];\r\n\r\n\tthis.styles = {\r\n\t\tupdated: \"font-weight:bold;\",\r\n\t\tinserted: \"font-weight:bold;\",\r\n\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\terror: \"color:red;\",\r\n\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t};\r\n\r\n\tthis.enableUTFencoding(true);\r\n\tdhtmlxEventable(this);\r\n\r\n\treturn this;\r\n};\r\n\r\ndataProcessor.prototype = {\r\n\tsetTransactionMode: function (mode, total) {\r\n\t\tif (typeof mode == \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (mode.headers !== undefined) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (mode.payload !== undefined) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tvar contentType = \"Content-Type\";\r\n\r\n\t\tfunction hasContentType(headers, contentType){\r\n\t\t\tvar match = contentType.toLowerCase();\r\n\t\t\tfor(var i in headers){\r\n\t\t\t\tif(i.toLowerCase() === match){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[contentType] = \"application/json\";\r\n\t\t}\r\n\r\n\t\tif(this._headers && !hasContentType(this._headers, contentType)){\r\n\t\t\tthis._headers[contentType] = \"application/x-www-form-urlencoded\";\r\n\t\t}\r\n\t},\r\n\tescape: function (data) {\r\n\t\tif (this._utf)\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\telse\r\n\t\t\treturn escape(data);\r\n\t},\r\n\t/**\r\n\t *\t@desc: allows to set escaping mode\r\n\t *\t@param: true - utf based escaping, simple - use current page encoding\r\n\t *\t@type: public\r\n\t */\r\n\tenableUTFencoding: function (mode) {\r\n\t\tthis._utf = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: allows to define, which column may trigger update\r\n\t *\t@param: val - array or list of true/false values\r\n\t *\t@type: public\r\n\t */\r\n\tsetDataColumns: function (val) {\r\n\t\tthis._columns = (typeof val == \"string\") ? val.split(\",\") : val;\r\n\t},\r\n\t/**\r\n\t *\t@desc: get state of updating\r\n\t *\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t *\t@type: public\r\n\t */\r\n\tgetSyncState: function () {\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t *\t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t *\t@param:   mode - true/false\r\n\t *\t@type: public\r\n\t */\r\n\tenableDataNames: function (mode) {\r\n\t\tthis._endnm = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t *\t@param:   mode - true/false\r\n\t *\t@type: public\r\n\t */\r\n\tenablePartialDataSend: function (mode) {\r\n\t\tthis._changed = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: set if rows should be send to server automaticaly\r\n\t *\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t *\t@type: public\r\n\t */\r\n\tsetUpdateMode: function (mode, dnd) {\r\n\t\tthis.autoUpdate = (mode == \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t},\r\n\tignore: function (code, master) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t},\r\n\t/**\r\n\t *\t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t *\t@param: rowId - id of row to set update-status for\r\n\t *\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t *\t@param: mode - update mode name\r\n\t *\t@type: public\r\n\t */\r\n\tsetUpdated: function (rowId, state, mode) {\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId, this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode = existing;\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.obj.setUserData(rowId, this.action_param, mode);\r\n\t\t\tif (this._in_progress[rowId])\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.obj.setUserData(rowId, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag: function (id) {\r\n\t},\r\n\tmarkRow: function (id, state, mode) {\r\n\t\tvar str = \"\";\r\n\t\tvar invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t//default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + str;\r\n\r\n\t\t\tthis.obj[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (var i = 0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n\t\t\t\t\t\tthis.obj[this._methods[1]](id, i, str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState: function (id) {\r\n\t\treturn this.obj.getUserData(id, this.action_param);\r\n\t},\r\n\tis_invalid: function (id) {\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid: function (id, mode, details) {\r\n\t\tif (details) mode = {\r\n\t\t\tvalue: mode, details: details, toString: function () {\r\n\t\t\t\treturn this.value.toString();\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis._invalid[id] = mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t *\t@param: rowId - id of row to set update-status for\r\n\t *\t@type: public\r\n\t */\r\n\tcheckBeforeUpdate: function (rowId) {\r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t *\t@desc: send row(s) values to server\r\n\t *\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t *\t@type: public\r\n\t */\r\n\tsendData: function (rowId) {\r\n\t\tif (this._waitMode && (this.obj.mytype == \"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\r\n\r\n\t\tif (typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t},\r\n\t_beforeSendData: function (data, rowId) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) return false;\r\n\t\tthis._sendData(data, rowId);\r\n\t},\r\n\tserialize: function (data, id) {\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tif (typeof id != \"undefined\")\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\telse {\r\n\t\t\tvar stack = [];\r\n\t\t\tvar keys = [];\r\n\t\t\tfor (var key in data)\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this.post_delim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (scheduler.security_key || dhtmlx.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\" + (scheduler.security_key || dhtmlx.security_key));\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t},\r\n\tserialize_one: function (data, pref) {\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tvar stack = [];\r\n\t\tfor (var key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(data[key]));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t},\r\n\t_applyPayload: function (url) {\r\n\t\tvar ajax = this.obj.$ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n\t_sendData: function (a1, rowId) {\r\n\t\tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), a1] : [null, null, a1])) return false;\r\n\r\n\t\tif (rowId)\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function (xml) {\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that, xml, ids);\r\n\t\t};\r\n\t\tvar ajax = this.obj.$ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.obj.getUserData(0, \"version\")].join(\"&\")) : \"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode == \"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\") {\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tcallback: back,\r\n\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (this._tMode == \"REST\") {\r\n\t\t\tvar state = this.getState(rowId);\r\n\t\t\tvar url = a3.replace(/(\\&|\\?)editing\\=true/, \"\");\r\n\t\t\tvar data = \"\";\r\n\t\t\tvar method = \"post\";\r\n\r\n\t\t\tif (state == \"inserted\") {\r\n\t\t\t\tdata = this.serialize(a1, rowId);\r\n\t\t\t} else if (state == \"deleted\") {\r\n\t\t\t\tmethod = \"DELETE\";\r\n\t\t\t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t} else {\r\n\t\t\t\tmethod = \"PUT\";\r\n\t\t\t\tdata = this.serialize(a1, rowId);\r\n\t\t\t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t}\r\n\r\n\r\n\t\t\turl = this._applyPayload(url);\r\n\t\t\tajax.query({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: data,\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t},\r\n\tsendAllData: function () {\r\n\t\tif (!this.updatedRows.length) return;\r\n\r\n\t\tthis.messages = [];\r\n\t\tvar valid = true;\r\n\t\tfor (var i = 0; i < this.updatedRows.length; i++)\r\n\t\t\tvalid &= this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) return false;\r\n\r\n\t\tif (this._tSend)\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i = 0; i < this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]) {\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]), this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype == \"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData: function (rowId) {\r\n\t\tvar out = {};\r\n\t\tvar has_one = false;\r\n\t\tfor (var i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tvar id = this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) continue;\r\n\t\t\tout[id] = row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one ? out : null;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t *\t@desc: specify column which value should be varified before sending to server\r\n\t *\t@param: ind - column index (0 based)\r\n\t *\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t *\t@type: public\r\n\t */\r\n\tsetVerificator: function (ind, verifFunction) {\r\n\t\tthis.mandatoryFields[ind] = verifFunction || (function (value) {\r\n\t\t\treturn (value !== \"\");\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t *\t@desc: remove column from list of those which should be verified\r\n\t *\t@param: ind - column Index (0 based)\r\n\t *\t@type: public\r\n\t */\r\n\tclearVerificator: function (ind) {\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\r\n\r\n\tfindRow: function (pattern) {\r\n\t\tvar i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++)\r\n\t\t\tif (pattern == this.updatedRows[i]) break;\r\n\t\treturn i;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t *\t@desc: define custom actions\r\n\t *\t@param: name - name of action, same as value of action attribute\r\n\t *\t@param: handler - custom function, which receives a XMl response content for action\r\n\t *\t@type: private\r\n\t */\r\n\tdefineAction: function (name, handler) {\r\n\t\tif (!this._uActions) this._uActions = [];\r\n\t\tthis._uActions[name] = handler;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t *\t @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t *\t @param: sid - id of item before update\r\n\t *\t @param: tid - id of item after up0ate\r\n\t *\t @param: action - action name\r\n\t *\t @type: public\r\n\t *\t @topic: 0\r\n\t */\r\n\tafterUpdateCallback: function (sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct = (action != \"error\" && action != \"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid, action);\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker] != \"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid, tid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] != \"wait\") {\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param, '');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.obj.getUserData(sid, this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t_errorResponse: function (xml, id){\r\n\t\tif(this.obj && this.obj.callEvent){\r\n\t\t\tthis.obj.callEvent(\"onSaveError\", [id, xml.xmlDoc]);\r\n\t\t}\r\n\t\treturn this.cleanUpdate(id);\r\n\t},\r\n\r\n\t/**\r\n\t *\t@desc: response from server\r\n\t *\t@param: xml - XMLLoader object with response XML\r\n\t *\t@type: private\r\n\t */\r\n\tafterUpdate: function (that, xml, id) {\r\n\t\tvar ajax = this.obj.$ajax;\r\n\r\n\t\tif (xml.xmlDoc.status !== 200){\r\n\t\t\tthis._errorResponse(xml, id);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//try to use json first\r\n\t\tif (window.JSON) {\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch (e) {\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tag) {\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this._errorResponse(xml, id);\r\n\t\tvar atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) this._errorResponse(xml, id);\r\n\r\n\t\tfor (var i = 0; i < atag.length; i++) {\r\n\t\t\tvar btag = atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate: function (id) {\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate: function () {\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\r\n\t\tif ((this.obj.mytype == \"tree\" || this.obj._h2) && this.updatedRows.length)\r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t *\t@desc: initializes data-processor\r\n\t *\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t *\t@type: public\r\n\t */\r\n\tinit: function (anObj) {\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init)\r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\r\n\r\n\tsetOnAfterUpdate: function (ev) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", ev);\r\n\t},\r\n\tenableDebug: function (mode) {\r\n\t},\r\n\tsetOnBeforeUpdateHandler: function (func) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", func);\r\n\t},\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function (interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", function (sid, action, tid, xml_node) {\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\", function () {\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function () {\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function (sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function () {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function (url, callback) {\r\n\t\tvar ajax = this.obj.$ajax;\r\n\t\tif (this._update_busy)\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function (node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function (arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tres[i] = this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function () {\r\n\t\tvar ajax = this.obj.$ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0, \"version\");\r\n\t\tvar url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, function (xml) {\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0, \"version\", self._v(vers[0]));\r\n\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length) {\r\n\t\t\t\tself._silent_mode = true;\r\n\r\n\t\t\t\tfor (var i = 0; i < upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t}\r\n};\r\n\r\n//(c)dhtmlx ltd. www.dhtmlx.com\r\nif (window.dataProcessor && !dataProcessor.prototype.init_original){\r\n\tdataProcessor.prototype.init_original=dataProcessor.prototype.init;\r\n\tdataProcessor.prototype.init=function(obj){\r\n\t\tthis.init_original(obj);\r\n\t\tobj._dataprocessor=this;\r\n\r\n\t\tthis.setTransactionMode(\"POST\",true);\r\n\t\tthis.serverProcessor+=(this.serverProcessor.indexOf(\"?\")!=-1?\"&\":\"?\")+\"editing=true\";\r\n\t};\r\n}\r\n\r\ndhtmlxError.catchError(\"LoadXML\", function(a, b, c){\r\n\tvar message = c[0].responseText;\r\n\r\n\tswitch (scheduler.config.ajax_error){\r\n\t\tcase \"alert\":\r\n\t\t\twindow.alert(message);\r\n\t\t\tbreak;\r\n\t\tcase \"console\":\r\n\t\t\twindow.console.log(message);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n});\r\n\r\n\r\nvar Scheduler = { _seed: 0 };\r\nScheduler.plugin = function (code) {\r\n\tthis._schedulerPlugins.push(code);\r\n\tcode(window.scheduler);\r\n};\r\nScheduler._schedulerPlugins = [];\r\nScheduler.getSchedulerInstance = function () {\r\n\tvar scheduler = { version: \"5.3.13\" };\r\n\r\nvar commonViews = {\r\n\tagenda: \"https://docs.dhtmlx.com/scheduler/agenda_view.html\",\r\n\tgrid: \"https://docs.dhtmlx.com/scheduler/grid_view.html\",\r\n\tmap: \"https://docs.dhtmlx.com/scheduler/map_view.html\",\r\n\tunit: \"https://docs.dhtmlx.com/scheduler/units_view.html\",\r\n\ttimeline: \"https://docs.dhtmlx.com/scheduler/timeline_view.html\",\r\n\tweek_agenda: \"https://docs.dhtmlx.com/scheduler/weekagenda_view.html\",\r\n\tyear: \"https://docs.dhtmlx.com/scheduler/year_view.html\",\r\n\tanythingElse: \"https://docs.dhtmlx.com/scheduler/views.html\"\r\n};\r\n\r\nvar requiredExtensions = {\r\n\tagenda: \"ext/dhtmlxscheduler_agenda_view.js\",\r\n\tgrid: \"ext/dhtmlxscheduler_grid_view.js\",\r\n\tmap: \"ext/dhtmlxscheduler_map_view.js\",\r\n\tunit: \"ext/dhtmlxscheduler_units.js\",\r\n\ttimeline: \"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js\",\r\n\tweek_agenda: \"ext/dhtmlxscheduler_week_agenda.js\",\r\n\tyear: \"ext/dhtmlxscheduler_year_view.js\",\r\n\tlimit: \"ext/dhtmlxscheduler_limit.js\",\r\n};\r\n\r\nscheduler._commonErrorMessages = {\r\n\tunknownView: function(view){\r\n\t\tvar relatedDoc = \"Related docs: \" + (commonViews[view] || commonViews.anythingElse); \r\n\t\tvar relatedExtension = requiredExtensions[view] ? (\"You're probably missing \" + requiredExtensions[view] + \".\") : \"\";\r\n\t\treturn (\r\n\t\t\t\"`\"+view+\"` view is not defined. \\n\" +\r\n\t\t\t\"Please check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \\n\" + \r\n\t\t\trelatedDoc + \"\\n\" + (relatedExtension ? (relatedExtension + \"\\n\") : \"\"));\r\n\t},\r\n\tcollapsedContainer: function(div){\r\n\t\treturn \"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \\n\"+\r\n\t\t\"Make sure that the container has some initial height or use different units. For example:\\n\" +\r\n\t\t\"<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \\n\";\r\n\t}\r\n};\r\n\r\nscheduler.createTimelineView = function() {\r\n\tthrow new Error(\"scheduler.createTimelineView is not implemented. Be sure to add the required extension: \" + requiredExtensions.timeline + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.timeline);\r\n};\r\n\r\nscheduler.createUnitsView = function() {\r\n\tthrow new Error(\"scheduler.createUnitsView is not implemented. Be sure to add the required extension: \" + requiredExtensions.unit + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.unit);\r\n};\r\n\r\nscheduler.createGridView = function() {\r\n\tthrow new Error(\"scheduler.createGridView is not implemented. Be sure to add the required extension: \" + requiredExtensions.grid + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.grid);\r\n};\r\n\r\nscheduler.addMarkedTimespan = function() {\r\n\tthrow new Error(\"scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\" + \r\n\t\"\\n\" +\r\n\t\"Related docs: https://docs.dhtmlx.com/scheduler/limits.html\");\r\n};\r\n\r\nscheduler.renderCalendar = function() {\r\n\tthrow new Error(\"scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\" + \r\n\t\"\\n\" +\r\n\t\"https://docs.dhtmlx.com/scheduler/minicalendar.html\");\r\n};\r\n\r\nscheduler.exportToPNG = function() {\r\n\tthrow new Error([\r\n\t\t\"scheduler.exportToPNG is not implemented.\",\r\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html\",\r\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\r\n\t].join(\"\\n\"));\r\n};\r\n\r\nscheduler.exportToPDF = function() {\r\n\tthrow new Error([\r\n\t\t\"scheduler.exportToPDF is not implemented.\",\r\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html\",\r\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\r\n\t].join(\"\\n\"));\r\n};\r\n\r\ndhtmlxEventable(scheduler);\r\n\r\nfunction div(className){\r\n\tvar element = document.createElement(\"div\");\r\n\tvar classes = (className || \"\").split(\" \");\r\n\tclasses.forEach(function(cssClass){\r\n\t\telement.classList.add(cssClass);\r\n\t});\r\n\treturn element;\r\n}\r\nvar itemTypes = {\r\n\trows_container: function(){\r\n\t\treturn div(\"dhx_cal_navbar_rows_container\");\r\n\t},\r\n\trow: function(){\r\n\t\treturn div(\"dhx_cal_navbar_row\");\r\n\t},\r\n\tview: function (config) {\r\n\t\tvar element = div(\"dhx_cal_tab\");\r\n\t\telement.setAttribute(\"name\", config.view + \"_tab\");\r\n\t\telement.setAttribute(\"data-viewname\", config.view );\r\n\t\tif(scheduler.config.fix_tab_position){\r\n\t\t\tif(config.$firstTab) {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_first\");\r\n\t\t\t}else if(config.$lastTab) {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_last\");\r\n\t\t\t} else if(config.view !== \"week\") {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_standalone\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn element;\r\n\t},\r\n\tdate: function () {\r\n\t\treturn div(\"dhx_cal_date\");\r\n\t},\r\n\tbutton: function (config) {\r\n\t\treturn div(\"dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab\");\r\n\t},\r\n\tbuiltInButton: function (config){\r\n\t\treturn div(\"dhx_cal_\" + config.view + \"_button dhx_cal_nav_button\");\r\n\t},\r\n\tspacer: function () {\r\n\t\treturn div(\"dhx_cal_line_spacer\");\r\n\t},\r\n\tminicalendarButton: function(config){\r\n\t\tvar minicalendarDiv = div('dhx_minical_icon');\r\n\t\tif(!config.click){\r\n\t\t\tminicalendarDiv.onclick = function () {\r\n\t\t\t\tif (scheduler.isCalendarVisible()) {\r\n\t\t\t\t\tscheduler.destroyCalendar();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscheduler.renderCalendar({\r\n\t\t\t\t\t\tposition: this,\r\n\t\t\t\t\t\tdate: scheduler.getState().date,\r\n\t\t\t\t\t\tnavigation: true,\r\n\t\t\t\t\t\thandler: function (date, calendar) {\r\n\t\t\t\t\t\t\tscheduler.setCurrentView(date);\r\n\t\t\t\t\t\t\tscheduler.destroyCalendar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn minicalendarDiv;\r\n\t},\r\n\thtml_element: function (config) {\r\n\t\treturn div(\"dhx_cal_nav_content\");\r\n\t}\r\n};\r\n\r\nfunction findRenderer(config) {\r\n\tvar renderer;\r\n\tif (config.view) {\r\n\t\tswitch (config.view){\r\n\t\t\tcase \"today\":\r\n\t\t\tcase \"next\":\r\n\t\t\tcase \"prev\":\r\n\t\t\t\trenderer = itemTypes.builtInButton;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"date\":\r\n\t\t\t\trenderer = itemTypes.date;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"spacer\":\r\n\t\t\t\trenderer = itemTypes.spacer;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"button\":\r\n\t\t\t\trenderer = itemTypes.button;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"minicalendar\":\r\n\t\t\t\trenderer = itemTypes.minicalendarButton;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\trenderer = itemTypes.view;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t} else if(config.rows) {\r\n\t\trenderer = itemTypes.rows_container;\r\n\t} else if(config.cols) {\r\n\t\trenderer = itemTypes.row;\r\n\t}\r\n\treturn renderer;\r\n}\r\n\r\nfunction renderElement(config){\r\n\tvar renderer = findRenderer(config);\r\n\tif(!renderer){\r\n\t\treturn;\r\n\t}\r\n\tvar element = renderer(config);\r\n\tif(config.css){\r\n\t\telement.classList.add(config.css);\r\n\t}\r\n\tif(config.width){\r\n\t\tvar value = config.width;\r\n\t\tif(value === value * 1){\r\n\t\t\tvalue += \"px\";\r\n\t\t}\r\n\t\telement.style.width = value;\r\n\t}\r\n\tif(config.height){\r\n\t\tvar value = config.height;\r\n\t\tif(value === value * 1){\r\n\t\t\tvalue += \"px\";\r\n\t\t}\r\n\t\telement.style.height = value;\r\n\t}\r\n\tif (config.click) {\r\n\t\telement.addEventListener(\"click\", config.click);\r\n\t}\r\n\tif (config.html) {\r\n\t\telement.innerHTML = config.html;\r\n\t}\r\n\r\n\tif (config.align) {\r\n\t\tvar value = \"\";\r\n\t\tif (config.align == \"right\") {\r\n\t\t\tvalue = \"flex-end\";\r\n\t\t} else if(config.align == \"left\") {\r\n\t\t\tvalue = \"flex-start\";\r\n\t\t}\r\n\t\telement.style.justifyContent = value;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction prepareConfig(config) {\r\n\tif (typeof config === \"string\") {\r\n\t\tconfig = {\r\n\t\t\tview: config\r\n\t\t};\r\n\t}\r\n\tif (!config.view && !config.rows && !config.cols) {\r\n\t\tconfig.view = \"button\";\r\n\t}\r\n\treturn config;\r\n}\r\n\r\nfunction renderLayout(config) {\r\n\tvar fragment = document.createDocumentFragment();\r\n\tvar items;\r\n\tif(Array.isArray(config)){\r\n\t\titems = config;\r\n\t}else{\r\n\t\titems = [config];\r\n\t}\r\n\r\n\tfor (var i = 0; i < items.length; i++) {\r\n\t\tvar view = prepareConfig(items[i]);\r\n\r\n\t\tif(view.view === \"day\" && items[i + 1]){\r\n\t\t\tvar next = prepareConfig(items[i + 1]);\r\n\t\t\tif(next.view === \"week\" || next.view === \"month\"){\r\n\t\t\t\tview.$firstTab = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(view.view === \"month\" && items[i - 1]){\r\n\t\t\tvar next = prepareConfig(items[i - 1]);\r\n\t\t\tif(next.view === \"week\" || next.view === \"day\"){\r\n\t\t\t\tview.$lastTab = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar element = renderElement(view);\r\n\r\n\t\tfragment.appendChild(element);\r\n\t\tif(view.cols || view.rows){\r\n\t\t\telement.appendChild(renderLayout(view.cols || view.rows));\r\n\t\t}\r\n\t}\r\n\treturn fragment;\r\n}\r\n\r\nscheduler._init_nav_bar = function (items) {\r\n\tvar navBar = this.$container.querySelector(\".dhx_cal_navline\");\r\n\tif (!navBar){\r\n\t\tnavBar = document.createElement(\"div\");\r\n\t\tnavBar.className = \"dhx_cal_navline dhx_cal_navline_flex\";\r\n\t\tscheduler._update_nav_bar(items, navBar);\r\n\t\treturn navBar;\r\n\t}\r\n\treturn navBar;\r\n};\r\n\r\nvar previousNavbar = null;\r\nvar previousHeight = null;\r\nscheduler._update_nav_bar = function (config, container) {\r\n\r\n\tif(!config){\r\n\t\treturn;\r\n\t}\r\n\tvar heightChanged = false;\r\n\tvar configChanged = false;\r\n\r\n\tvar newHeight = config.height || scheduler.xy.nav_height;\r\n\r\n\tif(previousHeight === null ||\r\n\t\t\t(previousHeight !== newHeight)){\r\n\t\theightChanged = true;\r\n\t}\r\n\tif(!previousNavbar || JSON.stringify(config) !== previousNavbar){\r\n\t\tconfigChanged = true;\r\n\t}\r\n\r\n\tif(heightChanged){\r\n\t\tscheduler.xy.nav_height = newHeight;\r\n\t}\r\n\tif(configChanged){\r\n\t\tcontainer.innerHTML = \"\";\r\n\t\tcontainer.appendChild(renderLayout(config));\r\n\t}\r\n\r\n\tif(heightChanged || configChanged){\r\n\t\tscheduler._els = [];\r\n\t\tscheduler.get_elements();\r\n\t\tscheduler.set_actions();\r\n\t}\r\n\r\n\tif(newHeight === 0){\r\n\t\tcontainer.style.display = \"none\";\r\n\t}else{\r\n\t\tcontainer.style.display = \"\";\r\n\t}\r\n\r\n\tpreviousHeight = newHeight;\r\n};\r\n\r\nscheduler._detachDomEvent = function(el, event, handler){\r\n\tif (el.removeEventListener){\r\n\t\tel.removeEventListener(event, handler, false);\r\n\r\n\t}else if (el.detachEvent){\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n\t}\r\n};\r\n\r\n\r\nscheduler._init_once = function(){\r\n\tfunction isAttachedNode(container){\r\n\tvar root = document.body;\r\n\r\n\twhile(container && container != root){\r\n\t\tcontainer = container.parentNode;\r\n\t}\r\n\r\n\treturn !!(root == container);\r\n}\r\n\r\nfunction getWindowSize(window){\r\n\treturn {\r\n\t\tw : window.innerWidth || document.documentElement.clientWidth,\r\n\t\th : window.innerHeight || document.documentElement.clientHeight\r\n\t};\r\n}\r\nfunction equals(a,b){\r\n\treturn a.w == b.w && a.h == b.h;\r\n}\r\n\r\nfunction listenWindowResize(scheduler, window){\r\n\tvar oldSize = getWindowSize(window);\r\n\tvar resizeDelay;\r\n\tscheduler.event(window, \"resize\", function(){\r\n\t\tclearTimeout(resizeDelay);\r\n\t\tresizeDelay = setTimeout(function(){\r\n\t\t\tif (!isAttachedNode(scheduler.$container)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar newSize = getWindowSize(window);\r\n\t\t\t// element may be resized by container-autoresize exteinsion\r\n\t\t\t// check if the size is actually changed in order to not to get endless loop\r\n\t\t\tif (!equals(oldSize, newSize)) {\r\n\t\t\t\toldSize = newSize;\r\n\t\t\t\tif (scheduler.callEvent(\"onSchedulerResize\", [])) {\r\n\t\t\t\t\tscheduler.updateView();\r\n\t\t\t\t\tscheduler.callEvent(\"onAfterSchedulerResize\", []);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 150);\r\n\t});\r\n}\r\n\r\nfunction addResizeListener(scheduler){\r\n\tvar root = scheduler.$container;\r\n\tvar containerStyles = window.getComputedStyle(root);\r\n\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\troot.style.position = \"relative\";\r\n\t}\r\n\r\n\tvar resizeWatcher = document.createElement('iframe');\r\n\tresizeWatcher.className = \"scheduler_container_resize_watcher\";\r\n\tresizeWatcher.tabIndex = -1;\r\n\tif(scheduler.config.wai_aria_attributes){\r\n\t\tresizeWatcher.setAttribute(\"role\", \"none\");\r\n\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\r\n\t}\r\n\r\n\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\r\n\troot.appendChild(resizeWatcher);\r\n\tif (resizeWatcher.contentWindow) {\r\n\t\tlistenWindowResize(scheduler, resizeWatcher.contentWindow);\r\n\t} else {\r\n\t\t// if so - ditch the iframe and fallback to listening the main window resize\r\n\t\troot.removeChild(resizeWatcher);\r\n\t\tlistenWindowResize(scheduler, window);\r\n\t}\r\n}\r\n\r\naddResizeListener(scheduler);\r\n\r\n\tscheduler._init_once = function(){};\r\n};\r\n\r\nvar layout = {\r\n\t\"navbar\": {\r\n\t\trender: function (config) {\r\n\t\t\treturn scheduler._init_nav_bar(config);\r\n\t\t}\r\n\t},\r\n\t\"header\": {\r\n\t\trender: function (config) {\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.className = \"dhx_cal_header\";\r\n\t\t\treturn element;\r\n\t\t}\r\n\t},\r\n\t\"dataArea\": {\r\n\t\trender: function (config) {\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.className = \"dhx_cal_data\";\r\n\t\t\treturn element;\r\n\t\t}\r\n\t},\r\n\t\"html_element\": {\r\n\t\trender: function (config) {\r\n\t\t\treturn config.html;\r\n\t\t}\r\n\t},\r\n};\r\n\r\nfunction hasSchedulerMarkup(element){\r\n\treturn !!(\r\n\t\telement.querySelector(\".dhx_cal_header\") &&\r\n\t\telement.querySelector(\".dhx_cal_data\") &&\r\n\t\telement.querySelector(\".dhx_cal_navline\")\r\n\t\t);\r\n}\r\n\r\nfunction createDefaultHeader(scheduler){\r\n\tvar views = [\r\n\t\t\"day\",\r\n\t\t\"week\",\r\n\t\t\"month\"\r\n\t];\r\n\tvar date = [\r\n\t\t\"date\"\r\n\t];\r\n\tvar nav = [\r\n\t\t\"prev\",\r\n\t\t\"today\",\r\n\t\t\"next\"\r\n\t];\r\n\r\n\tif(scheduler.matrix){\r\n\t\tfor(var i in scheduler.matrix){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\tif(scheduler._props){\r\n\t\tfor(var i in scheduler._props){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\r\n\tif(scheduler._grid && scheduler._grid.names){\r\n\t\tfor(var i in scheduler._grid.names){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\r\n\tvar optionalViews = [\r\n\t\t\"map\",\r\n\t\t\"agenda\",\r\n\t\t\"week_agenda\",\r\n\t\t\"year\"\r\n\t];\r\n\r\n\toptionalViews.forEach(function(viewName){\r\n\t\tif(scheduler[viewName + \"_view\"]){\r\n\t\t\tviews.push(viewName);\r\n\t\t}\r\n\t});\r\n\r\n\treturn views.concat(date).concat(nav);\r\n}\r\n\r\nscheduler.init=function(id,date,mode){\r\n\tdate=date||(scheduler._currentDate());\r\n\tmode=mode||\"week\";\r\n\r\n\tif(this._obj){\r\n\t\tthis.unset_actions();\r\n\t}\r\n\r\n\tthis._obj=(typeof id == \"string\")?document.getElementById(id):id;\r\n\tthis.$container = this._obj;\r\n\r\n\tif(!this.$container.offsetHeight && this.$container.offsetWidth && this.$container.style.height === \"100%\"){\r\n\t\t// scheduler container has zero height and non-zero width\r\n\t\twindow.console.error(scheduler._commonErrorMessages.collapsedContainer(), this.$container);\r\n\t}\r\n\r\n\tif(this.config.wai_aria_attributes && this.config.wai_aria_application_role){\r\n\t\tthis.$container.setAttribute(\"role\", \"application\");\r\n\t}\r\n\r\n\tif(!this.config.header && !hasSchedulerMarkup(this.$container)){\r\n\t\t// if no header config and no required markup - use the default header\r\n\t\t// so the scheduler could be initialized in an empty div\r\n\t\tthis.config.header = createDefaultHeader(this);\r\n\t\tconsole.log([// jshint ignore:line\r\n\t\t\t\"Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.\",\r\n\t\t\t\"Using a default header configuration: \",\r\n\t\t\t\"scheduler.config.header = \" + JSON.stringify(this.config.header, null, 2),\r\n\t\t\t\"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html\"\r\n\t\t].join(\"\\n\"));// jshint ignore:line\r\n\t}\r\n\r\n\tif (this.config.header) {\r\n\t\tthis.$container.innerHTML = \"\";\r\n\t\tthis.$container.classList.add(\"dhx_cal_container\");\r\n\t\tif(this.config.header.height){\r\n\t\t\tthis.xy.nav_height = this.config.header.height;\r\n\t\t}\r\n\t\tthis.$container.appendChild(layout.navbar.render(this.config.header));\r\n\t\tthis.$container.appendChild(layout.header.render());\r\n\t\tthis.$container.appendChild(layout.dataArea.render());\r\n\t} else {\r\n\t\t// if no header config provided - make sure scheduler container has all necessary elements\r\n\t\tif(!hasSchedulerMarkup(this.$container)){\r\n\t\t\tthrow new Error([\r\n\t\t\t\t\"Required DOM elements are missing from the scheduler container.\",\r\n\t\t\t\t\"Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup\",\r\n\t\t\t\t\"Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig\"\r\n\t\t\t].join(\"\\n\"));\r\n\t\t}\r\n\t}\r\n\r\n\tif (this.config.rtl) this.$container.className += \" dhx_cal_container_rtl\";\r\n\r\n\t//hook for terrace skin\r\n\tif (this._skin_init)\r\n\t\tscheduler._skin_init();\r\n\r\n\tscheduler.date.init();\r\n\r\n\tthis._scroll=true;\r\n\tthis._quirks=(this.$env.isIE && document.compatMode == \"BackCompat\");\r\n\tthis._quirks7=(this.$env.isIE && navigator.appVersion.indexOf(\"MSIE 8\")==-1);\r\n\r\n\tthis._els=[];\r\n\tthis.get_elements();\r\n\tthis.init_templates();\r\n\tthis.set_actions();\r\n\r\n\tthis._init_once();\r\n\tthis._init_touch_events();\r\n\r\n\tthis.set_sizes();\r\n\tscheduler.callEvent('onSchedulerReady', []);\r\n\tthis.setCurrentView(date,mode);\r\n\r\n};\r\n\r\nscheduler.xy={\r\n\tmin_event_height:40,\r\n\tscale_width:50,\r\n\tscroll_width:18,\r\n\tscale_height:20,\r\n\tmonth_scale_height:20,\r\n\tmenu_width:25,\r\n\tmargin_top:0,\r\n\tmargin_left:0,\r\n\teditor_width:140,\r\n\tmonth_head_height:22,\r\n\tevent_header_height: 14\r\n};\r\nscheduler.keys={\r\n\tedit_save:13,\r\n\tedit_cancel:27\r\n};\r\n\r\nscheduler.bind = function bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n};\r\n\r\nscheduler.set_sizes=function(){\r\n\tvar w = this._x = this._obj.clientWidth-this.xy.margin_left;\r\n\tvar h = this._y = this._obj.clientHeight-this.xy.margin_top;\r\n\r\n\t//not-table mode always has scroll - need to be fixed in future\r\n\tvar scale_x=this._table_view?0:(this.xy.scale_width+this.xy.scroll_width);\r\n\tvar scale_s=this._table_view?-1:this.xy.scale_width;\r\n\r\n\tvar materialScalePlaceholder = this.$container.querySelector(\".dhx_cal_scale_placeholder\");\r\n\tif(scheduler._is_material_skin()){\r\n\t\tif(!materialScalePlaceholder) {\r\n\t\t\tmaterialScalePlaceholder = document.createElement(\"div\");\r\n\t\t\tmaterialScalePlaceholder.className = \"dhx_cal_scale_placeholder\";\r\n\t\t\tthis.$container.insertBefore(materialScalePlaceholder, this._els[\"dhx_cal_header\"][0]);\r\n\t\t}\r\n\t\tmaterialScalePlaceholder.style.display = \"block\";\r\n\r\n\t\tthis.set_xy(materialScalePlaceholder,w,this.xy.scale_height + 1,0,this.xy.nav_height+(this._quirks?-1:1));\r\n\r\n\t}else{\r\n\t\tif(materialScalePlaceholder){\r\n\t\t\tmaterialScalePlaceholder.parentNode.removeChild(materialScalePlaceholder);\r\n\t\t}\r\n\t}\r\n\r\n\tif (this._lightbox) {\r\n\t\tif (scheduler.$container.offsetWidth  < 1200) {\r\n\t\t} else {\r\n\t\t\tthis._setLbPosition(document.querySelector(\".dhx_cal_light\"));\r\n\t\t}\r\n\t}\r\n\r\n\tthis.set_xy(this._els[\"dhx_cal_navline\"][0],w,this.xy.nav_height,0,0);\r\n\tthis.set_xy(this._els[\"dhx_cal_header\"][0],w-scale_x,this.xy.scale_height,scale_s,this.xy.nav_height+(this._quirks?-1:1));\r\n\t//to support alter-skin, we need a way to alter height directly from css\r\n\tvar actual_height = this._els[\"dhx_cal_navline\"][0].offsetHeight;\r\n\tif (actual_height > 0) this.xy.nav_height = actual_height;\r\n\r\n\tvar data_y=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);\r\n\tthis.set_xy(this._els[\"dhx_cal_data\"][0],w,h-(data_y+2),0,data_y+2);\r\n};\r\nscheduler.set_xy=function(node,w,h,x,y){\r\n\tvar direction = 'left';\r\n\tnode.style.width=Math.max(0,w)+\"px\";\r\n\tnode.style.height=Math.max(0,h)+\"px\";\r\n\tif (arguments.length>3){\r\n\t\tif (this.config.rtl) direction = 'right';\r\n\t\tnode.style[direction]=x+\"px\";\r\n\t\tnode.style.top=y+\"px\";\r\n\t}\r\n};\r\nscheduler.get_elements=function(){\r\n\t//get all child elements as named hash\r\n\tvar els=this._obj.getElementsByTagName(\"DIV\");\r\n\tfor (var i=0; i < els.length; i++){\r\n\t\tvar class_name= scheduler._getClassName(els[i]);\r\n\t\tvar attr_value = els[i].getAttribute(\"name\") || \"\";\r\n\t\tif (class_name) class_name = class_name.split(\" \")[0];\r\n\t\tif (!this._els[class_name]) this._els[class_name]=[];\r\n\t\tthis._els[class_name].push(els[i]);\r\n\r\n\t\t//check if name need to be changed\r\n\t\tvar label = scheduler.locale.labels[attr_value||class_name];\r\n\t\tif (typeof label !== \"string\" && attr_value && !els[i].innerHTML)\r\n\t\t\t label = attr_value.split(\"_\")[0];\r\n\t\tif (label) {\r\n\t\t\tthis._waiAria.labelAttr(els[i], label);\r\n\t\t\tels[i].innerHTML = label;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.unset_actions = function(){\r\n\tfor (var a in this._els)\r\n\t\tif (this._click[a])\r\n\t\t\tfor (var i=0; i < this._els[a].length; i++)\r\n\t\t\t\tthis._els[a][i].onclick = null;\r\n\tthis._obj.onselectstart = null;\r\n\tthis._obj.onmousemove = null;\r\n\tthis._obj.onmousedown = null;\r\n\tthis._obj.onmouseup = null;\r\n\tthis._obj.ondblclick = null;\r\n\tthis._obj.oncontextmenu = null;\r\n};\r\n\r\nscheduler.set_actions=function(){\r\n\tfor (var a in this._els)\r\n\t\tif (this._click[a])\r\n\t\t\tfor (var i=0; i < this._els[a].length; i++)\r\n\t\t\t\tthis._els[a][i].onclick=scheduler._click[a];\r\n\tthis._obj.onselectstart=function(e){ return false; };\r\n\tthis._obj.onmousemove=function(e){\r\n\t\tif (!scheduler._temp_touch_block)\r\n\t\t\tscheduler._on_mouse_move(e||event);\r\n\t};\r\n\tthis._obj.onmousedown=function(e){\r\n\t\tif (!scheduler._ignore_next_click)\r\n\t\t\tscheduler._on_mouse_down(e||event);\r\n\t};\r\n\tthis._obj.onmouseup=function(e){\r\n\t\tif (!scheduler._ignore_next_click)\r\n\t\t\tscheduler._on_mouse_up(e||event);\r\n\t};\r\n\tthis._obj.ondblclick=function(e){\r\n\t\tscheduler._on_dbl_click(e||event);\r\n\t};\r\n\tthis._obj.oncontextmenu = function(e) {\r\n\t\tvar ev = e||event;\r\n\t\tvar src = ev.target||ev.srcElement;\r\n\t\tvar returnValue = scheduler.callEvent(\"onContextMenu\", [scheduler._locate_event(src), ev]);\r\n\t\treturn returnValue;\r\n\t};\r\n};\r\nscheduler.select=function(id){\r\n\tif (this._select_id==id) return;\r\n\tscheduler._close_not_saved();\r\n\tthis.editStop(false);\r\n\tthis.unselect();\r\n\tthis._select_id = id;\r\n\tthis.updateEvent(id);\r\n\tthis.callEvent(\"onEventSelected\", [id]);\r\n};\r\nscheduler.unselect=function(id){\r\n\tif (id && id!=this._select_id) return;\r\n\tvar t=this._select_id;\r\n\tthis._select_id = null;\r\n\tif (t && this.getEvent(t)) this.updateEvent(t);\r\n\tthis.callEvent(\"onEventUnselected\", [t]);\r\n};\r\nscheduler.getState=function(){\r\n\treturn {\r\n\t\tmode: this._mode,\r\n\t\tdate: new Date(this._date),\r\n\t\tmin_date: new Date(this._min_date),\r\n\t\tmax_date: new Date(this._max_date),\r\n\t\teditor_id: this._edit_id,\r\n\t\tlightbox_id: this._lightbox_id,\r\n\t\tnew_event: this._new_event,\r\n\t\tselect_id: this._select_id,\r\n\t\texpanded: this.expanded,\r\n\t\tdrag_id: this._drag_id,\r\n\t\tdrag_mode: this._drag_mode\r\n\t};\r\n};\r\nscheduler._click={\r\n\tdhx_cal_data:function(e){\r\n\t\t//in case of touch disable click processing\r\n\t\tif (scheduler._ignore_next_click){\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar trg = e?e.target:event.srcElement;\r\n\t\tvar id = scheduler._locate_event(trg);\r\n\r\n\t\te = e || event;\r\n\r\n\t\tif (!id) {\r\n\t\t\tscheduler.callEvent(\"onEmptyClick\",[scheduler.getActionData(e).date, e]);\r\n\t\t} else {\r\n\t\t\tif ( !scheduler.callEvent(\"onClick\",[id,e]) || scheduler.config.readonly ) return;\r\n\t\t}\r\n\r\n\t\tif (id && scheduler.config.select) {\r\n\r\n\t\t\tscheduler.select(id);\r\n\t\t\tvar mask = scheduler._getClassName(trg);\r\n\t\t\tif (mask.indexOf(\"_icon\")!=-1)\r\n\t\t\t\tscheduler._click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else{\r\n\t\t\tscheduler._close_not_saved();\r\n\t\t\tif (new Date().valueOf()-(scheduler._new_event||0) > 500){\r\n\t\t\t\tscheduler.unselect();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdhx_cal_prev_button:function(){\r\n\t\tscheduler._click.dhx_cal_next_button(0,-1);\r\n\t},\r\n\tdhx_cal_next_button:function(dummy,step){\r\n\t\tvar def_step = 1;\r\n\t\tif (scheduler.config.rtl){\r\n\t\t\tstep = -step;\r\n\t\t\tdef_step = -def_step;\r\n\t\t}\r\n\t\tscheduler.setCurrentView(scheduler.date.add( //next line changes scheduler._date , but seems it has not side-effects\r\n\t\t\tscheduler.date[scheduler._mode+\"_start\"](new Date(scheduler._date)),(step||def_step),scheduler._mode));\r\n\t},\r\n\tdhx_cal_today_button:function(){\r\n\t\tif (scheduler.callEvent(\"onBeforeTodayDisplayed\", [])) {\r\n\t\t\tscheduler.setCurrentView(scheduler._currentDate());\r\n\t\t}\r\n\t},\r\n\tdhx_cal_tab:function(){\r\n\t\tvar name = this.getAttribute(\"name\");\r\n\t\tvar mode = name.substring(0, name.search(\"_tab\"));\r\n\t\tscheduler.setCurrentView(scheduler._date,mode);\r\n\t},\r\n\tbuttons:{\r\n\t\t\"delete\":function(id){\r\n\t\t\tvar c = scheduler.locale.labels.confirm_deleting;\r\n\t\t\tscheduler._dhtmlx_confirm(c, scheduler.locale.labels.title_confirm_deleting, function(){ scheduler.deleteEvent(id); });\r\n\t\t},\r\n\t\tedit:function(id){ scheduler.edit(id); },\r\n\t\tsave:function(id){ scheduler.editStop(true); },\r\n\t\tdetails:function(id){ scheduler.showLightbox(id); },\r\n\t\tcancel:function(id){ scheduler.editStop(false); }\r\n\t}\r\n};\r\nscheduler._dhtmlx_confirm = function(message, title, callback) {\r\n\tif (!message)\r\n\t\treturn callback();\r\n\tvar opts = { text: message };\r\n\tif (title)\r\n\t\topts.title = title;\r\n\tif (callback) {\r\n\t\topts.callback = function(result) {\r\n\t\t\tif (result)\r\n\t\t\t\tcallback();\r\n\t\t};\r\n\t}\r\n\tdhtmlx.confirm(opts);\r\n};\r\nscheduler.addEventNow=function(start,end,e){\r\n\tvar base = {};\r\n\tif (scheduler._isObject(start) && !scheduler._isDate(start)){\r\n\t\tbase = start;\r\n\t\tstart = null;\r\n\t}\r\n\r\n\tvar d = (this.config.event_duration||this.config.time_step)*60000;\r\n\tif (!start) start = base.start_date||Math.round((scheduler._currentDate()).valueOf()/d)*d;\r\n\tvar start_date = new Date(start);\r\n\tif (!end){\r\n\t\tvar start_hour = this.config.first_hour;\r\n\t\tif (start_hour > start_date.getHours()){\r\n\t\t\tstart_date.setHours(start_hour);\r\n\t\t\tstart = start_date.valueOf();\r\n\t\t}\r\n\t\tend = start.valueOf()+d;\r\n\t}\r\n\tvar end_date = new Date(end);\r\n\r\n\t// scheduler.addEventNow(new Date(), new Date()) + collision though get_visible events defect (such event was not retrieved)\r\n\tif(start_date.valueOf() == end_date.valueOf())\r\n\t\tend_date.setTime(end_date.valueOf()+d);\r\n\tbase.start_date = base.start_date||start_date;\r\n\tbase.end_date =  base.end_date||end_date;\r\n\tbase.text = base.text||this.locale.labels.new_event;\r\n\tbase.id = this._drag_id = base.id || this.uid();\r\n\tthis._drag_mode=\"new-size\";\r\n\tthis._loading=true;\r\n\tvar eventId = this.addEvent(base);\r\n\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\r\n\tthis._loading=false;\r\n\r\n\tthis._drag_event={}; //dummy , to trigger correct event updating logic\r\n\tthis._on_mouse_up(e);\r\n\treturn eventId;\r\n};\r\nscheduler._on_dbl_click=function(e,src){\r\n\tsrc = src||(e.target||e.srcElement);\r\n\tif (this.config.readonly) return;\r\n\tvar name = scheduler._getClassName(src).split(\" \")[0];\r\n\tswitch(name){\r\n\t\tcase \"dhx_scale_holder\":\r\n\t\tcase \"dhx_scale_holder_now\":\r\n\t\tcase \"dhx_month_body\":\r\n\t\tcase \"dhx_wa_day_data\":\r\n\t\t\tif (!scheduler.config.dblclick_create) break;\r\n\t\t\tthis.addEventNow(this.getActionData(e).date,null,e);\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_cal_event\":\r\n\t\tcase \"dhx_wa_ev_body\":\r\n\t\tcase \"dhx_agenda_line\":\r\n\t\tcase \"dhx_grid_event\":\r\n\t\tcase \"dhx_cal_event_line\":\r\n\t\tcase \"dhx_cal_event_clear\":\r\n\t\t\tvar id = this._locate_event(src);\r\n\t\t\tif (!this.callEvent(\"onDblClick\",[id,e])) return;\r\n\t\t\tif (this.config.details_on_dblclick || this._table_view || !this.getEvent(id)._timed || !this.config.select)\r\n\t\t\t\tthis.showLightbox(id);\r\n\t\t\telse\r\n\t\t\t\tthis.edit(id);\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_time_block\":\r\n\t\tcase \"dhx_cal_container\":\r\n\t\t\treturn;\r\n\t\tdefault:\r\n\t\t\tvar t = this[\"dblclick_\"+name];\r\n\t\t\tif (t) {\r\n\t\t\t\tt.call(this,e);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (src.parentNode && src != this)\r\n\t\t\t\t\treturn scheduler._on_dbl_click(e,src.parentNode);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n};\r\n//column index by mouse x-coordinate\r\nscheduler._get_column_index = function(x_pos){\r\n\tvar column = 0;\r\n\tif (this._cols){\r\n\t\tvar width = 0;\r\n\t\tvar i = 0;\r\n\t\twhile (width + this._cols[i] < x_pos && i < this._cols.length){\r\n\t\t\twidth += this._cols[i];\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tcolumn = i + (this._cols[i] ? ((x_pos - width)/ this._cols[i]) : 0);\r\n\r\n\t\tif (this._ignores){\r\n\t\t\tif(column >= this._cols.length){\r\n\t\t\t\twhile(column >= 1 && this._ignores[Math.floor(column)]){\r\n\t\t\t\t\tcolumn--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\treturn column;\r\n};\r\n\r\n//transform mouse coordinates to day-time indexes of week based view\r\nscheduler._week_indexes_from_pos = function(pos){\r\n\t//\"get position\" can be invoked before columns are loaded into the units view(e.g. by onMouseMove handler in key_nav.js)\r\n\tif(!this._cols){\r\n\t\treturn pos;\r\n\t}else{\r\n\t\tvar column = this._get_column_index(pos.x);\r\n\r\n\t\tpos.x=Math.min(this._cols.length-1, Math.max(0,Math.ceil(column)-1));\r\n\t\tpos.y=Math.max(0,Math.ceil(pos.y*60/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step);\r\n\t\treturn pos;\r\n\t}\r\n};\r\n\r\nscheduler._mouse_coords=function(ev){\r\n\tvar pos;\r\n\tvar b=document.body;\r\n\tvar d = document.documentElement;\r\n\tif (!this.$env.isIE && (ev.pageX || ev.pageY))\r\n\t\tpos={x:ev.pageX, y:ev.pageY};\r\n\telse pos={\r\n\t\tx:ev.clientX + (b.scrollLeft||d.scrollLeft||0) - b.clientLeft,\r\n\t\ty:ev.clientY + (b.scrollTop||d.scrollTop||0) - b.clientTop\r\n\t};\r\n\t//apply layout\r\n\tif (this.config.rtl && this._colsS) {\r\n\t\tpos.x = this.$container.querySelector(\".dhx_cal_data\").offsetWidth - pos.x;\r\n\t\tif (this._mode !== \"month\") {\r\n\t\t\tpos.x -= this.xy.scale_width;\r\n\t\t}\r\n\t} else {\r\n\t\tpos.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);\r\n\t}\r\n\r\n\tvar dataArea = this.$container.querySelector(\".dhx_cal_data\");\r\n\t//pos.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els[\"dhx_cal_data\"][0].scrollTop;\r\n\tpos.y-=this.$domHelpers.getAbsoluteTop(dataArea)-this._els[\"dhx_cal_data\"][0].scrollTop;\r\n\tpos.ev = ev;\r\n\tvar handler = this[\"mouse_\"+this._mode];\r\n\tif (handler){\r\n\t\tpos = handler.call(this,pos);\r\n\t}else{\r\n\t\t//transform to date\r\n\t\tif (!this._table_view) {\r\n\t\t\tpos = this._week_indexes_from_pos(pos);\r\n\t\t} else {\r\n\t\t\tvar column = this._get_column_index(pos.x);\r\n\t\t\tif (!this._cols || !this._colsS) // agenda/map views\r\n\t\t\t\treturn pos;\r\n\t\t\tvar dy=0;\r\n\t\t\tfor (dy=1; dy < this._colsS.heights.length; dy++)\r\n\t\t\t\tif (this._colsS.heights[dy]>pos.y) break;\r\n\r\n\t\t\tpos.y=Math.ceil( (Math.max(0, column)+Math.max(0,dy-1)*7)*24*60/this.config.time_step );\r\n\r\n\t\t\tif (scheduler._drag_mode || this._mode == \"month\")\r\n\t\t\t\tpos.y=(Math.max(0,Math.ceil(column)-1)+Math.max(0,dy-1)*7)*24*60/this.config.time_step;\r\n\r\n\t\t\t//we care about ignored days only during event moving in month view\r\n\t\t\tif (this._drag_mode == \"move\"){\r\n\t\t\t\tif (scheduler._ignores_detected && scheduler.config.preserve_length){\r\n\t\t\t\t\tpos._ignores = true;\r\n\t\t\t\t\t//get real lengtn of event\r\n\t\t\t\t\tif (!this._drag_event._event_length)\r\n\t\t\t\t\t\tthis._drag_event._event_length = this._get_real_event_length(this._drag_event.start_date, this._drag_event.end_date, { x_step:1, x_unit:\"day\"});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpos.x=0;\r\n\t\t}\r\n\t}\r\n\tpos.timestamp = +new Date();\r\n\treturn pos;\r\n};\r\nscheduler._close_not_saved=function(){\r\n\tif (new Date().valueOf()-(scheduler._new_event||0) > 500 && scheduler._edit_id){\r\n\t\tvar c=scheduler.locale.labels.confirm_closing;\r\n\r\n\t\tscheduler._dhtmlx_confirm(c, scheduler.locale.labels.title_confirm_closing, function() { scheduler.editStop(scheduler.config.positive_closing); });\r\n\t\tif(c){\r\n\t\t\tthis._drag_id = this._drag_pos = this._drag_mode = null;\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._correct_shift=function(start, back){\r\n\treturn start-=((new Date(scheduler._min_date)).getTimezoneOffset()-(new Date(start)).getTimezoneOffset())*60000*(back?-1:1);\r\n};\r\n\r\nscheduler._is_pos_changed = function(old_pos, new_pos){\r\n\tfunction diff(old_val, new_val, acc){\r\n\t\treturn !!(Math.abs(old_val - new_val) > acc);\r\n\t}\r\n\r\n\tif(!(old_pos && this._drag_pos)){\r\n\t\treturn true;\r\n\t}\r\n\tvar delay = 100,\r\n\t\td_pos = 5;\r\n\r\n\t// start drag only if passed some time since mouse down, or if mouse position changed sufficiently\r\n\treturn !!(this._drag_pos.has_moved || !this._drag_pos.timestamp || (new_pos.timestamp - this._drag_pos.timestamp > delay) || diff(old_pos.ev.clientX, new_pos.ev.clientX, d_pos) || diff(old_pos.ev.clientY, new_pos.ev.clientY, d_pos));\r\n};\r\n\r\nscheduler._correct_drag_start_date = function(start){\r\n\tvar obj;\r\n\tif (scheduler.matrix)\r\n\t\tobj = scheduler.matrix[scheduler._mode];\r\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\tstart = new Date(start);\r\n\tvar len = 1;\r\n\tif(obj._start_correction || obj._end_correction)\r\n\t\tlen = (obj.last_hour||0)*60 - (start.getHours()*60+start.getMinutes()) || 1;\r\n\r\n\treturn start*1 + (scheduler._get_fictional_event_length(start, len, obj)  - len);\r\n};\r\nscheduler._correct_drag_end_date = function(start, duration){\r\n\tvar obj;\r\n\tif (scheduler.matrix)\r\n\t\tobj = scheduler.matrix[scheduler._mode];\r\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\tvar end = start*1 + scheduler._get_fictional_event_length(start, duration, obj);\r\n\treturn new Date(end*1 - (scheduler._get_fictional_event_length(end, -1, obj, -1) + 1));\r\n};\r\n\r\nscheduler._on_mouse_move=function(e){\r\n\tif (this._drag_mode){\r\n\t\tvar pos=this._mouse_coords(e);\r\n\t\tif (this._is_pos_changed(this._drag_pos, pos)){\r\n\t\t\tvar start, end;\r\n\t\t\tif (this._edit_id!=this._drag_id)\r\n\t\t\t\tthis._close_not_saved();\r\n\r\n\t\t\tif(!this._drag_mode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar mousedownPos = null;\r\n\t\t\tif(this._drag_pos && !this._drag_pos.has_moved){\r\n\t\t\t\tmousedownPos = this._drag_pos;\r\n\t\t\t\tmousedownPos.has_moved = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._drag_pos = pos;\r\n\r\n\t\t\tthis._drag_pos.has_moved = true;\r\n\r\n\t\t\tif (this._drag_mode==\"create\"){\r\n\r\n\t\t\t\t// use mouse down position as a starting point for drag-create\r\n\t\t\t\tif(mousedownPos){\r\n\t\t\t\t\tpos = mousedownPos;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._close_not_saved();\r\n\t\t\t\tthis.unselect(this._select_id);\r\n\t\t\t\tthis._loading=true; //will be ignored by dataprocessor\r\n\r\n\t\t\t\tstart = this._get_date_from_pos(pos).valueOf();\r\n\r\n\t\t\t\tif (!this._drag_start) {\r\n\t\t\t\t\tvar res = this.callEvent(\"onBeforeEventCreated\", [e, this._drag_id]);\r\n\t\t\t\t\tif (!res){\r\n\t\t\t\t\t\tthis._loading=false;\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loading=false;\r\n\t\t\t\t\tthis._drag_start=start;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tend = start;\r\n\t\t\t\tif (end == this._drag_start) {\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar start_date = new Date(this._drag_start);\r\n\t\t\t\tvar end_date = new Date(end);\r\n\t\t\t\tif ( (this._mode == \"day\" || this._mode == \"week\") &&\r\n\t\t\t\t\t(start_date.getHours() == end_date.getHours() &&\r\n\t\t\t\t\tstart_date.getMinutes() == end_date.getMinutes()) ) {\r\n\t\t\t\t\t\tend_date = new Date(this._drag_start+1000);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tthis._drag_id=this.uid();\r\n\t\t\t\tthis.addEvent(start_date, end_date, this.locale.labels.new_event, this._drag_id, pos.fields);\r\n\r\n\t\t\t\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\r\n\t\t\t\tthis._loading=false;\r\n\t\t\t\tthis._drag_mode=\"new-size\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar timeStep = this.config.time_step;\r\n\t\t\tvar ev=this.getEvent(this._drag_id);\r\n\t\t\tvar obj;\r\n\t\t\tif (scheduler.matrix)\r\n\t\t\t\tobj = scheduler.matrix[scheduler._mode];\r\n\t\t\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\t\t\tif (this._drag_mode==\"move\"){\r\n\t\t\t\tstart = this._min_date.valueOf()+(pos.y*this.config.time_step+pos.x*24*60)*60000;\r\n\t\t\t\tif (!pos.custom && this._table_view) {\r\n\t\t\t\t\tstart += this.date.time_part(ev.start_date) * 1000;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this._table_view && this._dragEventBody && this._drag_event._move_event_shift === undefined) {\r\n\t\t\t\t\tthis._drag_event._move_event_shift = start - ev.start_date;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._drag_event._move_event_shift) {\r\n\t\t\t\t\tstart -= this._drag_event._move_event_shift;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstart = this._correct_shift(start);\r\n\r\n\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\r\n\r\n\t\t\t\t\tstart = scheduler._correct_drag_start_date(start);\r\n\t\t\t\t\tend = scheduler._correct_drag_end_date(start,this._drag_event._event_length);\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tend = ev.end_date.valueOf()-(ev.start_date.valueOf()-start);\r\n\t\t\t} else { // resize\r\n\t\t\t\tstart = ev.start_date.valueOf();\r\n\t\t\t\tend = ev.end_date.valueOf();\r\n\t\t\t\tif (this._table_view) {\r\n\t\t\t\t\tvar resize_date = this._min_date.valueOf()+pos.y*this.config.time_step*60000 + (pos.custom?0:24*60*60000);\r\n\t\t\t\t\tif (this._mode == \"month\") {\r\n\t\t\t\t\t\tresize_date = this._correct_shift(resize_date, false);\r\n\t\t\t\t\t\tif( this._drag_from_start ) {\r\n\t\t\t\t\t\t\tvar day = 24*60*60000;\r\n\t\t\t\t\t\t\tif( resize_date <= scheduler.date.date_part(new Date(end+day-1)).valueOf() ) // to get end time as 23:59:59 and then the day start\r\n\t\t\t\t\t\t\t\tstart = resize_date - day;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tend = resize_date;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(this.config.preserve_length) {\r\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\r\n\t\t\t\t\t\t\t\tstart = scheduler._correct_drag_start_date(resize_date);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tend = scheduler._correct_drag_end_date(resize_date, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\r\n\t\t\t\t\t\t\t\tstart = resize_date;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tend = resize_date;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar end_day_start = this.date.date_part(new Date(ev.end_date.valueOf() - 1)).valueOf();\r\n\t\t\t\t\tvar end_day_date = new Date(end_day_start);\r\n\t\t\t\t\tvar firstHour = this.config.first_hour;\r\n\t\t\t\t\tvar lastHour = this.config.last_hour;\r\n\t\t\t\t\tvar maxY = (lastHour - firstHour) * (60/timeStep);\r\n\r\n\t\t\t\t\tthis.config.time_step = 1;\r\n\t\t\t\t\tvar precisePos = this._mouse_coords(e);\r\n\t\t\t\t\tthis.config.time_step = timeStep;\r\n\r\n\t\t\t\t\tvar minDate = pos.y*timeStep*60000;\r\n\t\t\t\t\tvar maxDate = Math.min(pos.y + 1, maxY)*timeStep*60000;\r\n\t\t\t\t\tvar preciseDate = precisePos.y*60000;\r\n\r\n\t\t\t\t\t// rounding end date to the closest time step\r\n\t\t\t\t\tif(Math.abs(minDate - preciseDate) > Math.abs(maxDate - preciseDate)){\r\n\t\t\t\t\t\tend = end_day_start + maxDate;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tend = end_day_start + minDate;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend = end + ((new Date(end)).getTimezoneOffset() - end_day_date.getTimezoneOffset()) * 60000;\r\n\t\t\t\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"s-resize\";\r\n\t\t\t\t\tif (this._mode == \"week\" || this._mode == \"day\")\r\n\t\t\t\t\t\tend = this._correct_shift(end);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._drag_mode == \"new-size\") {\r\n\t\t\t\t\tif (end <= this._drag_start){\r\n\t\t\t\t\t\tvar shift = pos.shift||((this._table_view && !pos.custom)?24*60*60000:0);\r\n\t\t\t\t\t\tstart = end-(pos.shift?0:shift);\r\n\t\t\t\t\t\tend = this._drag_start+(shift||(timeStep*60000));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart = this._drag_start;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (end<=start)\r\n\t\t\t\t\t\tend=start+timeStep*60000;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar new_end = new Date(end-1);\r\n\t\t\tvar new_start = new Date(start);\r\n\t\t\t//deny drag out of visible scheduler scale in timeline view\r\n\t\t\tif(this._drag_mode==\"move\" && scheduler.config.limit_drag_out &&\r\n\t\t\t\t(+new_start < +scheduler._min_date || +end > +scheduler._max_date)){\r\n\r\n\t\t\t\tif(+ev.start_date < +scheduler._min_date || +ev.end_date > +scheduler._max_date){\r\n\t\t\t\t\t// not move event if it's already outside time scale\r\n\t\t\t\t\tnew_start = new Date(ev.start_date);\r\n\t\t\t\t\tend = new Date(ev.end_date);\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tvar duration = end - new_start;\r\n\r\n\t\t\t\t\tif(+new_start < +scheduler._min_date){\r\n\t\t\t\t\t\tnew_start = new Date(scheduler._min_date);\r\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\r\n\t\t\t\t\t\t\tnew_start = new Date(scheduler._correct_drag_start_date(new_start));\r\n\t\t\t\t\t\t\tif(obj._start_correction)\r\n\t\t\t\t\t\t\t\tnew_start = new Date(new_start.valueOf() + obj._start_correction);\r\n\t\t\t\t\t\t\tend = new Date(new_start*1 + this._get_fictional_event_length(new_start, this._drag_event._event_length, obj));\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tend = new Date(+new_start + duration);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tend = new Date(scheduler._max_date);\r\n\r\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\r\n\t\t\t\t\t\t\tif(obj._end_correction)\r\n\t\t\t\t\t\t\t\tend = new Date(end.valueOf() - obj._end_correction);\r\n\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\r\n\t\t\t\t\t\t\tnew_start = new Date(end*1 - this._get_fictional_event_length(end, this._drag_event._event_length, obj, true));\r\n\t\t\t\t\t\t\tif(this._ignores_detected){\r\n\t\t\t\t\t\t\t\tnew_start = scheduler.date.add(new_start, obj.x_step, obj.x_unit);\r\n\t\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\r\n\t\t\t\t\t\t\t\tend = scheduler.date.add(end, obj.x_step, obj.x_unit);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnew_start = new Date(+end - duration);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar new_end = new Date(end-1);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\r\n\t\t\tif(!this._table_view && this._dragEventBody &&\r\n\t\t\t\t!scheduler.config.all_timed &&\r\n\t\t\t\t((!scheduler._get_section_view() && pos.x != this._get_event_sday({start_date: new Date(start), end_date:new Date(start)})) || new Date(start).getHours() < this.config.first_hour)){\r\n\t\t\t\tvar duration = end - new_start;\r\n\t\t\t\tif (this._drag_mode == \"move\") {\r\n\t\t\t\t\tvar day = this._min_date.valueOf() + (pos.x * 24 * 60) * 60000;\r\n\t\t\t\t\tnew_start = new Date(day);\r\n\t\t\t\t\tnew_start.setHours(this.config.first_hour);\r\n\t\t\t\t\tend = new Date(new_start.valueOf() + duration);\r\n\t\t\t\t\tnew_end = new Date(end-1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\r\n\t\t\tif(!this._table_view &&\r\n\t\t\t\t!scheduler.config.all_timed &&\r\n\t\t\t\t((!scheduler.getView() && pos.x != this._get_event_sday({start_date: new Date(end), end_date:new Date(end)})) || new Date(end).getHours() >= this.config.last_hour)){\r\n\t\t\t\tvar duration = end - new_start;\r\n\t\t\t\tvar day = this._min_date.valueOf()+(pos.x*24*60)*60000;\r\n\t\t\t\tend = scheduler.date.date_part(new Date(day));\r\n\t\t\t\tend.setHours(this.config.last_hour);\r\n\t\t\t\tnew_end = new Date(end-1);\r\n\t\t\t\tif(this._drag_mode == \"move\"){\r\n\t\t\t\t\tnew_start = new Date(+end - duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//prevent out-of-borders situation for day|week view\r\n\t\t\tif ( this._table_view || (new_end.getDate()==new_start.getDate() && new_end.getHours()<this.config.last_hour) || scheduler._allow_dnd ){\r\n\t\t\t\tev.start_date=new_start;\r\n\t\t\t\tev.end_date=new Date(end);\r\n\t\t\t\tif (this.config.update_render){\r\n\t\t\t\t\t//fix for repaint after dnd and scroll issue, #231\r\n\t\t\t\t\tvar sx = scheduler._els[\"dhx_cal_data\"][0].scrollTop;\r\n\t\t\t\t\tthis.update_view();\r\n\t\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = sx;\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.updateEvent(this._drag_id);\r\n\t\t\t}\r\n\t\t\tif (this._table_view) {\r\n\t\t\t\tthis.for_rendered(this._drag_id,function(r){\r\n\t\t\t\t\tr.className+=\" dhx_in_move dhx_cal_event_drag\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onEventDrag\", [this._drag_id, this._drag_mode, e]);\r\n\t\t}\r\n\t}  else {\r\n\t\tif (scheduler.checkEvent(\"onMouseMove\")){\r\n\t\t\tvar id = this._locate_event(e.target||e.srcElement);\r\n\t\t\tthis.callEvent(\"onMouseMove\",[id,e]);\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._on_mouse_down=function(e,src) {\r\n\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t// let's ignore right mouse button then\r\n\tif (e.button == 2)\r\n\t\treturn;\r\n\r\n\tif (this.config.readonly || this._drag_mode) return;\r\n\tsrc = src||(e.target||e.srcElement);\r\n\tvar classname = scheduler._getClassName(src).split(\" \")[0];\r\n\r\n\tif (this.config.drag_event_body && classname == \"dhx_body\") {\r\n\t\tif(src.parentNode && src.parentNode.className.indexOf(\"dhx_cal_select_menu\") === -1){\r\n\t\t\tclassname = \"dhx_event_move\";\r\n\t\t\tthis._dragEventBody = true;\r\n\t\t}\r\n\t}\r\n\r\n\tswitch (classname) {\r\n\t\tcase \"dhx_cal_event_line\":\r\n\t\tcase \"dhx_cal_event_clear\":\r\n\t\t\tif (this._table_view)\r\n\t\t\t\tthis._drag_mode=\"move\"; //item in table mode\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_event_move\":\r\n\t\tcase \"dhx_wa_ev_body\":\r\n\t\t\tthis._drag_mode=\"move\";\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_event_resize\":\r\n\t\t\tthis._drag_mode=\"resize\";\r\n\t\t\tvar fullClass = scheduler._getClassName(src);\r\n\t\t\tif((fullClass).indexOf(\"dhx_event_resize_end\") < 0){\r\n\t\t\t\tscheduler._drag_from_start = true;\r\n\t\t\t}else{\r\n\t\t\t\tscheduler._drag_from_start = false;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_scale_holder\":\r\n\t\tcase \"dhx_scale_holder_now\":\r\n\t\tcase \"dhx_month_body\":\r\n\t\tcase \"dhx_matrix_cell\":\r\n\t\tcase \"dhx_marked_timespan\":\r\n\t\t\tthis._drag_mode=\"create\";\r\n\t\t\tbreak;\r\n\t\tcase \"\":\r\n\t\t\tif (src.parentNode)\r\n\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tif (!scheduler.checkEvent(\"onMouseDown\") || scheduler.callEvent(\"onMouseDown\", [classname, e])) {\r\n\t\t\t\tif (src.parentNode && src != this && classname != \"dhx_body\") {\r\n\t\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._drag_mode=null;\r\n\t\t\tthis._drag_id=null;\r\n\t\t\tbreak;\r\n\t}\r\n\tif (this._drag_mode){\r\n\t\tvar id = this._locate_event(src);\r\n\t\tif (!this.config[\"drag_\"+this._drag_mode] || !this.callEvent(\"onBeforeDrag\",[id, this._drag_mode, e]))\r\n\t\t\tthis._drag_mode=this._drag_id=0;\r\n\t\telse {\r\n\t\t\tthis._drag_id= id;\r\n\r\n\t\t\tif (this._edit_id!=this._drag_id || (this._edit_id && this._drag_mode == \"create\"))\r\n\t\t\t\tthis._close_not_saved();\r\n\t\t\tif(!this._drag_mode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._drag_event = scheduler._lame_clone(this.getEvent(this._drag_id) || {});\r\n\t\t\tthis._drag_pos = this._mouse_coords(e);\r\n\t\t}\r\n\t}\r\n\tthis._drag_start=null;\r\n};\r\n\r\n\r\nscheduler._get_private_properties = function(event){\r\n\tvar fields = {};\r\n\tfor(var i in event){\r\n\t\tif(i.indexOf(\"_\") === 0){\r\n\t\t\tfields[i] = true;\r\n\t\t}\r\n\t}\r\n\treturn fields;\r\n};\r\nscheduler._clear_temporary_properties = function(clean, flagged_event){\r\n\tvar initial = this._get_private_properties(clean);\r\n\tvar current_state = this._get_private_properties(flagged_event);\r\n\tfor(var i in current_state){\r\n\t\tif(!initial[i]){\r\n\t\t\tdelete flagged_event[i];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nscheduler._on_mouse_up=function(e){\r\n\tif (e && e.button == 2 && this._mobile) return;\r\n\tif (this._drag_mode && this._drag_id){\r\n\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"default\";\r\n\t\t//drop\r\n\r\n\t\tvar drag_id = this._drag_id;\r\n\t\tvar mode = this._drag_mode;\r\n\r\n\t\tvar moved = !this._drag_pos || this._drag_pos.has_moved;\r\n\t\tdelete this._drag_event._move_event_shift;\r\n\r\n\t\tvar ev=this.getEvent(this._drag_id);\r\n\t\tif (moved && (this._drag_event._dhx_changed || !this._drag_event.start_date || ev.start_date.valueOf()!=this._drag_event.start_date.valueOf() || ev.end_date.valueOf()!=this._drag_event.end_date.valueOf())){\r\n\t\t\tvar is_new=(this._drag_mode==\"new-size\");\r\n\t\t\tif (!this.callEvent(\"onBeforeEventChanged\",[ev, e, is_new, this._drag_event])){\r\n\t\t\t\tif (is_new)\r\n\t\t\t\t\tthis.deleteEvent(ev.id, true);\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._drag_event._dhx_changed = false;\r\n\t\t\t\t\tthis._clear_temporary_properties(ev, this._drag_event);\r\n\t\t\t\t\tscheduler._lame_copy(ev, this._drag_event);\r\n\t\t\t\t\tthis.updateEvent(ev.id);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._drag_id = this._drag_mode = null;\r\n\t\t\t\tif (is_new && this.config.edit_on_create){\r\n\t\t\t\t\tthis.unselect();\r\n\t\t\t\t\tthis._new_event=new Date();//timestamp of creation\r\n\t\t\t\t\t//if selection disabled - force lightbox usage\r\n\t\t\t\t\tif (this._table_view || this.config.details_on_create || !this.config.select || !this.isOneDayEvent(this.getEvent(drag_id))) {\r\n\t\t\t\t\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\r\n\t\t\t\t\t\treturn this.showLightbox(drag_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._drag_pos = true; //set flag to trigger full redraw\r\n\t\t\t\t\tthis._select_id = this._edit_id = drag_id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!this._new_event)\r\n\t\t\t\t\t\tthis.callEvent(is_new?\"onEventAdded\":\"onEventChanged\",[drag_id,this.getEvent(drag_id)]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._drag_pos && (this._drag_pos.has_moved || this._drag_pos === true)) {\r\n\t\t\tthis._drag_id = this._drag_mode = null; // set null to prevent _sorder recalculation for drag event\r\n\t\t\tthis.render_view_data(); //redraw even if there is no real changes - necessary for correct positioning item after drag\r\n\t\t}\r\n\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\r\n\t}\r\n\tthis._drag_id = null;\r\n\tthis._drag_mode=null;\r\n\tthis._drag_pos=null;\r\n};\r\n\r\nscheduler._trigger_dyn_loading = function(){\r\n\tif (this._load_mode && this._load()){\r\n\t\tthis._render_wait = true;\r\n\t\treturn true;\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n};\r\nscheduler.update_view=function(){\r\n\tthis._reset_ignores();\r\n\tthis._update_nav_bar(\r\n\t\tthis.config.header,\r\n\t\tthis.$container.querySelector(\".dhx_cal_navline\"));\r\n\r\n\tvar view = this[this._mode + \"_view\"];\r\n\tif(view){\r\n\t\tview.call(this, true);\r\n\t}else{\r\n\t\tthis._reset_scale();\r\n\t}\r\n\r\n\tif (this._trigger_dyn_loading()){\r\n\t\treturn true;\r\n\t}\r\n\tthis.render_view_data();\r\n};\r\n\r\nscheduler.isViewExists = function(mode){\r\n\treturn !!(scheduler[mode+ \"_view\"] ||\r\n\t\t(scheduler.date[mode+ \"_start\"] && scheduler.templates[mode+ \"_date\"] && scheduler.templates[mode+ \"_scale_date\"]));\r\n};\r\n\r\nscheduler._set_aria_buttons_attrs = function(){\r\n\tvar buttonGroups = [\"dhx_cal_next_button\", \"dhx_cal_prev_button\", \"dhx_cal_tab\", \"dhx_cal_today_button\"];\r\n\tfor(var i = 0; i < buttonGroups.length; i++){\r\n\t\tvar group = this._els[buttonGroups[i]];\r\n\t\tfor(var j = 0; group && j < group.length; j++ ){\r\n\t\t\tvar name = group[j].getAttribute(\"name\");\r\n\t\t\tvar label = this.locale.labels[buttonGroups[i]];\r\n\t\t\tif(name){\r\n\t\t\t\tlabel = this.locale.labels[name] || label;\r\n\t\t\t}\r\n\t\t\tif(buttonGroups[i] == \"dhx_cal_next_button\"){\r\n\t\t\t\tlabel = this.locale.labels.next;\r\n\t\t\t}else if(buttonGroups[i] == \"dhx_cal_prev_button\"){\r\n\t\t\t\tlabel = this.locale.labels.prev;\r\n\t\t\t}\r\n\t\t\tthis._waiAria.headerButtonsAttributes(group[j], label || \"\");\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.updateView = function(date, mode) {\r\n\r\n\tif (!this.$container) {\r\n\t\tthrow new Error(\"The scheduler is not initialized. \\n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**\");\r\n\t}\r\n\r\n\tdate = date || this._date;\r\n\tmode = mode || this._mode;\r\n\tvar dhx_cal_data = 'dhx_cal_data';\r\n\r\n\tvar container = this._obj;\r\n\tvar oldClass = \"dhx_scheduler_\" + this._mode;\r\n\tvar newClass = \"dhx_scheduler_\" + mode;\r\n\r\n\tif (!this._mode || (container.className.indexOf(oldClass) == -1)){\r\n\t\tcontainer.className += \" \" + newClass;\r\n\t} else {\r\n\t\tcontainer.className = container.className.replace(oldClass, newClass);\r\n\t}\r\n\r\n\tvar dhx_multi_day = 'dhx_multi_day';\r\n\r\n\tvar prev_scroll = (this._mode == mode && this.config.preserve_scroll) ? this._els[dhx_cal_data][0].scrollTop : false; // saving current scroll\r\n\r\n\tvar multidayScroll;\r\n\tif(this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\r\n\t\tmultidayScroll = this._els[dhx_multi_day][0].scrollTop;\r\n\t}\r\n\r\n\t//hide old custom view\r\n\tif (this[this._mode + \"_view\"] && mode && this._mode != mode)\r\n\t\tthis[this._mode + \"_view\"](false);\r\n\r\n\tthis._close_not_saved();\r\n\r\n\tif (this._els[dhx_multi_day]) {\r\n\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\r\n\t\tthis._els[dhx_multi_day] = null;\r\n\t}\r\n\r\n\tthis._mode = mode;\r\n\tthis._date = date;\r\n\tthis._table_view = (this._mode == \"month\");\r\n\r\n\tthis._dy_shift = 0;//correction for multiday section in week/day views\r\n\r\n\t//show new view\r\n\tthis.update_view();\r\n\r\n\tthis._set_aria_buttons_attrs();\r\n\r\n\tvar tabs = this._els[\"dhx_cal_tab\"];\r\n\tif(tabs){//calendar can work without view tabs\r\n\t\tfor (var i = 0; i < tabs.length; i++) {\r\n\t\t\tvar tab = tabs[i];\r\n\r\n\t\t\tif (tab.getAttribute(\"name\") == this._mode + \"_tab\"){\r\n\t\t\t\ttab.classList.add(\"active\");\r\n\t\t\t\tthis._waiAria.headerToggleState(tab, true);\r\n\t\t\t}else{\r\n\t\t\t\ttab.classList.remove(\"active\");\r\n\t\t\t\tthis._waiAria.headerToggleState(tab, false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (typeof prev_scroll == \"number\") // if we are updating or working with the same view scrollTop should be saved\r\n\t\tthis._els[dhx_cal_data][0].scrollTop = prev_scroll; // restoring original scroll\r\n\r\n\tif(typeof multidayScroll == \"number\" && this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\r\n\t\tthis._els[dhx_multi_day][0].scrollTop = multidayScroll;\r\n\t}\r\n\r\n};\r\nscheduler.setCurrentView = function(date, mode) {\r\n\tif (!this.callEvent(\"onBeforeViewChange\", [this._mode, this._date, mode || this._mode, date || this._date])) return;\r\n\tthis.updateView(date, mode);\r\n\tthis.callEvent(\"onViewChange\", [this._mode, this._date]);\r\n};\r\n\r\nscheduler.render = function(date, mode){\r\n\tscheduler.setCurrentView(date, mode);\r\n};\r\n\r\nscheduler._render_x_header = function(i,left,d,h, offset_top){\r\n\toffset_top = offset_top || 0;\r\n\t//header scale\r\n\tvar head=document.createElement(\"div\");\r\n\thead.className = \"dhx_scale_bar\";\r\n\r\n\tif(this.templates[this._mode+\"_scalex_class\"]){\r\n\t\t//'_scalex_class' - timeline already have similar template, use the same name\r\n\t\thead.className += ' ' + this.templates[this._mode+\"_scalex_class\"](d);\r\n\t}\r\n\r\n\tvar width = this._cols[i]-1;\r\n\r\n\tif (this._mode == \"month\" && i === 0 && this.config.left_border) {\r\n\t\thead.className += \" dhx_scale_bar_border\";\r\n\t\tleft = left+1;\r\n\t}\r\n\tthis.set_xy(head, width, this.xy.scale_height-2, left, offset_top);//-1 for border\r\n\r\n\tvar columnHeaderText = this.templates[this._mode+\"_scale_date\"](d,this._mode); //TODO - move in separate method\r\n\thead.innerHTML = columnHeaderText;\r\n\r\n\tthis._waiAria.dayHeaderAttr(head, columnHeaderText);\r\n\r\n\th.appendChild(head);\r\n};\r\n\r\nscheduler._get_columns_num = function(from, to){\r\n\tvar count = 7;\r\n\tif (!scheduler._table_view){\r\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\r\n\t\tif (count_n) to = count_n(from);\r\n\t\tcount = Math.round((to.valueOf()-from.valueOf())/(1000*60*60*24));\r\n\t}\r\n\treturn count;\r\n};\r\nscheduler._get_timeunit_start = function(){\r\n\t//start date of currently displayed time unit(day, week,...)\r\n\treturn this.date[this._mode+\"_start\"](new Date(this._date.valueOf()));\r\n};\r\n\r\nscheduler._get_view_end = function(){\r\n\tvar dd = this._get_timeunit_start();\r\n\tvar ed = scheduler.date.add(dd, 1, this._mode);\r\n\tif (!scheduler._table_view){\r\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\r\n\t\tif (count_n) ed = count_n(dd);\r\n\t}\r\n\treturn ed;\r\n};\r\nscheduler._calc_scale_sizes = function(width, from, to){//\r\n\t//calculates number of displayed columns(days/units/month view cols) and their widths\r\n\tvar rtl = this.config.rtl;\r\n\tvar summ = width; //border delta\r\n\tvar count = this._get_columns_num(from, to);\r\n\t//if (this.config.rtl) this._process_ignores(scheduler.date.add(to, -1, \"day\"), count, \"day\", -1);\r\n\t//else\r\n\tthis._process_ignores(from, count, \"day\", 1);\r\n\tvar realcount = count - this._ignores_detected;\r\n\tfor (var i=0; i<count; i++){\r\n\t\tif (this._ignores[i]){\r\n\t\t\tthis._cols[i] = 0;\r\n\t\t\trealcount++;\r\n\t\t} else {\r\n\t\t\tthis._cols[i]=Math.floor(summ/(realcount-i));\r\n\t\t}\r\n\t\tsumm-=this._cols[i];\r\n\t\tthis._colsS[i]=(this._cols[i-1]||0)+(this._colsS[i-1]||(this._table_view?0:(rtl ? this.xy.scroll_width : this.xy.scale_width)+2));\r\n\t\t//this._colsS[j]=(this._cols[rtl ? j+1 : (i-1)]||0)+(this._colsS[rtl ? j+1 : (i-1)]||(this._table_view?0:(rtl?this.xy.scroll_width:this.xy.scale_width)+2));\r\n\t}\r\n\tthis._colsS['col_length'] = count;\r\n\tthis._colsS[count] = (this._cols[count-1]+this._colsS[count-1]) || 0;\r\n\t//this._colsS[count] = (this._cols[rtl ? 0 : count-1]+this._colsS[rtl ? 0 : count-1]) || 0;\r\n};\r\n\r\nscheduler._set_scale_col_size = function(div, width, left){\r\n\tvar c = this.config;\r\n\tthis.set_xy(div, width-1, c.hour_size_px*(c.last_hour-c.first_hour), left+this.xy.scale_width+1, 0);//-1 for border\r\n};\r\n\r\nscheduler._render_scales = function(header, data_area){\r\n\t//render columns in week/units view, or header in month view\r\n\tvar sd = new Date(scheduler._min_date),\r\n\t\ted = new Date(scheduler._max_date),\r\n\t\ttoday = this.date.date_part( scheduler._currentDate());\r\n\r\n\tvar summ = parseInt(header.style.width,10); //border delta\r\n\tvar d = new Date(this._min_date);\r\n\t// if (this.config.rtl) {\r\n\t// \td = new Date(scheduler.date.add(this._max_date, -1, \"day\"));\r\n\t// }\r\n\tvar count = this._get_columns_num(sd, ed);\r\n\tthis._calc_scale_sizes(summ, sd, ed);\r\n\tvar left=0;\r\n\r\n\theader.innerHTML = \"\";\r\n\tfor (var i=0; i<count; i++){\r\n\t\tif (!this._ignores[i]){\r\n\t\t\tthis._render_x_header(i,left,d,header);\r\n\t\t}\r\n\t\tif (!this._table_view){\r\n\t\t\tvar scales=document.createElement(\"div\");\r\n\t\t\tvar cls = \"dhx_scale_holder\";\r\n\t\t\tif (d.valueOf() == today.valueOf()) cls = \"dhx_scale_holder_now\";\r\n\r\n\t\t\tscales.setAttribute(\"data-column-index\", i);\r\n\t\t\tif (this._ignores_detected && this._ignores[i]){\r\n\t\t\t\tcls += \" dhx_scale_ignore\";\r\n\t\t\t}\r\n\r\n\t\t\tscales.className = cls+\" \"+this.templates.week_date_class(d,today);\r\n\t\t\tthis._waiAria.dayColumnAttr(scales, d);\r\n\t\t\tthis._set_scale_col_size(scales, this._cols[i], left);\r\n\r\n\t\t\tdata_area.appendChild(scales);\r\n\t\t\tthis.callEvent(\"onScaleAdd\",[scales, d]);\r\n\t\t}\r\n\t\tleft+=this._cols[i];\r\n\t\t//if (this.config.rtl) d=this.date.add(d,-1,\"day\");\r\n\t\t//else\r\n\t\td=this.date.add(d,1,\"day\");\r\n\t\td = this.date.day_start(d);\r\n\t}\r\n};\r\n\r\nscheduler._getNavDateElement = function(){\r\n\treturn this.$container.querySelector(\".dhx_cal_date\");\r\n};\r\n\r\nscheduler._reset_scale=function(){\r\n\t//current mode doesn't support scales\r\n\t//we mustn't call reset_scale for such modes, so it just to be sure\r\n\tif (!this.templates[this._mode + \"_date\"]) return;\r\n\r\n\tvar h = this._els[\"dhx_cal_header\"][0];\r\n\tvar data_area = this._els[\"dhx_cal_data\"][0];\r\n\tvar c = this.config;\r\n\r\n\th.innerHTML = \"\";\r\n\t//data_area.scrollTop = 0; //fix flickering in FF; makes IE8 flicker instead\r\n\tdata_area.innerHTML = \"\";\r\n\r\n\tvar str = ((c.readonly || (!c.drag_resize)) ? \" dhx_resize_denied\" : \"\") + ((c.readonly || (!c.drag_move)) ? \" dhx_move_denied\" : \"\");\r\n\tdata_area.className = \"dhx_cal_data\" + str;\r\n\r\n\tthis._scales = {};\r\n\tthis._cols = [];\t//store for data section\r\n\tthis._colsS = {height: 0};\r\n\tthis._dy_shift = 0;\r\n\r\n\tthis.set_sizes();\r\n\r\n\tvar d,sd,today;\r\n\tvar dd = this._get_timeunit_start(),\r\n\t\ted = scheduler._get_view_end();\r\n\r\n\td = sd = this._table_view ? scheduler.date.week_start(dd) : dd;\r\n\r\n\r\n\tthis._min_date=d;\r\n\r\n\tvar navBarDateStr = this.templates[this._mode+\"_date\"](dd,ed,this._mode);\r\n\r\n\tvar scaleElement = this._getNavDateElement();\r\n\tif(scaleElement){\r\n\t\tscaleElement.innerHTML = navBarDateStr;\r\n\t\tthis._waiAria.navBarDateAttr(scaleElement, navBarDateStr);\r\n\t}\r\n\r\n\tthis._max_date = ed;\r\n\tscheduler._render_scales(h, data_area);\r\n\r\n\tif (this._table_view) // month view\r\n\t\tthis._reset_month_scale(data_area,dd,sd);\r\n\telse{\r\n\t\tthis._reset_hours_scale(data_area,dd,sd);\r\n\t\tif (c.multi_day) {\r\n\t\t\tvar dhx_multi_day = 'dhx_multi_day';\r\n\r\n\t\t\tif(this._els[dhx_multi_day]) {\r\n\t\t\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\r\n\t\t\t\tthis._els[dhx_multi_day] = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar navline = this._els[\"dhx_cal_navline\"][0];\r\n\t\t\tvar top = navline.offsetHeight + this._els[\"dhx_cal_header\"][0].offsetHeight+1;\r\n\r\n\t\t\tvar c1 = document.createElement(\"div\");\r\n\t\t\tc1.className = dhx_multi_day;\r\n\t\t\tc1.style.visibility=\"hidden\";\r\n\t\t\tvar totalWidth = this._colsS[this._colsS.col_length];\r\n\t\t\tvar offset = c.rtl ? this.xy.scale_width : this.xy.scroll_width;\r\n\t\t\tvar hiddenWidth = Math.max(totalWidth + offset - 2, 0);\r\n\t\t\tthis.set_xy(c1, hiddenWidth, 0, 0, top); // 2 extra borders, dhx_header has -1 bottom margin\r\n\t\t\tdata_area.parentNode.insertBefore(c1,data_area);\r\n\r\n\t\t\tvar c2 = c1.cloneNode(true);\r\n\t\t\tc2.className = dhx_multi_day+\"_icon\";\r\n\t\t\tc2.style.visibility=\"hidden\";\r\n\t\t\tthis.set_xy(c2, this.xy.scale_width, 0, 0, top); // dhx_header has -1 bottom margin\r\n\r\n\t\t\tc1.appendChild(c2);\r\n\t\t\tthis._els[dhx_multi_day]=[c1,c2];\r\n\t\t\tthis._els[dhx_multi_day][0].onclick = this._click.dhx_cal_data;\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._reset_hours_scale=function(b,dd,sd){\r\n\tvar c=document.createElement(\"div\");\r\n\tc.className=\"dhx_scale_holder\";\r\n\r\n\tvar date = new Date(1980,1,1,this.config.first_hour,0,0);\r\n\tfor (var i=this.config.first_hour*1; i < this.config.last_hour; i++) {\r\n\t\tvar cc=document.createElement(\"div\");\r\n\t\tcc.className=\"dhx_scale_hour\";\r\n\t\tcc.style.height=this.config.hour_size_px+\"px\";\r\n\t\tvar width = this.xy.scale_width;\r\n\t\tif (this.config.left_border) {\r\n\t\t\tcc.className += \" dhx_scale_hour_border\";\r\n\t\t}\r\n\t\tcc.style.width = width + \"px\";\r\n\r\n\t\tvar content = scheduler.templates.hour_scale(date);\r\n\t\tcc.innerHTML = content;\r\n\t\tthis._waiAria.hourScaleAttr(cc, content);\r\n\r\n\t\tc.appendChild(cc);\r\n\t\tdate=this.date.add(date,1,\"hour\");\r\n\t}\r\n\tb.appendChild(c);\r\n\tif (this.config.scroll_hour)\r\n\t\tb.scrollTop = this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour);\r\n};\r\n\r\nscheduler._currentDate = function(){\r\n\tif(scheduler.config.now_date){\r\n\t\treturn new Date(scheduler.config.now_date);\r\n\t}\r\n\treturn new Date();\r\n};\r\n\r\nscheduler._reset_ignores = function(){\r\n\tthis._ignores={};\r\n\tthis._ignores_detected = 0;\r\n};\r\n\r\nscheduler._process_ignores = function(sd, n, mode, step, preserve){\r\n\tthis._reset_ignores();\r\n\tvar ignore = scheduler[\"ignore_\"+this._mode];\r\n\tif (ignore){\r\n\t\tvar ign_date = new Date(sd);\r\n\t\tfor (var i=0; i<n; i++){\r\n\t\t\tif (ignore(ign_date)){\r\n\t\t\t\tthis._ignores_detected += 1;\r\n\t\t\t\tthis._ignores[i] = true;\r\n\t\t\t\tif (preserve)\r\n\t\t\t\t\tn++;\r\n\t\t\t}\r\n\t\t\tign_date = scheduler.date.add(ign_date, step, mode);\r\n\t\t\tif(scheduler.date[mode + '_start'])\r\n\t\t\t\tign_date = scheduler.date[mode + '_start'](ign_date);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler._render_month_scale = function(div, dd/*month start*/, sd/*view start*/, rows ){\r\n\t//renders month view layout\r\n\r\n\tvar ed=scheduler.date.add(dd,1,\"month\"),\r\n\t\tview_start = new Date(sd);\r\n\tvar cd = scheduler._currentDate();\r\n\tthis.date.date_part(cd);\r\n\tthis.date.date_part(sd);\r\n\r\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\r\n\tvar tdwidths=[];\r\n\r\n\tfor (var i=0; i<=7; i++) {\r\n\t\tvar cell_width = ((this._cols[i]||0)-1);\r\n\t\tif (i === 0 && this.config.left_border) {\r\n\t\t\tcell_width = cell_width - 1;\r\n\t\t}\r\n\t\ttdwidths[i] = cell_width + \"px\";\r\n\t}\r\n\r\n\tfunction getCellHeight(row){\r\n\t\tvar h = scheduler._colsS.height;\r\n\t\tif(scheduler._colsS.heights[row + 1] !== undefined ){\r\n\t\t\th = scheduler._colsS.heights[row + 1] - (scheduler._colsS.heights[row]||0);\r\n\t\t}\r\n\t\treturn h;\r\n\t}\r\n\r\n\r\n\tvar cellheight = 0;\r\n\r\n\tvar table = document.createElement(\"table\");\r\n\ttable.setAttribute(\"cellpadding\", \"0\");\r\n\ttable.setAttribute(\"cellspacing\", \"0\");\r\n\r\n\tvar tableBody = document.createElement(\"tbody\");\r\n\ttable.appendChild(tableBody);\r\n\r\n\tvar rendered_dates = [];\r\n\tfor (var i=0; i<rows; i++){\r\n\t\tvar row = document.createElement(\"tr\");\r\n\t\ttableBody.appendChild(row);\r\n\t\tvar row_height = Math.max(getCellHeight(i) - scheduler.xy.month_head_height, 0);\r\n\t\tfor (var j=0; j<7; j++) {\r\n\t\t\tvar cell = document.createElement(\"td\");\r\n\t\t\trow.appendChild(cell);\r\n\r\n\t\t\tvar cls = \"\";\r\n\t\t\tif (sd<dd)\r\n\t\t\t\tcls='dhx_before';\r\n\t\t\telse if (sd>=ed)\r\n\t\t\t\tcls='dhx_after';\r\n\t\t\telse if (sd.valueOf()==cd.valueOf())\r\n\t\t\t\tcls='dhx_now';\r\n\r\n\t\t\tif (this._ignores_detected && this._ignores[j]){\r\n\t\t\t\tcls += \" dhx_scale_ignore\";\r\n\t\t\t}\r\n\r\n\t\t\tcell.className = cls + \" \" + this.templates.month_date_class(sd, cd);\r\n\r\n\t\t\tcell.setAttribute(\"data-cell-date\", scheduler.templates.format_date(sd));\r\n\t\t\tvar body_class = \"dhx_month_body\";\r\n\t\t\tvar head_class = \"dhx_month_head\";\r\n\t\t\tif (j === 0 && this.config.left_border) {\r\n\t\t\t\tbody_class += \" dhx_month_body_border\";\r\n\t\t\t\thead_class += \" dhx_month_head_border\";\r\n\t\t\t}\r\n\t\t\tif (!this._ignores_detected || !this._ignores[j]){\r\n\r\n\t\t\t\tthis._waiAria.monthCellAttr(cell, sd);\r\n\r\n\t\t\t\tvar cellHead = document.createElement(\"div\");\r\n\t\t\t\tcellHead.className = head_class;\r\n\t\t\t\tcellHead.innerHTML = this.templates.month_day(sd);\r\n\t\t\t\tcell.appendChild(cellHead);\r\n\r\n\t\t\t\tvar cellBody = document.createElement(\"div\");\r\n\t\t\t\tcellBody.className = body_class;\r\n\t\t\t\tcellBody.style.height = row_height + \"px\";\r\n\t\t\t\tcellBody.style.width = tdwidths[j];\r\n\t\t\t\tcell.appendChild(cellBody);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\r\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\r\n\t\t\t}\r\n\t\t\trendered_dates.push(sd);\r\n\t\t\tvar bf1 = sd.getDate();\r\n\t\t\tsd=this.date.add(sd,1,\"day\");\r\n\t\t\tif (sd.getDate() - bf1 > 1)\r\n\t\t\t\tsd = new Date(sd.getFullYear(), sd.getMonth(), bf1 + 1, 12, 0);\r\n\t\t}\r\n\r\n\t\tscheduler._colsS.heights[i] = cellheight;\r\n\t\tcellheight += getCellHeight(i);\r\n\t}\r\n\r\n\tthis._min_date = view_start;\r\n\tthis._max_date = sd;\r\n\r\n\tdiv.innerHTML = \"\";\r\n\tdiv.appendChild(table);\r\n\r\n\tthis._scales = {};\r\n\tvar divs = div.getElementsByTagName('div');\r\n\tfor (var i=0; i<rendered_dates.length; i++) { // [header, body, header, body, ...]\r\n\t\tvar div = divs[(i*2)+1];\r\n\t\tvar date = rendered_dates[i];\r\n\t\tthis._scales[+date] = div;\r\n\t}\r\n\tfor (var i=0; i<rendered_dates.length; i++) {\r\n\t\tvar date = rendered_dates[i];\r\n\t\tthis.callEvent(\"onScaleAdd\", [this._scales[+date], date]);\r\n\t}\r\n\r\n\r\n\r\n\treturn this._max_date;\r\n};\r\n\r\nscheduler._reset_month_scale=function(b,dd,sd,rows){\r\n\t//recalculates rows height and redraws month layout\r\n\tvar ed=scheduler.date.add(dd,1,\"month\");\r\n\r\n\t//trim time part for comparation reasons\r\n\tvar cd = scheduler._currentDate();\r\n\tthis.date.date_part(cd);\r\n\tthis.date.date_part(sd);\r\n\r\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\r\n\r\n\tvar height = (Math.floor(b.clientHeight/rows) - this.xy.month_head_height);\r\n\r\n\tthis._colsS.height = height + this.xy.month_head_height;\r\n\tthis._colsS.heights = [];\r\n\r\n\treturn scheduler._render_month_scale(b, dd, sd, rows);\r\n\r\n};\r\n\r\nscheduler.getView = function (viewName) {\r\n\tif (!viewName) {\r\n\t\tviewName = scheduler.getState().mode;\r\n\t}\r\n\tif (scheduler.matrix && scheduler.matrix[viewName]) {\r\n\t\treturn scheduler.matrix[viewName];\r\n\t}\r\n\r\n\tif (scheduler._props && scheduler._props[viewName]) {\r\n\t\treturn scheduler._props[viewName];\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nscheduler.getLabel = function(property, key) {\r\n\tvar sections = this.config.lightbox.sections;\r\n\tfor (var i=0; i<sections.length; i++) {\r\n\t\tif(sections[i].map_to == property) {\r\n\t\t\tvar options = sections[i].options;\r\n\t\t\tfor (var j=0; j<options.length; j++) {\r\n\t\t\t\tif(options[j].key == key) {\r\n\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn \"\";\r\n};\r\nscheduler.updateCollection = function(list_name, collection) {\r\n\tvar list = scheduler.serverList(list_name);\r\n\tif (!list) return false;\r\n\tlist.splice(0, list.length);\r\n\tlist.push.apply(list, collection || []);\r\n\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\tscheduler.resetLightbox();\r\n\tscheduler.hideCover();\r\n\treturn true;\r\n};\r\nscheduler._lame_clone = function(object, cache) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tcache = cache || [];\r\n\r\n\tfor (i=0; i<cache.length; i+=2)\r\n\t\tif(object === cache[i])\r\n\t\t\treturn cache[i+1];\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = Object.create(object); // preserve prototype methods\r\n\t\tt = [Array,Date,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\t\tcache.push(object, result);\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = scheduler._lame_clone(object[i], cache);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n};\r\nscheduler._lame_copy = function(target, source) {\r\n\tfor (var key in source) {\r\n\t\tif (source.hasOwnProperty(key)) {\r\n\t\t\ttarget[key] = source[key];\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n};\r\nscheduler._get_date_from_pos = function(pos) {\r\n\tvar start=this._min_date.valueOf()+(pos.y*this.config.time_step+(this._table_view?0:pos.x)*24*60)*60000;\r\n\t//if (this.config.rtl) start=scheduler.date.add(this._max_date, -1, \"day\").valueOf()+(pos.y*this.config.time_step-(this._table_view?0:pos.x)*24*60)*60000;\r\n\treturn new Date(this._correct_shift(start));\r\n};\r\n// n_ev - native event\r\nscheduler.getActionData = function(n_ev) {\r\n\tvar pos = this._mouse_coords(n_ev);\r\n\treturn {\r\n\t\tdate:this._get_date_from_pos(pos),\r\n\t\tsection:pos.section\r\n\t};\r\n};\r\nscheduler._focus = function(node, select){\r\n\tif (node && node.focus){\r\n\t\tif (this._mobile){\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tnode.focus();\r\n\t\t\t},10);\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tif (select && node.select && node.offsetWidth) {\r\n\t\t\t\t\tnode.select();\r\n\t\t\t\t}\r\n\t\t\t\tnode.focus();\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n//non-linear scales\r\nscheduler._get_real_event_length=function(sd, fd, obj){\r\n\tvar ev_length = fd -sd;\r\n\tvar hours = (obj._start_correction + obj._end_correction)||0;\r\n\tvar ignore = this[\"ignore_\"+this._mode];\r\n\r\n\tvar start_slot = 0,\r\n\t\tend_slot;\r\n\tif (obj.render){\r\n\t\tstart_slot = this._get_date_index(obj, sd);\r\n\t\tend_slot = this._get_date_index(obj, fd);\r\n\t} else{\r\n\t\tend_slot = Math.round(ev_length/60/60/1000/24);\r\n\t}\r\n\r\n\tvar last_column = true;\r\n\twhile (start_slot < end_slot){\r\n\t\tvar check = scheduler.date.add(fd, -obj.x_step, obj.x_unit);\r\n\t\tif (ignore && ignore(fd) && (!last_column || (last_column && ignore(check) ))){\r\n\t\t\tev_length -= (fd-check);\r\n\r\n\t\t}else{\r\n\t\t\tlast_column = false;\r\n\t\t\tev_length -= hours;\r\n\t\t}\r\n\r\n\r\n\t\tfd = check;\r\n\t\tend_slot--;\r\n\t}\r\n\treturn ev_length;\r\n};\r\nscheduler._get_fictional_event_length=function(end_date, ev_length, obj, back){\r\n\tvar sd = new Date(end_date);\r\n\tvar dir = back ? -1 : 1;\r\n\r\n\t//get difference caused by first|last hour\r\n\tif (obj._start_correction || obj._end_correction){\r\n\t\tvar today;\r\n\t\tif (back)\r\n\t\t\ttoday = (sd.getHours()*60+sd.getMinutes()) - (obj.first_hour||0)*60;\r\n\t\telse\r\n\t\t\ttoday = (obj.last_hour||0)*60 - (sd.getHours()*60+sd.getMinutes());\r\n\t\tvar per_day = (obj.last_hour - obj.first_hour)*60;\r\n\t\tvar days = Math.ceil( (ev_length / (60*1000) - today ) / per_day);\r\n\t\tif(days < 0) days = 0;\r\n\t\tev_length += days * (24*60 - per_day) * 60 * 1000;\r\n\t}\r\n\r\n\tvar fd = new Date(end_date*1+ev_length*dir);\r\n\tvar ignore = this[\"ignore_\"+this._mode];\r\n\r\n\tvar start_slot = 0,\r\n\t\tend_slot;\r\n\tif (obj.render){\r\n\t\tstart_slot = this._get_date_index(obj, sd);\r\n\t\tend_slot = this._get_date_index(obj, fd);\r\n\t} else{\r\n\t\tend_slot = Math.round(ev_length/60/60/1000/24);\r\n\t}\r\n\r\n\twhile (start_slot*dir <= end_slot*dir){\r\n\t\tvar check = scheduler.date.add(sd, obj.x_step*dir, obj.x_unit);\r\n\t\tif (ignore && ignore(sd)){\r\n\t\t\tev_length += (check-sd)*dir;\r\n\t\t\tend_slot += dir;\r\n\t\t}\r\n\r\n\t\tsd = check;\r\n\t\tstart_slot+=dir;\r\n\t}\r\n\r\n\treturn ev_length;\r\n};\r\n\r\nscheduler._get_section_view = function(){\r\n\treturn this.getView();\r\n};\r\n\r\nscheduler._get_section_property = function(){\r\n\tif(this.matrix && this.matrix[this._mode]){\r\n\t\treturn this.matrix[this._mode].y_property;\r\n\t}else if(this._props && this._props[this._mode]){\r\n\t\treturn this._props[this._mode].map_to;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nscheduler._is_initialized = function(){\r\n\tvar state = this.getState();\r\n\treturn (this._obj && state.date && state.mode);\r\n};\r\nscheduler._is_lightbox_open = function(){\r\n\tvar state = this.getState();\r\n\treturn state.lightbox_id !== null && state.lightbox_id !== undefined;\r\n};\r\n\r\nscheduler._getClassName = function(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn className || \"\";\r\n};\r\nscheduler.event = function dhtmlxEvent(el, event, handler){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, false);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n};\r\n\r\nscheduler.eventRemove = function(el, event, handler){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, false);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n};\r\n\r\n(function(){\r\n\tfunction isVisible(node){\r\n\t\tvar display = false,\r\n\t\t\tvisibility = false;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tvar style = window.getComputedStyle(node, null);\r\n\t\t\tdisplay = style[\"display\"];\r\n\t\t\tvisibility = style[\"visibility\"];\r\n\t\t}else if(node.currentStyle){\r\n\t\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t\t}\r\n\r\n\t\tvar hiddenSection = false;\r\n\t\tvar recurringSection = scheduler._locate_css({target:node}, \"dhx_form_repeat\", false);\r\n\t\tif(recurringSection){\r\n\t\t\thiddenSection = !!(recurringSection.style.height == \"0px\");\r\n\t\t}\r\n\t\thiddenSection = hiddenSection || !(node.offsetHeight);\r\n\r\n\t\treturn (display != \"none\" && visibility != \"hidden\" && !hiddenSection);\r\n\t}\r\n\r\n\tfunction hasNonNegativeTabIndex(node){\r\n\t\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n\t}\r\n\r\n\tfunction hasHref(node){\r\n\t\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\t\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\t\treturn !!node.getAttribute(\"href\");\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction isEnabled(node){\r\n\t\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\t\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\t\treturn !node.hasAttribute(\"disabled\");\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\tscheduler._getFocusableNodes = function getFocusableNodes(root){\r\n\t\tvar nodes = root.querySelectorAll([\r\n\t\t\t\"a[href]\",\r\n\t\t\t\"area[href]\",\r\n\t\t\t\"input\",\r\n\t\t\t\"select\",\r\n\t\t\t\"textarea\",\r\n\t\t\t\"button\",\r\n\t\t\t\"iframe\",\r\n\t\t\t\"object\",\r\n\t\t\t\"embed\",\r\n\t\t\t\"[tabindex]\",\r\n\t\t\t\"[contenteditable]\"\r\n\t\t].join(\", \"));\r\n\r\n\t\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\t\t\r\n\t\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\t\tnodesArray[i].$position = i;\r\n\t\t\t// we remember original nodes order, \r\n\t\t\t// so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \r\n\t\t\t// since some browsers do unstable sort\r\n\t\t}\r\n\t\t\r\n\t\tnodesArray.sort(function(a, b) {\r\n\t\t\tif(a.tabIndex === 0 && b.tabIndex !== 0){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif(a.tabIndex !== 0 && b.tabIndex === 0){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (a.tabIndex === b.tabIndex){\r\n\t\t\t\t// ensure we do stable sort\r\n\t\t\t\treturn a.$position - b.$position;\r\n\t\t\t}\r\n\t\t\tif (a.tabIndex < b.tabIndex) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t});\r\n\t\t\r\n\t\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\t\tvar node = nodesArray[i];\r\n\t\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\t\tif(!isValid){\r\n\t\t\t\tnodesArray.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn nodesArray;\r\n\t};\r\n})();\r\n\r\nscheduler._trim = function(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n};\r\n\r\nscheduler._isDate = function(obj){\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nscheduler._isObject = function(obj){\r\n\treturn (obj && typeof obj == \"object\");\r\n};\r\n(function(){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tscheduler._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tif(typeof attr[i] != \"function\" && typeof attr[i] != \"object\") {\r\n\t\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\t\t},\r\n\t\tsetAttributes: function(div, values){\r\n\t\t\tfor(var i in values){\r\n\t\t\t\tdiv.setAttribute(i, stripHTMLLite(values[i]));\r\n\t\t\t}\r\n\t\t\treturn div;\r\n\t\t},\r\n\r\n\t\tlabelAttr: function(div, content){\r\n\t\t\treturn this.setAttributes(div, {\"aria-label\": content});\r\n\t\t},\r\n\t\tlabel: function(label){\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\t// day/week/units\r\n\r\n\t\thourScaleAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\r\n\t\t},\r\n\t\tmonthCellAttr: function(div, date){\r\n\t\t\tthis.labelAttr(div, scheduler.templates.day_date(date));\r\n\t\t},\r\n\r\n\t\tnavBarDateAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\t\t},\r\n\t\tdayHeaderAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\t\t},\r\n\r\n\t\tdayColumnAttr: function(div, date){\r\n\t\t\tthis.dayHeaderAttr(div, scheduler.templates.day_date(date));\r\n\t\t},\r\n\r\n\t\theaderButtonsAttributes: function(div, label){\r\n\t\t\treturn this.setAttributes(div, {\"role\":\"button\", \"aria-label\":label});\r\n\t\t},\r\n\r\n\t\theaderToggleState: function(div, isActive){\r\n\t\t\treturn this.setAttributes(div, {\"aria-pressed\": isActive ? \"true\" : \"false\"});\r\n\t\t},\r\n\r\n\r\n\t\tgetHeaderCellAttr:function(dateString){\r\n\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\teventAttr: function(event, div){\r\n\t\t\tthis._eventCommonAttr(event, div);\r\n\t\t},\r\n\r\n\r\n\t\t_eventCommonAttr: function(event, div){\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(scheduler.templates.event_text(event.start_date, event.end_date, event)));\r\n\r\n\t\t\tif(scheduler.config.readonly){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(event.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(scheduler.getState().select_id == event.id) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetEventBarAttr: function(event, div){\r\n\t\t\tthis._eventCommonAttr(event, div);\r\n\t\t},\r\n\r\n\t\t_getAttributes: function(attributeSetter, arg){\r\n\t\t\tvar result = {\r\n\t\t\t\tsetAttribute:function(name, value){\r\n\t\t\t\t\tthis[name] = value;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tattributeSetter.apply(this, [arg, result]);\r\n\t\t\treturn result;\r\n\r\n\t\t},\r\n\r\n\t\teventBarAttrString: function(event){\r\n\t\t\treturn this.getAttributeString(this._getAttributes(this.setEventBarAttr, event));\r\n\t\t},\r\n\r\n\r\n\r\n\t\tagendaHeadAttrString :function(){\r\n\t\t\treturn this.getAttributeString({role: \"row\"});\r\n\t\t},\r\n\t\tagendaHeadDateString :function(label){\r\n\t\t\treturn this.getAttributeString({role: \"columnheader\", \"aria-label\": label});\r\n\t\t},\r\n\t\tagendaHeadDescriptionString :function(label){\r\n\t\t\treturn this.agendaHeadDateString(label);\r\n\t\t},\r\n\t\tagendaDataAttrString: function(){\r\n\t\t\treturn this.getAttributeString({role: \"grid\"});\r\n\t\t},\r\n\t\tagendaEventAttrString: function(event){\r\n\t\t\tvar attrs = this._getAttributes(this._eventCommonAttr, event);\r\n\r\n\t\t\tattrs[\"role\"] = \"row\";\r\n\r\n\t\t\treturn this.getAttributeString(attrs);\r\n\r\n\t\t},\r\n\t\tagendaDetailsBtnString: function(){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels.icon_details});\r\n\t\t},\r\n\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn this.getAttributeString({role: \"grid\"});\r\n\t\t},\r\n\r\n\t\tgridRowAttrString: function(event){\r\n\t\t\treturn this.agendaEventAttrString(event);\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(event, column, value){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": [\r\n\t\t\t\t(column.label === undefined ? column.id : column.label),\r\n\t\t\t\t\": \",\r\n\t\t\t\tvalue\r\n\t\t\t]});\r\n\t\t},\r\n\r\n\t\tmapAttrString: function(){\r\n\t\t\treturn this.gridAttrString();\r\n\t\t},\r\n\t\tmapRowAttrString: function(event){\r\n\t\t\treturn this.gridRowAttrString(event);\r\n\t\t},\r\n\t\tmapDetailsBtnString: function(){\r\n\t\t\treturn this.agendaDetailsBtnString();\r\n\t\t},\r\n\r\n\t\tminicalHeader: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"id\":headerId+\"\",\r\n\t\t\t\t\"aria-live\":\"assertice\",\r\n\t\t\t\t\"aria-atomic\":\"true\"\r\n\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalGrid: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"aria-labelledby\":headerId+\"\",\r\n\t\t\t\t\"role\":\"grid\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalRow: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"row\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalDayCell: function(div, date){\r\n\t\t\tvar selected = (date.valueOf() < scheduler._max_date.valueOf() && date.valueOf() >= scheduler._min_date.valueOf());\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"gridcell\",\r\n\t\t\t\t\"aria-label\": scheduler.templates.day_date(date),\r\n\t\t\t\t\"aria-selected\": selected ? \"true\" : \"false\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalHeadCell: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"columnheader\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tweekAgendaDayCell: function(div, date){\r\n\t\t\tvar header = div.querySelector(\".dhx_wa_scale_bar\");\r\n\t\t\tvar content = div.querySelector(\".dhx_wa_day_data\");\r\n\t\t\tvar headerId = scheduler.uid() + \"\";\r\n\t\t\tthis.setAttributes(header, { \"id\": headerId});\r\n\t\t\tthis.setAttributes(content, { \"aria-labelledby\": headerId});\r\n\r\n\t\t},\r\n\t\tweekAgendaEvent: function(div, event){\r\n\t\t\tthis.eventAttr(event, div);\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxSectionButtonAttrString: function(label){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tyearHeader: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"id\":headerId+\"\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tyearGrid: function(div, headerId){\r\n\t\t\tthis.minicalGrid(div, headerId);\r\n\t\t},\r\n\t\tyearHeadCell: function(div){\r\n\t\t\treturn this.minicalHeadCell(div);\r\n\t\t},\r\n\t\tyearRow: function(div){\r\n\t\t\treturn this.minicalRow(div);\r\n\t\t},\r\n\t\tyearDayCell: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"gridcell\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\t\teventMenuAttrString: function(iconName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[iconName]});\r\n\t\t},\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.year;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.month;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.day;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.hour + \" \" + scheduler.locale.labels.minute;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !scheduler.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in scheduler._waiAria){\r\n\t\tscheduler._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \" \";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(scheduler._waiAria[i]);\r\n\t}\r\n\r\n\r\n})();\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\" && \r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\" && \r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\" &&\r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nscheduler.utils = {\r\n\tmixin: function mixin (target, source, force){\r\n\t\tfor (var f in source)\r\n\t\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\t\treturn target;\r\n\t},\r\n\tcopy: function copy(object) {\r\n\t\tvar i, result; // iterator, types array, result\r\n\t\r\n\t\tif (object && typeof object == \"object\") {\r\n\t\r\n\t\t\tswitch (true){\r\n\t\t\t\tcase (isDate(object)):\r\n\t\t\t\t\tresult = new Date(object);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isArray(object)):\r\n\t\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isStringObject(object)):\r\n\t\t\t\t\tresult = new String(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isNumberObject(object)):\r\n\t\t\t\t\tresult = new Number(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isBooleanObject(object)):\r\n\t\t\t\t\tresult = new Boolean(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t\tfor (i in object) {\r\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result || object;\r\n\t}\r\n};\r\nscheduler.$domHelpers = {\r\n\t/**\r\n\t *     @desc: Calculate absolute position of html object\r\n\t *     @type: private\r\n\t *     @param: htmlObject - html object\r\n\t *     @topic: 0\r\n\t */\r\n\tgetAbsoluteLeft: function getAbsoluteLeft(htmlObject){\r\n\t\treturn this.getOffset(htmlObject).left;\r\n\t},\r\n\t/**\r\n\t *     @desc: Calculate absolute position of html object\r\n\t *     @type: private\r\n\t *     @param: htmlObject - html object\r\n\t *     @topic: 0\r\n\t */\r\n\tgetAbsoluteTop: function getAbsoluteTop(htmlObject){\r\n\t\treturn this.getOffset(htmlObject).top;\r\n\t},\r\n\r\n\tgetOffsetSum: function getOffsetSum(elem) {\r\n\t\tvar top=0, left=0;\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\t\treturn {top: top, left: left};\r\n\t},\r\n\r\n\tgetOffsetRect: function getOffsetRect(elem) {\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\r\n\t\tvar top = 0,\r\n\t\t\tleft = 0;\r\n\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent#Mobile_Tablet_or_Desktop\r\n\t\tif (!/Mobi/.test(navigator.userAgent)) {\r\n\t\t\tvar body = document.body;\r\n\t\t\tvar docElem = document.documentElement;\r\n\t\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\r\n\t\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\t\tleft = box.left + scrollLeft - clientLeft;\r\n\t\t}else {\r\n\t\t\t// incorrect left coordinate on mobile zoom\r\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=489206\r\n\r\n\t\t\tvar dummy = document.createElement(\"div\");\r\n\t\t\tdummy.style.position=\"absolute\";\r\n\t\t\tdummy.style.left=\"0px\";\r\n\t\t\tdummy.style.top=\"0px\";\r\n\t\t\tdummy.style.width=\"1px\";\r\n\t\t\tdummy.style.height = \"1px\";\r\n\r\n\t\t\tdocument.body.appendChild(dummy);\r\n\t\t\tvar dummyBox = dummy.getBoundingClientRect();\r\n\t\t\ttop  = box.top - dummyBox.top;\r\n\t\t\tleft = box.left - dummyBox.left;\r\n\r\n\t\t\tdummy.parentNode.removeChild(dummy);\r\n\t\t}\r\n\r\n\t\treturn { top: Math.round(top), left: Math.round(left) };\r\n\t},\r\n\r\n\tgetOffset: function getOffset(elem) {\r\n\t\tif (elem.getBoundingClientRect) {\r\n\t\t\treturn this.getOffsetRect(elem);\r\n\t\t} else {\r\n\t\t\treturn this.getOffsetSum(elem);\r\n\t\t}\r\n\t},\r\n\r\n\tclosest: function(element, selector){\r\n\t\tif(!element || !selector){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn closest(element, selector);\r\n\t},\r\n\tinsertAfter: function(newNode, referenceNode){\r\n\t\tif(referenceNode.nextSibling){\r\n\t\t\treferenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n\t\t}else{\r\n\t\t\treferenceNode.parentNode.appendChild(newNode);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar closest;\r\nif(Element.prototype.closest){\r\n\tclosest = function(element, selector){\r\n\t\treturn element.closest(selector);\r\n\t};\r\n}else{\r\n\tvar matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n\tclosest = function(element, selector) {\r\n\t\tvar el = element;\r\n\t\tdo {\r\n\t\t\tif (matches.call(el, selector)){\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1);\r\n\t\treturn null;\r\n\t};\r\n}\r\n\r\nscheduler.$env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\nscheduler.$ajax = {\r\n\r\n\t_obj: scheduler,\r\n\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t// if true - do not add extra params\r\n\tcache: true,\r\n\r\n\t// default method for load/loadStruct, post/get allowed\r\n\tmethod: \"get\",\r\n\r\n\tparse: function(data) {\r\n\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\tvar obj;\r\n\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\tif (window.DOMParser && !scheduler.$env.isIE) { // ff,ie9\r\n\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\tobj.async = \"false\";\r\n\t\t\tobj.loadXML(data);\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\txmltop: function(tagname, xhr, obj) {\r\n\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (obj !== -1) this._obj.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\treturn document.createElement(\"DIV\");\r\n\t},\r\n\txpath: function(xpathExp, docObj) {\r\n\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\tif (scheduler.$env.isIE) {\r\n\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t} else {\r\n\t\t\tvar rows = [];\r\n\t\t\tvar first;\r\n\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\twhile (true){\r\n\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\tif(first){\r\n\t\t\t\t\trows.push(first);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rows;\r\n\t\t}\r\n\t},\r\n\tquery: function(config) {\r\n\t\tthis._call(\r\n\t\t\t(config.method || \"GET\"),\r\n\t\t\tconfig.url,\r\n\t\t\tconfig.data || \"\",\r\n\t\t\t(config.async || true),\r\n\t\t\tconfig.callback,\r\n\t\t\tnull,\r\n\t\t\tconfig.headers\r\n\t\t);\r\n\t},\r\n\tget: function(url, onLoad) {\r\n\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t},\r\n\tgetSync: function(url) {\r\n\t\treturn this._call(\"GET\", url, null, false);\r\n\t},\r\n\tput: function(url, postData, onLoad) {\r\n\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t},\r\n\tdel: function(url, postData, onLoad) {\r\n\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t},\r\n\tpost: function(url, postData, onLoad) {\r\n\t\tif (arguments.length == 1) {\r\n\t\t\tpostData = \"\";\r\n\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\tonLoad = postData;\r\n\t\t\tpostData = \"\";\r\n\t\t} else {\r\n\t\t\tpostData = String(postData);\r\n\t\t}\r\n\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t},\r\n\tpostSync: function(url, postData) {\r\n\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\treturn this._call(\"POST\", url, postData, false);\r\n\t},\r\n\tgetLong: function(url, onLoad) {\r\n\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t},\r\n\tpostLong: function(url, postData, onLoad) {\r\n\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\tonLoad = postData;\r\n\t\t\tpostData = \"\";\r\n\t\t}\r\n\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t},\r\n\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\t\tvar scheduler = this._obj;\r\n\t\tvar t = (window.XMLHttpRequest && !scheduler.$env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\r\n\t\tif (!!async) {\r\n\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\tif (!scheduler.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t},1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t}\r\n\r\n\t\tt.open(method, url, async);\r\n\r\n\t\tif (headers){\r\n\t\t\tfor (var key in headers)\r\n\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t} else if (method == \"GET\") {\r\n\t\t\tpostData = null;\r\n\t\t}\r\n\r\n\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\tt.send(postData);\r\n\r\n\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t},\r\n\turlSeparator: function(str){\r\n\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\treturn \"&\";\r\n\t\telse\r\n\t\t\treturn \"?\";\r\n\t}\r\n};\r\nvar generateStringToDate = function (format, utc) {\r\n\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (var i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\": splt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\": splt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\": splt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\": splt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\": splt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\": splt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\": splt += \"set[1]=this.locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\": splt += \"set[1]=this.locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\treturn new Function(\"date\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n};\r\n\r\nscheduler.date = {\r\n\tinit:function(){\r\n\t\tvar s = scheduler.locale.date.month_short;\r\n\t\tvar t = scheduler.locale.date.month_short_hash = {};\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tt[s[i]]=i;\r\n\r\n\t\tvar s = scheduler.locale.date.month_full;\r\n\t\tvar t = scheduler.locale.date.month_full_hash = {};\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tt[s[i]]=i;\r\n\t},\r\n\t_bind_host_object : function(method){\r\n\t\tif(method.bind){\r\n\t\t\treturn method.bind(scheduler);\r\n\t\t}else{\r\n\t\t\treturn function(){ return method.apply(scheduler, arguments); };\r\n\t\t}\r\n\t},\r\n\tdate_part:function(date){\r\n\t\tvar old = new Date(date);\r\n\t\tdate.setHours(0);\r\n\t\tdate.setMinutes(0);\r\n\t\tdate.setSeconds(0);\r\n\t\tdate.setMilliseconds(0);\r\n\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()) )\r\n\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\treturn date;\r\n\t},\r\n\ttime_part:function(date){\r\n\t\treturn (date.valueOf()/1000 - date.getTimezoneOffset()*60)%86400;\r\n\t},\r\n\tweek_start:function(date){\r\n\t\tvar shift=date.getDay();\r\n\t\tif (scheduler.config.start_on_monday){\r\n\t\t\tif (shift===0) shift=6;\r\n\t\t\telse shift--;\r\n\t\t}\r\n\t\treturn this.date_part(this.add(date,-1*shift,\"day\"));\r\n\t},\r\n\tmonth_start:function(date){\r\n\t\tdate.setDate(1);\r\n\t\treturn this.date_part(date);\r\n\t},\r\n\tyear_start:function(date){\r\n\t\tdate.setMonth(0);\r\n\t\treturn this.month_start(date);\r\n\t},\r\n\tday_start:function(date){\r\n\t\treturn this.date_part(date);\r\n\t},\r\n\t_add_days:function(date, inc){\r\n\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\tndate.setDate(ndate.getDate() + inc);\r\n\r\n\t\t// Workaround for Safari/iOS timezone bug, ref:OKZ-149693\r\n\t\tif(inc == Math.round(inc) && inc > 0){\r\n\t\t\tvar datesDiff = +ndate - +date,\r\n\t\t\t\trest = datesDiff % (24*60*60*1000);\r\n\t\t\tif(rest && date.getTimezoneOffset() == ndate.getTimezoneOffset()){\r\n\t\t\t\tvar hours = rest / (60* 60 * 1000);\r\n\t\t\t\tndate.setTime(ndate.getTime() + (24 - hours) * 60 * 60 * 1000);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t(ndate.getDate() < date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()) )\r\n\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\treturn ndate;\r\n\t},\r\n\tadd:function(date,inc,mode){\r\n\t\tvar ndate=new Date(date.valueOf());\r\n\t\tswitch(mode){\r\n\t\t\tcase \"day\":\r\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"week\":\r\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc * 7);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"month\": ndate.setMonth(ndate.getMonth()+inc); break;\r\n\t\t\tcase \"year\": ndate.setYear(ndate.getFullYear()+inc); break;\r\n\t\t\tcase \"hour\":\r\n\t\t\t\t/*\r\n\t\t\t\t setHour(getHour() + inc) and setMinutes gives weird result when is applied on a Daylight Saving time switch\r\n\t\t\t\t setTime seems working as expected\r\n\t\t\t\t*/\r\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"minute\":\r\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn scheduler.date[\"add_\"+mode](date,inc,mode);\r\n\t\t}\r\n\t\treturn ndate;\r\n\t},\r\n\tto_fixed:function(num){\r\n\t\tif (num<10)\treturn \"0\"+num;\r\n\t\treturn num;\r\n\t},\r\n\tcopy:function(date){\r\n\t\treturn new Date(date.valueOf());\r\n\t},\r\n\tdate_to_str:function(format,utc){\r\n\t\tformat=format.replace(/%[a-zA-Z]/g,function(a){\r\n\t\t\tswitch(a){\r\n\t\t\t\tcase \"%d\": return \"\\\"+this.date.to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\tcase \"%m\": return \"\\\"+this.date.to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\tcase \"%j\": return \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\tcase \"%n\": return \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\tcase \"%y\": return \"\\\"+this.date.to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\tcase \"%Y\": return \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\tcase \"%D\": return \"\\\"+this.locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%l\": return \"\\\"+this.locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%M\": return \"\\\"+this.locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%F\": return \"\\\"+this.locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%h\": return \"\\\"+this.date.to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%g\": return \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%G\": return \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\tcase \"%H\": return \"\\\"+this.date.to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\tcase \"%i\": return \"\\\"+this.date.to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\tcase \"%a\": return \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\tcase \"%A\": return \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\tcase \"%s\": return \"\\\"+this.date.to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\tcase \"%W\": return \"\\\"+this.date.to_fixed(this.date.getISOWeek(date))+\\\"\";\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (utc) format=format.replace(/date\\.get/g,\"date.getUTC\");\r\n\t\tvar func = new Function(\"date\",\"return \\\"\"+format+\"\\\";\");\r\n\r\n\t\treturn scheduler.date._bind_host_object(func);\r\n\t},\r\n\tstr_to_date:function(format, utc, exactFormat){\r\n\t\tvar parseExactFormat = generateStringToDate(format, utc);\r\n\t\t//return scheduler.date._bind_host_object(func);\r\n\r\n\t\tvar yyyyMMddhhIIss = /^[0-9]{4}(\\-|\\/)[0-9]{2}(\\-|\\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\r\n\r\n\t\t// MM/dd/yyyy - default old format for xml-date\r\n\t\tvar MMddyyyyhhIIss = /^[0-9]{2}\\/[0-9]{2}\\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/;\r\n\t\t// dd-MM-yyyy - default old format for api-date\r\n\t\tvar ddMMyyyyhhIIss = /^[0-9]{2}\\-[0-9]{2}\\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\r\n\t\tvar ISO8601 = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\r\n\r\n\t\tvar isYMDDate = function (datestr) {\r\n\t\t\treturn yyyyMMddhhIIss.test(String(datestr));\r\n\t\t};\r\n\r\n\t\tvar isMDYDate = function (datestr) {\r\n\t\t\treturn MMddyyyyhhIIss.test(String(datestr));\r\n\t\t};\r\n\t\tvar isDMYDate = function (datestr) {\r\n\t\t\treturn ddMMyyyyhhIIss.test(String(datestr));\r\n\t\t};\r\n\t\tvar isISO8601 = function (datestr) {\r\n\t\t\treturn ISO8601.test(datestr);\r\n\t\t};\r\n\r\n\t\tvar parseYMD = generateStringToDate(\"%Y-%m-%d %H:%i:%s\", utc);\r\n\t\tvar parseMDY = generateStringToDate(\"%m/%d/%Y %H:%i:%s\", utc);\r\n\t\tvar parseDMY = generateStringToDate(\"%d-%m-%Y %H:%i:%s\", utc);\r\n\r\n\t\treturn function (dateString) {\r\n\r\n\t\t\tif (!exactFormat && !scheduler.config.parse_exact_format) {\r\n\t\t\t\tif (dateString && dateString.getISOWeek) {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t} else if (typeof dateString === \"number\") {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t} else if (isYMDDate(dateString)) {\r\n\t\t\t\t\treturn parseYMD(dateString);\r\n\t\t\t\t} else if (isMDYDate(dateString)) {\r\n\t\t\t\t\treturn parseMDY(dateString);\r\n\t\t\t\t} else if (isDMYDate(dateString)) {\r\n\t\t\t\t\treturn parseDMY(dateString);\r\n\t\t\t\t} else if (isISO8601(dateString)) {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn parseExactFormat.call(scheduler, dateString);\r\n\t\t};\r\n\t},\r\n\tgetISOWeek: function(ndate) {\r\n\t\tif(!ndate) return false;\r\n\t\tndate = this.date_part(new Date(ndate));\r\n\t\tvar nday = ndate.getDay();\r\n\t\tif (nday === 0) {\r\n\t\t\tnday = 7;\r\n\t\t}\r\n\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\tvar ordinal_date = Math.round( (first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\tvar week_number = 1 + Math.floor( ordinal_date / 7);\r\n\t\treturn week_number;\r\n\t},\r\n\tgetUTCISOWeek: function(ndate){\r\n\t\treturn this.getISOWeek(this.convert_to_utc(ndate));\r\n\t},\r\n\tconvert_to_utc: function(date) {\r\n\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t}\r\n};\r\nscheduler.locale = {\r\n\tdate:{\r\n\t\tmonth_full:[\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short:[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full:[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short:[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels:{\r\n\t\tdhx_cal_today_button:\"Today\",\r\n\t\tday_tab:\"Day\",\r\n\t\tweek_tab:\"Week\",\r\n\t\tmonth_tab:\"Month\",\r\n\t\tnew_event:\"New event\",\r\n\t\ticon_save:\"Save\",\r\n\t\ticon_cancel:\"Cancel\",\r\n\t\ticon_details:\"Details\",\r\n\t\ticon_edit:\"Edit\",\r\n\t\ticon_delete:\"Delete\",\r\n\t\tconfirm_closing:\"\",//Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting:\"Event will be deleted permanently, are you sure?\",\r\n\t\tsection_description:\"Description\",\r\n\t\tsection_time:\"Time period\",\r\n\t\tfull_day:\"Full day\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring:\"Do you want to edit the whole set of repeated events?\",\r\n\t\tsection_recurring:\"Repeat event\",\r\n\t\tbutton_recurring:\"Disabled\",\r\n\t\tbutton_recurring_open:\"Enabled\",\r\n\t\tbutton_edit_series: \"Edit series\",\r\n\t\tbutton_edit_occurrence: \"Edit occurrence\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab:\"Agenda\",\r\n\t\tdate:\"Date\",\r\n\t\tdescription:\"Description\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab:\"Year\",\r\n\r\n\t\t/* week agenda extension */\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Daily\",//name=\"repeat\" value=\"day\"\r\n\t\trepeat_radio_week: \"Weekly\",//name=\"repeat\" value=\"week\r\n\t\trepeat_radio_month: \"Monthly\",\r\n\t\trepeat_radio_year: \"Yearly\",\r\n\t\trepeat_radio_day_type: \"Every\",\r\n\t\trepeat_text_day_count: \"day\",\r\n\t\trepeat_radio_day_type2: \"Every workday\",\r\n\t\trepeat_week: \" Repeat every\",\r\n\t\trepeat_text_week_count: \"week next days:\",\r\n\t\trepeat_radio_month_type: \"Repeat\",\r\n\t\trepeat_radio_month_start: \"On\",\r\n\t\trepeat_text_month_day: \"day every\",\r\n\t\trepeat_text_month_count: \"month\",\r\n\t\trepeat_text_month_count2_before: \"every\",\r\n\t\trepeat_text_month_count2_after: \"month\",\r\n\t\trepeat_year_label: \"On\",\r\n\t\tselect_year_day2: \"of\",\r\n\t\trepeat_text_year_day: \"day\",\r\n\t\tselect_year_month: \"month\",\r\n\t\trepeat_radio_end: \"No end date\",\r\n\t\trepeat_text_occurences_count: \"occurrences\",\r\n\t\trepeat_radio_end2: \"After\",\r\n\t\trepeat_radio_end3: \"End by\",\r\n\t\tmonth_for_recurring: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tday_for_recurring: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]//\r\n\t}\r\n};\r\n\r\n\r\n/*\r\n%e\tDay of the month without leading zeros (01..31)\r\n%d\tDay of the month, 2 digits with leading zeros (01..31)\r\n%j\tDay of the year, 3 digits with leading zeros (001..366)\r\n%a\tA textual representation of a day, two letters\r\n%W\tA full textual representation of the day of the week\r\n\r\n%c\tNumeric representation of a month, without leading zeros (0..12)\r\n%m\tNumeric representation of a month, with leading zeros (00..12)\r\n%b\tA short textual representation of a month, three letters (Jan..Dec)\r\n%M\tA full textual representation of a month, such as January or March (January..December)\r\n\r\n%y\tA two digit representation of a year (93..03)\r\n%Y\tA full numeric representation of a year, 4 digits (1993..03)\r\n*/\r\n\r\nscheduler.config={\r\n\tdefault_date: \"%j %M %Y\",\r\n\tmonth_date: \"%F %Y\",\r\n\tload_date: \"%Y-%m-%d\",\r\n\tweek_date: \"%l\",\r\n\tday_date: \"%D, %F %j\",\r\n\thour_date: \"%H:%i\",\r\n\tmonth_day: \"%d\",\r\n\t//xml_date: \"%m/%d/%Y %H:%i\",\r\n\tdate_format: \"%Y-%m-%d %H:%i\",\r\n\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\tparse_exact_format: false,\r\n\tpreserve_length:true,\r\n\ttime_step: 5,\r\n\r\n\tstart_on_monday: true,\r\n\tfirst_hour: 0,\r\n\tlast_hour: 24,\r\n\treadonly: false,\r\n\tdrag_resize: true,\r\n\tdrag_move: true,\r\n\tdrag_create: true,\r\n\tdrag_event_body: true,\r\n\tdblclick_create: true,\r\n\tedit_on_create: true,\r\n\tdetails_on_create: false,\r\n\theader: null,\r\n\tresize_month_events:false,\r\n\tresize_month_timed:false,\r\n\t\r\n\tresponsive_lightbox: false,\r\n\r\n\trtl:false,\r\n\r\n\tcascade_event_display: false,\r\n\tcascade_event_count: 4,\r\n\tcascade_event_margin: 30,\r\n\r\n\tmulti_day:true,\r\n\tmulti_day_height_limit: 0,\r\n\r\n\tdrag_lightbox: true,\r\n\tpreserve_scroll: true,\r\n\tselect: true,\r\n\r\n\tserver_utc: false,\r\n\ttouch:true,\r\n\ttouch_tip:true,\r\n\ttouch_drag:500,\r\n\ttouch_swipe_dates: false,\r\n\tquick_info_detached:true,\r\n\r\n\tpositive_closing: false,\r\n\r\n\tdrag_highlight: true,\r\n\tlimit_drag_out: false,\r\n\ticons_edit: [\"icon_save\", \"icon_cancel\"],\r\n\ticons_select: [\"icon_details\", \"icon_edit\", \"icon_delete\"],\r\n\tbuttons_left: [\"dhx_save_btn\", \"dhx_cancel_btn\"],\r\n\tbuttons_right: [\"dhx_delete_btn\"],\r\n\tlightbox: {\r\n\t\tsections: [\r\n\t\t\t{name: \"description\", map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t{name: \"time\", height: 72, type: \"time\", map_to: \"auto\"}\r\n\t\t]\r\n\t},\r\n\thighlight_displayed_event: true,\r\n\tleft_border: false,\r\n\r\n\tajax_error: \"alert\",//\"ignore\"|\"console\"\r\n\tdelay_render: 0,\r\n\ttimeline_swap_resize: true,\r\n\twai_aria_attributes: true,\r\n\twai_aria_application_role: true\r\n};\r\n\r\nscheduler.config.buttons_left.$inital = scheduler.config.buttons_left.join();\r\nscheduler.config.buttons_right.$inital = scheduler.config.buttons_right.join();\r\n\r\nscheduler._helpers = {\r\n\tparseDate: function parseDate(date) {\r\n\t\tvar parse = scheduler.templates.xml_date || scheduler.templates.parse_date;\r\n\t\treturn parse(date);\r\n\t},\r\n\tformatDate: function formatDate(date) {\r\n\t\tvar format = scheduler.templates.xml_format || scheduler.templates.format_date;\r\n\t\treturn format(date);\r\n\t}\r\n};\r\n\r\nscheduler.templates={};\r\nscheduler.init_templates=function(){\r\n\tvar labels = scheduler.locale.labels;\r\n\tlabels.dhx_save_btn \t= labels.icon_save;\r\n\tlabels.dhx_cancel_btn \t= labels.icon_cancel;\r\n\tlabels.dhx_delete_btn \t= labels.icon_delete;\r\n\r\n\r\n\tvar d=scheduler.date.date_to_str;\r\n\tvar c=scheduler.config;\r\n\tvar f = function(a,b){\r\n\t\tfor (var c in b)\r\n\t\t\tif (!a[c]) a[c]=b[c];\r\n\t};\r\n\tf(scheduler.templates,{\r\n\t\tday_date:d(c.default_date),\r\n\t\tmonth_date:d(c.month_date),\r\n\t\tweek_date:function(d1,d2){\r\n\t\t\tif(c.rtl) {\r\n\t\t\t\treturn scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"))+\" &ndash; \"+scheduler.templates.day_date(d1);\r\n\t\t\t} \r\n\t\t\treturn scheduler.templates.day_date(d1)+\" &ndash; \"+scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"));\r\n\t\t},\r\n\t\tday_scale_date:d(c.default_date),\r\n\t\tmonth_scale_date:d(c.week_date),\r\n\t\tweek_scale_date:d(c.day_date),\r\n\t\thour_scale:d(c.hour_date),\r\n\t\ttime_picker:d(c.hour_date),\r\n\t\tevent_date:d(c.hour_date),\r\n\t\tmonth_day:d(c.month_day),\r\n\r\n\t\tload_format: d(c.load_date),\r\n\t//\txml_date:scheduler.date.str_to_date(c.xml_date,c.server_utc),\r\n\t//\txml_format:d(c.date_format,c.server_utc),\r\n\t\tformat_date: d(c.date_format, c.server_utc),\r\n\t\tparse_date:scheduler.date.str_to_date(c.date_format,c.server_utc),\r\n\t\tapi_date:scheduler.date.str_to_date(c.api_date, false, false),\r\n\t\tevent_header:function(start,end,ev){\r\n\t\t\t// if (scheduler.config.rtl) {\r\n\t\t\t// \treturn scheduler.templates.event_date(end)+\" - \"+scheduler.templates.event_date(start);\r\n\t\t\t// }\r\n\t\t\treturn scheduler.templates.event_date(start)+\" - \"+scheduler.templates.event_date(end);\r\n\t\t\t\t\t\t\r\n\t\t},\r\n\t\tevent_text:function(start,end,ev){\r\n\t\t\treturn ev.text;\r\n\t\t},\r\n\t\tevent_class:function(start,end,ev){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tmonth_date_class:function(d){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tweek_date_class:function(d){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tevent_bar_date:function(start,end,ev){\r\n\t\t\treturn scheduler.templates.event_date(start)+\" \";\r\n\t\t},\r\n\t\tevent_bar_text:function(start,end,ev){\r\n\t\t\treturn ev.text;\r\n\t\t},\r\n\t\tmonth_events_link : function(date, count){\r\n\t\t\treturn \"<a>View more(\"+count+\" events)</a>\";\r\n\t\t},\r\n\t\tdrag_marker_class : function(start, end, event){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tdrag_marker_content : function(start, end, event){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\t/* Could be redifined */\r\n\t\ttooltip_date_format: scheduler.date.date_to_str(\"%Y-%m-%d %H:%i\"),\r\n\t\ttooltip_text: function(start, end, event) {\r\n\t\t\treturn \"<b>Event:</b> \" + event.text + \"<br/><b>Start date:</b> \" + scheduler.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + scheduler.templates.tooltip_date_format(end);\r\n\t\t}\r\n\r\n\t});\r\n\tthis.callEvent(\"onTemplatesReady\",[]);\r\n};\r\n\r\nscheduler.uid = function() {\r\n\tif (!this._seed) this._seed = (new Date()).valueOf();\r\n\treturn this._seed++;\r\n};\r\nscheduler._events = {};\r\nscheduler.clearAll = function() {\r\n\tthis._events = {};\r\n\tthis._loaded = {};\r\n\r\n\tthis._edit_id = null;\r\n\tthis._select_id = null;\r\n\tthis._drag_id = null;\r\n\tthis._drag_mode = null;\r\n\tthis._drag_pos = null;\r\n\tthis._new_event = null;\r\n\r\n\tthis.clear_view();\r\n\tthis.callEvent(\"onClearAll\", []);\r\n};\r\nscheduler.addEvent = function(start_date, end_date, text, id, extra_data) {\r\n\tif (!arguments.length)\r\n\t\treturn this.addEventNow();\r\n\tvar ev = start_date;\r\n\tif (arguments.length != 1) {\r\n\t\tev = extra_data || {};\r\n\t\tev.start_date = start_date;\r\n\t\tev.end_date = end_date;\r\n\t\tev.text = text;\r\n\t\tev.id = id;\r\n\t}\r\n\tev.id = ev.id || scheduler.uid();\r\n\tev.text = ev.text || \"\";\r\n\r\n\tif (typeof ev.start_date == \"string\")  ev.start_date = this.templates.api_date(ev.start_date);\r\n\tif (typeof ev.end_date == \"string\")  ev.end_date = this.templates.api_date(ev.end_date);\r\n\tvar d = (this.config.event_duration || this.config.time_step) * 60000;\r\n\tif (ev.start_date.valueOf() == ev.end_date.valueOf())\r\n\t\tev.end_date.setTime(ev.end_date.valueOf() + d);\r\n\r\n\tev._timed = this.isOneDayEvent(ev);\r\n\r\n\tvar is_new = !this._events[ev.id];\r\n\tthis._events[ev.id] = ev;\r\n\tthis.event_updated(ev);\r\n\tif (!this._loading)\r\n\t\tthis.callEvent(is_new ? \"onEventAdded\" : \"onEventChanged\", [ev.id, ev]);\r\n\treturn ev.id;\r\n};\r\nscheduler.deleteEvent = function(id, silent) {\r\n\tvar ev = this._events[id];\r\n\tif (!silent && (!this.callEvent(\"onBeforeEventDelete\", [id, ev]) || !this.callEvent(\"onConfirmedBeforeEventDelete\", [id, ev])))\r\n\t\treturn;\r\n\tif (ev) {\r\n\t\tthis._select_id = null;\r\n\t\tdelete this._events[id];\r\n\t\tthis.event_updated(ev);\r\n\r\n\t\tif(this._drag_id == ev.id){\r\n\t\t\tthis._drag_id = null;\r\n\t\t\tthis._drag_mode=null;\r\n\t\t\tthis._drag_pos=null;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.callEvent(\"onEventDeleted\", [id, ev]);\r\n};\r\nscheduler.getEvent = function(id) {\r\n\treturn this._events[id];\r\n};\r\nscheduler.setEvent = function(id, hash) {\r\n\tif(!hash.id)\r\n\t\thash.id = id;\r\n\r\n\tthis._events[id] = hash;\r\n};\r\nscheduler.for_rendered = function(id, method) {\r\n\tfor (var i = this._rendered.length - 1; i >= 0; i--)\r\n\t\tif (this._rendered[i].getAttribute(\"event_id\") == id)\r\n\t\t\tmethod(this._rendered[i], i);\r\n};\r\nscheduler.changeEventId = function(id, new_id) {\r\n\tif (id == new_id) return;\r\n\tvar ev = this._events[id];\r\n\tif (ev) {\r\n\t\tev.id = new_id;\r\n\t\tthis._events[new_id] = ev;\r\n\t\tdelete this._events[id];\r\n\t}\r\n\tthis.for_rendered(id, function(r) {\r\n\t\tr.setAttribute(\"event_id\", new_id);\r\n\t});\r\n\tif (this._select_id == id) this._select_id = new_id;\r\n\tif (this._edit_id == id) this._edit_id = new_id;\r\n\t//if (this._drag_id==id) this._drag_id=new_id;\r\n\tthis.callEvent(\"onEventIdChange\", [id, new_id]);\r\n};\r\n\r\n(function() {\r\n\tvar attrs = [\"text\", \"Text\", \"start_date\", \"StartDate\", \"end_date\", \"EndDate\"];\r\n\tvar create_getter = function(name) {\r\n\t\treturn function(id) { return (scheduler.getEvent(id))[name]; };\r\n\t};\r\n\tvar create_setter = function(name) {\r\n\t\treturn function(id, value) {\r\n\t\t\tvar ev = scheduler.getEvent(id);\r\n\t\t\tev[name] = value;\r\n\t\t\tev._changed = true;\r\n\t\t\tev._timed = this.isOneDayEvent(ev);\r\n\t\t\tscheduler.event_updated(ev, true);\r\n\t\t};\r\n\t};\r\n\tfor (var i = 0; i < attrs.length; i += 2) {\r\n\t\tscheduler[\"getEvent\" + attrs[i + 1]] = create_getter(attrs[i]);\r\n\t\tscheduler[\"setEvent\" + attrs[i + 1]] = create_setter(attrs[i]);\r\n\t}\r\n})();\r\n\r\nscheduler.event_updated = function(ev, force) {\r\n\tif (this.is_visible_events(ev))\r\n\t\tthis.render_view_data();\r\n\telse\r\n\t\tthis.clear_event(ev.id);\r\n};\r\nscheduler.is_visible_events = function(ev) {\r\n\tif(!this._min_date || !this._max_date){\r\n\t\treturn false;\r\n\t}\r\n\r\n\t//if in displayed dates\r\n\tvar in_visible_range = (ev.start_date.valueOf() < this._max_date.valueOf() && this._min_date.valueOf() < ev.end_date.valueOf());\r\n\r\n\tif(in_visible_range){\r\n\r\n\t\t//end dates are not between last/first hours\r\n\t\tvar evFirstHour = ev.start_date.getHours(),\r\n\t\t\tevLastHour = ev.end_date.getHours() + (ev.end_date.getMinutes()/60),\r\n\t\t\tlastHour = this.config.last_hour,\r\n\t\t\tfirstHour = this.config.first_hour;\r\n\r\n\t\tvar end_dates_visible = (this._table_view || !((evLastHour > lastHour || evLastHour < firstHour) && (evFirstHour >= lastHour || evFirstHour < firstHour)));\r\n\r\n\t\tif(end_dates_visible){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\r\n\t\t\t//event is bigger than area hidden between last/first hours\r\n\t\t\tvar event_duration = (ev.end_date.valueOf() - ev.start_date.valueOf()) / (1000*60*60),//hours\r\n\t\t\t\thidden_duration = 24 - (this.config.last_hour - this.config.first_hour);\r\n\r\n\t\t\treturn !!((event_duration > hidden_duration) || (evFirstHour < lastHour && evLastHour >= firstHour));\r\n\r\n\t\t}\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n};\r\nscheduler.isOneDayEvent = function(ev) {\r\n\t// decrease by one ms so events that ends on midnight on the next day were still considered one day events\r\n\t// e.g. (09-02-2018 19:00 - 10-02-2018 00:00)\r\n\t// events >= 24h long are considered multiday\r\n\tvar checkEndDate = new Date(ev.end_date.valueOf() - 1);\r\n\treturn (\r\n\t\tev.start_date.getFullYear() === checkEndDate.getFullYear() &&\r\n\t\tev.start_date.getMonth() === checkEndDate.getMonth() &&\r\n\t\tev.start_date.getDate() === checkEndDate.getDate()\r\n\t) && ((ev.end_date.valueOf() - ev.start_date.valueOf()) < (1000 * 60 * 60 * 24));\r\n};\r\n\r\nscheduler.get_visible_events = function(only_timed) {\r\n\t//not the best strategy for sure\r\n\tvar stack = [];\r\n\r\n\tfor (var id in this._events)\r\n\t\tif (this.is_visible_events(this._events[id]))\r\n\t\t\tif (!only_timed || this._events[id]._timed)\r\n\t\t\t\tif (this.filter_event(id, this._events[id]))\r\n\t\t\t\t\tstack.push(this._events[id]);\r\n\r\n\treturn stack;\r\n};\r\nscheduler.filter_event = function(id, ev) {\r\n\tvar filter = this[\"filter_\" + this._mode];\r\n\treturn (filter) ? filter(id, ev) : true;\r\n};\r\nscheduler._is_main_area_event = function(ev){\r\n\treturn !!ev._timed;\r\n};\r\nscheduler.render_view_data = function(evs, hold) {\r\n\tvar full = false;\r\n\tif (!evs) {\r\n\t\tfull = true;\r\n\t\tif (this._not_render) {\r\n\t\t\tthis._render_wait = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._render_wait = false;\r\n\r\n\t\tthis.clear_view();\r\n\t\tevs = this.get_visible_events(!(this._table_view || this.config.multi_day));\r\n\t}\r\n\tfor(var i= 0, len = evs.length; i < len; i++){\r\n\t\tthis._recalculate_timed(evs[i]);\r\n\t}\r\n\r\n\tif (this.config.multi_day && !this._table_view) {\r\n\r\n\t\tvar tvs = [];\r\n\t\tvar tvd = [];\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tif (this._is_main_area_event(evs[i]))\r\n\t\t\t\ttvs.push(evs[i]);\r\n\t\t\telse\r\n\t\t\t\ttvd.push(evs[i]);\r\n\t\t}\r\n\r\n\t\tif(!this._els['dhx_multi_day']){\r\n\t\t\tvar message = scheduler._commonErrorMessages.unknownView(this._mode);\r\n\t\t\tthrow new Error(message);\r\n\t\t}\r\n\r\n\t\t// multiday events\r\n\t\tthis._rendered_location = this._els['dhx_multi_day'][0];\r\n\t\tthis._table_view = true;\r\n\t\tthis.render_data(tvd, hold);\r\n\t\tthis._table_view = false;\r\n\r\n\t\t// normal events\r\n\t\tthis._rendered_location = this._els['dhx_cal_data'][0];\r\n\t\tthis._table_view = false;\r\n\t\tthis.render_data(tvs, hold);\r\n\r\n\t} else {\r\n\t\tvar buffer = document.createDocumentFragment();\r\n\t\tvar renderedLocation = this._els['dhx_cal_data'][0];\r\n\t\tthis._rendered_location = buffer;\r\n\t\tthis.render_data(evs, hold);\r\n\t\trenderedLocation.appendChild(buffer);\r\n\t\tthis._rendered_location = renderedLocation;\r\n\r\n\t}\r\n\r\n\tif(full){\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t}\r\n};\r\n\r\n\r\nscheduler._view_month_day = function(e){\r\n\tvar date = scheduler.getActionData(e).date;\r\n\tif(!scheduler.callEvent(\"onViewMoreClick\", [date]))\r\n\t\treturn;\r\n\tscheduler.setCurrentView(date, \"day\");\r\n};\r\n\r\nscheduler._render_month_link = function(ev){\r\n\tvar parent = this._rendered_location;\r\n\tvar toRender = this._lame_clone(ev);\r\n\r\n\t//render links in each cell of multiday events\r\n\tfor(var d = ev._sday; d < ev._eday; d++){\r\n\r\n\t\ttoRender._sday = d;\r\n\t\ttoRender._eday = d+1;\r\n\r\n\t\tvar date = scheduler.date;\r\n\t\tvar curr = scheduler._min_date;\r\n\t\tcurr = date.add(curr, toRender._sweek, \"week\");\r\n\t\tcurr = date.add(curr, toRender._sday, \"day\");\r\n\t\tvar count = scheduler.getEvents(curr, date.add(curr, 1, \"day\")).length;\r\n\r\n\t\tvar pos = this._get_event_bar_pos(toRender);\r\n\t\tvar widt = (pos.x2 - pos.x);\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.onclick = function(e){scheduler._view_month_day(e||event);};\r\n\t\tel.className = \"dhx_month_link\";\r\n\t\tel.style.top = pos.y + \"px\";\r\n\t\tel.style.left = pos.x + \"px\";\r\n\t\tel.style.width = widt + \"px\";\r\n\t\tel.innerHTML = scheduler.templates.month_events_link(curr, count);\r\n\t\tthis._rendered.push(el);\r\n\r\n\t\tparent.appendChild(el);\r\n\t}\r\n};\r\n\r\nscheduler._recalculate_timed = function(id){\r\n\tif(!id) return;\r\n\tvar ev;\r\n\tif(typeof(id) != \"object\")\r\n\t\tev = this._events[id];\r\n\telse\r\n\t\tev = id;\r\n\tif(!ev) return;\r\n\tev._timed = scheduler.isOneDayEvent(ev);\r\n};\r\nscheduler.attachEvent(\"onEventChanged\", scheduler._recalculate_timed);\r\nscheduler.attachEvent(\"onEventAdded\", scheduler._recalculate_timed);\r\n\r\nscheduler.render_data = function(evs, hold) {\r\n\tevs = this._pre_render_events(evs, hold);\r\n\tvar containers = {};\r\n\tfor (var i = 0; i < evs.length; i++)\r\n\t\tif (this._table_view){\r\n\t\t\tif(scheduler._mode != 'month'){\r\n\t\t\t\tthis.render_event_bar(evs[i]);//may be multiday section on other views\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar max_evs = scheduler.config.max_month_events;\r\n\t\t\t\tif(max_evs !== max_evs*1 || evs[i]._sorder < max_evs){\r\n\t\t\t\t\t//of max number events per month cell is set and event can be rendered\r\n\t\t\t\t\tthis.render_event_bar(evs[i]);\r\n\t\t\t\t}else if(max_evs !== undefined && evs[i]._sorder == max_evs){\r\n\t\t\t\t\t//render 'view more' links\r\n\t\t\t\t\tscheduler._render_month_link(evs[i]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//do not render events with ordinal number > maximum events per cell\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}else{\r\n\t\t\tvar ev = evs[i];\r\n\t\t\tvar parent = scheduler.locate_holder(ev._sday);\r\n\t\t\tif (!parent) continue; //attempt to render non-visible event\r\n\r\n\t\t\tif(!containers[ev._sday]){\r\n\t\t\t\tcontainers[ev._sday] = {\r\n\t\t\t\t\treal: parent,\r\n\t\t\t\t\tbuffer: document.createDocumentFragment(),\r\n\t\t\t\t\twidth: parent.clientWidth\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar container = containers[ev._sday];\r\n\t\t\tthis.render_event(ev, container.buffer, container.width);\r\n\t\t}\r\n\r\n\t\tfor(var i in containers){\r\n\t\t\tvar container = containers[i];\r\n\t\t\tif(container.real && container.buffer){\r\n\t\t\t\tcontainer.real.appendChild(container.buffer);\r\n\t\t\t}\r\n\t\t}\r\n};\r\n\r\nscheduler._get_first_visible_cell = function(cells) {\r\n\tfor (var i = 0; i < cells.length; i++) {\r\n\t\tif ((cells[i].className || \"\").indexOf(\"dhx_scale_ignore\") == -1) {\r\n\t\t\treturn cells[i];\r\n\t\t}\r\n\t}\r\n\t// if no visible cell found, return cells[0] to be more tolerant, since it's the original logic\r\n\treturn cells[0];\r\n};\r\n\r\nscheduler._pre_render_events = function(evs, hold) {\r\n\tvar hb = this.xy.bar_height;\r\n\tvar h_old = this._colsS.heights;\r\n\tvar h = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0];\r\n\tvar data = this._els[\"dhx_cal_data\"][0];\r\n\r\n\tif (!this._table_view) {\r\n\t\tevs = this._pre_render_events_line(evs, hold); //ignore long events for now\r\n\t}\r\n\telse {\r\n\t\tevs = this._pre_render_events_table(evs, hold);\r\n\t}\r\n\tif (this._table_view) {\r\n\t\tif (hold)\r\n\t\t\tthis._colsS.heights = h_old;\r\n\t\telse {\r\n\t\t\tvar evl = data.firstChild;\r\n\t\t\tif (evl.rows) {\r\n\t\t\t\tfor (var i = 0; i < evl.rows.length; i++) {\r\n\t\t\t\t\th[i]++;\r\n\t\t\t\t\tvar cells = evl.rows[i].cells;\r\n\t\t\t\t\tvar cellHeight = this._colsS.height - this.xy.month_head_height;\r\n\t\t\t\t\tif ((h[i]) * hb > cellHeight) { // 22 - height of cell's header\r\n\t\t\t\t\t\t//we have overflow, update heights\r\n\r\n\t\t\t\t\t\tvar cHeight = cellHeight;\r\n\t\t\t\t\t\tif(this.config.max_month_events*1 !== this.config.max_month_events || h[i] <= this.config.max_month_events){\r\n\t\t\t\t\t\t\tcHeight = h[i] * hb;\r\n\t\t\t\t\t\t}else if( (this.config.max_month_events + 1) * hb > cellHeight){\r\n\t\t\t\t\t\t\tcHeight = (this.config.max_month_events + 1) * hb;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var j = 0; j < cells.length; j++) {\r\n\t\t\t\t\t\t\tcells[j].childNodes[1].style.height = cHeight + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t//\th[i] = (h[i - 1] || 0) + cells[0].offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\th[i] = (h[i - 1] || 0) + scheduler._get_first_visible_cell(cells).offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t\th.unshift(0);\r\n\t\t\t\tif (evl.parentNode.offsetHeight < evl.parentNode.scrollHeight && !scheduler._colsS.scroll_fix && scheduler.xy.scroll_width) {\r\n\r\n\t\t\t\t\tvar scale_settings = scheduler._colsS,\r\n\t\t\t\t\t\tsum_width = scale_settings[scale_settings.col_length],\r\n\t\t\t\t\t\trow_heights = scale_settings.heights.slice();\r\n\r\n\t\t\t\t\tsum_width -= (scheduler.xy.scroll_width || 0);\r\n\t\t\t\t\tthis._calc_scale_sizes(sum_width, this._min_date, this._max_date);\r\n\t\t\t\t\tscheduler._colsS.heights = row_heights;\r\n\r\n\t\t\t\t\tthis.set_xy(this._els[\"dhx_cal_header\"][0], sum_width, this.xy.scale_height);\r\n\t\t\t\t\tscheduler._render_scales(this._els[\"dhx_cal_header\"][0]);\r\n\t\t\t\t\tscheduler._render_month_scale(this._els[\"dhx_cal_data\"][0], this._get_timeunit_start(), this._min_date);\r\n\r\n\t\t\t\t\tscale_settings.scroll_fix = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!evs.length && this._els[\"dhx_multi_day\"][0].style.visibility == \"visible\")\r\n\t\t\t\t\th[0] = -1;\r\n\t\t\t\tif (evs.length || h[0] == -1) {\r\n\t\t\t\t\t//shift days to have space for multiday events\r\n\t\t\t\t\tvar childs = evl.parentNode.childNodes;\r\n\r\n\t\t\t\t\t// +1 so multiday events would have 2px from top and 2px from bottom by default\r\n\t\t\t\t\tvar full_multi_day_height = (h[0] + 1) * hb + 1;\r\n\r\n\t\t\t\t\tvar used_multi_day_height = full_multi_day_height;\r\n\t\t\t\t\tvar used_multi_day_height_css = full_multi_day_height + \"px\";\r\n\t\t\t\t\tif (this.config.multi_day_height_limit) {\r\n\t\t\t\t\t\tused_multi_day_height = Math.min(full_multi_day_height, this.config.multi_day_height_limit) ;\r\n\t\t\t\t\t\tused_multi_day_height_css = used_multi_day_height + \"px\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata.style.top = (this._els[\"dhx_cal_navline\"][0].offsetHeight + this._els[\"dhx_cal_header\"][0].offsetHeight + used_multi_day_height ) + 'px';\r\n\t\t\t\t\tdata.style.height = (this._obj.offsetHeight - parseInt(data.style.top, 10) - (this.xy.margin_top || 0)) + 'px';\r\n\r\n\t\t\t\t\tvar multi_day_section = this._els[\"dhx_multi_day\"][0];\r\n\t\t\t\t\tmulti_day_section.style.height = used_multi_day_height_css;\r\n\t\t\t\t\tmulti_day_section.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\r\n\t\t\t\t\t// icon\r\n\t\t\t\t\tvar multi_day_icon = this._els[\"dhx_multi_day\"][1];\r\n\t\t\t\t\tmulti_day_icon.style.height = used_multi_day_height_css;\r\n\t\t\t\t\tmulti_day_icon.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\t\t\t\t\tmulti_day_icon.className = h[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\";\r\n\t\t\t\t\tthis._dy_shift = (h[0] + 1) * hb;\r\n\t\t\t\t\tif(this.config.multi_day_height_limit){\r\n\t\t\t\t\t\tthis._dy_shift = Math.min(this.config.multi_day_height_limit, this._dy_shift);\r\n\t\t\t\t\t}\r\n\t\t\t\t\th[0] = 0;\r\n\r\n\t\t\t\t\tif (used_multi_day_height != full_multi_day_height) {\r\n\t\t\t\t\t\tdata.style.top = (parseInt(data.style.top) + 2) + \"px\";\r\n\r\n\t\t\t\t\t\tmulti_day_section.style.overflowY = \"auto\";\r\n\t\t\t\t\t//\tmulti_day_section.style.width = (parseInt(this._els[\"dhx_cal_navline\"][0].style.width)) + \"px\";\r\n\r\n\t\t\t\t\t\tmulti_day_icon.style.position = \"fixed\";\r\n\t\t\t\t\t\tmulti_day_icon.style.top = \"\";\r\n\t\t\t\t\t\tmulti_day_icon.style.left = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn evs;\r\n};\r\nscheduler._get_event_sday = function(ev) {\r\n\t// get day in current view\r\n\t// use rounding for 23 or 25 hour days on DST\r\n\tvar datePart = this.date.day_start(new Date(ev.start_date));\r\n\treturn Math.round((datePart.valueOf() - this._min_date.valueOf()) / (24 * 60 * 60 * 1000));\r\n};\r\nscheduler._get_event_mapped_end_date = function(ev) {\r\n\tvar end_date = ev.end_date;\r\n\tif (this.config.separate_short_events) {\r\n\t\tvar ev_duration = (ev.end_date - ev.start_date) / 60000; // minutes\r\n\t\tif (ev_duration < this._min_mapped_duration) {\r\n\t\t\tend_date = this.date.add(end_date, this._min_mapped_duration - ev_duration, \"minute\");\r\n\t\t}\r\n\t}\r\n\treturn end_date;\r\n};\r\nscheduler._pre_render_events_line = function(evs, hold){\r\n\tevs.sort(function(a, b) {\r\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\r\n\t\t\treturn a.id > b.id ? 1 : -1;\r\n\t\treturn a.start_date > b.start_date ? 1 : -1;\r\n\t});\r\n\tvar days = []; //events by weeks\r\n\tvar evs_originals = [];\r\n\r\n\tthis._min_mapped_duration = Math.ceil(this.xy.min_event_height * 60 / this.config.hour_size_px);  // values could change along the way\r\n\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tvar ev = evs[i];\r\n\r\n\t\t//check date overflow\r\n\t\tvar sd = ev.start_date;\r\n\t\tvar ed = ev.end_date;\r\n\t\t//check scale overflow\r\n\t\tvar sh = sd.getHours();\r\n\t\tvar eh = ed.getHours();\r\n\t\tev._sday = this._get_event_sday(ev); // sday based on event start_date\r\n\t\tif (this._ignores[ev._sday]){\r\n\t\t\t//ignore event\r\n\t\t\tevs.splice(i,1);\r\n\t\t\ti--;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!days[ev._sday]) days[ev._sday] = [];\r\n\r\n\t\tif (!hold) {\r\n\t\t\tev._inner = false;\r\n\r\n\t\t\tvar stack = days[ev._sday];\r\n\r\n\t\t\twhile (stack.length) {\r\n\t\t\t\tvar t_ev = stack[stack.length - 1];\r\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\r\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\r\n\t\t\t\t\tstack.splice(stack.length - 1, 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar slot_index = stack.length;\r\n\t\t\tvar sorderSet = false;\r\n\t\t\tfor (var j = 0; j < stack.length; j++) {\r\n\t\t\t\tvar t_ev = stack[j];\r\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\r\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\r\n\t\t\t\t\tsorderSet = true;\r\n\t\t\t\t\tev._sorder = t_ev._sorder;\r\n\t\t\t\t\tslot_index = j;\r\n\t\t\t\t\tev._inner = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (stack.length)\r\n\t\t\t\tstack[stack.length - 1]._inner = true;\r\n\r\n\t\t\tif (!sorderSet) {\r\n\t\t\t\tif (stack.length) {\r\n\t\t\t\t\tif (stack.length <= stack[stack.length - 1]._sorder) {\r\n\t\t\t\t\t\tif (!stack[stack.length - 1]._sorder)\r\n\t\t\t\t\t\t\tev._sorder = 0;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tfor (j = 0; j < stack.length; j++) {\r\n\t\t\t\t\t\t\t\tvar _is_sorder = false;\r\n\t\t\t\t\t\t\t\tfor (var k = 0; k < stack.length; k++) {\r\n\t\t\t\t\t\t\t\t\tif (stack[k]._sorder == j) {\r\n\t\t\t\t\t\t\t\t\t\t_is_sorder = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!_is_sorder) {\r\n\t\t\t\t\t\t\t\t\tev._sorder = j;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tev._inner = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _max_sorder = stack[0]._sorder;\r\n\t\t\t\t\t\tfor (j = 1; j < stack.length; j++) {\r\n\t\t\t\t\t\t\tif (stack[j]._sorder > _max_sorder)\r\n\t\t\t\t\t\t\t\t_max_sorder = stack[j]._sorder;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tev._sorder = _max_sorder + 1;\r\n\t\t\t\t\t\tev._inner = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tev._sorder = 0;\r\n\t\t\t}\r\n\r\n\t\t\tstack.splice(slot_index, slot_index == stack.length ? 0 : 1, ev);\r\n\r\n\t\t\tif (stack.length > (stack.max_count || 0)) {\r\n\t\t\t\tstack.max_count = stack.length;\r\n\t\t\t\tev._count = stack.length;\r\n\t\t\t} else {\r\n\t\t\t\tev._count = (ev._count) ? ev._count : 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (sh < this.config.first_hour || eh >= this.config.last_hour) {\r\n\t\t\t// Need to create copy of event as we will be changing it's start/end date\r\n\t\t\t// e.g. first_hour = 11 and event.start_date hours = 9. Need to preserve that info\r\n\t\t\tevs_originals.push(ev);\r\n\t\t\tevs[i] = ev = this._copy_event(ev);\r\n\r\n\t\t\tif (sh < this.config.first_hour) {\r\n\t\t\t\tev.start_date.setHours(this.config.first_hour);\r\n\t\t\t\tev.start_date.setMinutes(0);\r\n\t\t\t}\r\n\t\t\tif (eh >= this.config.last_hour) {\r\n\t\t\t\tev.end_date.setMinutes(0);\r\n\t\t\t\tev.end_date.setHours(this.config.last_hour);\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.start_date > ev.end_date || sh == this.config.last_hour) {\r\n\t\t\t\tevs.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (!hold) {\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tevs[i]._count = days[evs[i]._sday].max_count;\r\n\t\t}\r\n\t\tfor (var i = 0; i < evs_originals.length; i++)\r\n\t\t\tevs_originals[i]._count = days[evs_originals[i]._sday].max_count;\r\n\t}\r\n\r\n\treturn evs;\r\n};\r\nscheduler._time_order = function(evs) {\r\n\tevs.sort(function(a, b) {\r\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf()) {\r\n\t\t\tif (a._timed && !b._timed) return 1;\r\n\t\t\tif (!a._timed && b._timed) return -1;\r\n\t\t\treturn a.id > b.id ? 1 : -1;\r\n\t\t}\r\n\t\treturn a.start_date > b.start_date ? 1 : -1;\r\n\t});\r\n};\r\n\r\nscheduler._is_any_multiday_cell_visible = function(from, to, event){\r\n\tvar cols = this._cols.length;\r\n\tvar isAnyCellVisible = false;\r\n\tvar checkDate = from;\r\n\tvar noCells = true;\r\n\tvar lastDayEnd = new Date(to);\r\n\tif(scheduler.date.day_start(new Date(to)).valueOf() != to.valueOf()){\r\n\t\tlastDayEnd = scheduler.date.day_start(lastDayEnd);\r\n\t\tlastDayEnd = scheduler.date.add(lastDayEnd, 1, \"day\");\r\n\t}\r\n\twhile(checkDate < lastDayEnd){\r\n\t\tnoCells = false;\r\n\t\tvar cellIndex = this.locate_holder_day(checkDate, false, event);\r\n\t\tvar weekCellIndex = cellIndex % cols;\r\n\t\tif(!this._ignores[weekCellIndex]){\r\n\t\t\tisAnyCellVisible = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcheckDate = scheduler.date.add(checkDate, 1, \"day\");\r\n\t}\r\n\treturn noCells || isAnyCellVisible;\r\n};\r\n\r\nscheduler._pre_render_events_table = function(evs, hold) { // max - max height of week slot\r\n\tthis._time_order(evs);\r\n\tvar out = [];\r\n\tvar weeks = [\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[]\r\n\t]; //events by weeks\r\n\tvar max = this._colsS.heights;\r\n\tvar start_date;\r\n\tvar cols = this._cols.length;\r\n\tvar chunks_info = {};\r\n\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tvar ev = evs[i];\r\n\t\tvar id = ev.id;\r\n\t\tif (!chunks_info[id]) {\r\n\t\t\tchunks_info[id] = {\r\n\t\t\t\tfirst_chunk: true,\r\n\t\t\t\tlast_chunk: true\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar chunk_info = chunks_info[id];\r\n\t\tvar sd = (start_date || ev.start_date);\r\n\t\tvar ed = ev.end_date;\r\n\t\t//trim events which are crossing through current view\r\n\t\tif (sd < this._min_date) {\r\n\t\t\tchunk_info.first_chunk = false;\r\n\t\t\tsd = this._min_date;\r\n\t\t}\r\n\t\tif (ed > this._max_date) {\r\n\t\t\tchunk_info.last_chunk = false;\r\n\t\t\ted = this._max_date;\r\n\t\t}\r\n\r\n\t\tvar locate_s = this.locate_holder_day(sd, false, ev);\r\n\t\tev._sday = locate_s % cols;\r\n\t\t//skip single day events for ignored dates\r\n\t\tif (this._ignores[ev._sday] && ev._timed) continue;\r\n\r\n\t\tvar locate_e = this.locate_holder_day(ed, true, ev) || cols;\r\n\t\tev._eday = (locate_e % cols) || cols; //cols used to fill full week, when event end on monday\r\n\t\tev._length = locate_e - locate_s;\r\n\t\t//3600000 - compensate 1 hour during winter|summer time shift\r\n\t\tev._sweek = Math.floor((this._correct_shift(sd.valueOf(), 1) - this._min_date.valueOf()) / (60 * 60 * 1000 * 24 * cols));\r\n\r\n\t\tvar isAnyCellVisible = scheduler._is_any_multiday_cell_visible(sd, ed, ev);\r\n\r\n\t\tif(!isAnyCellVisible){\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t//current slot\r\n\t\tvar stack = weeks[ev._sweek];\r\n\t\t//check order position\r\n\t\tvar stack_line;\r\n\r\n\t\tfor (stack_line = 0; stack_line < stack.length; stack_line++)\r\n\t\t\tif (stack[stack_line]._eday <= ev._sday)\r\n\t\t\t\tbreak;\r\n\r\n\t\tif (!ev._sorder || !hold) {\r\n\t\t\tev._sorder = stack_line;\r\n\t\t}\r\n\r\n\t\tif (ev._sday + ev._length <= cols) {\r\n\t\t\tstart_date = null;\r\n\t\t\tout.push(ev);\r\n\t\t\tstack[stack_line] = ev;\r\n\t\t\t//get max height of slot\r\n\t\t\tmax[ev._sweek] = stack.length - 1;\r\n\t\t\tev._first_chunk = chunk_info.first_chunk;\r\n\t\t\tev._last_chunk = chunk_info.last_chunk;\r\n\t\t} else { // split long event in chunks\r\n\t\t\tvar copy = this._copy_event(ev);\r\n\t\t\tcopy.id = ev.id;\r\n\t\t\tcopy._length = cols - ev._sday;\r\n\t\t\tcopy._eday = cols;\r\n\t\t\tcopy._sday = ev._sday;\r\n\t\t\tcopy._sweek = ev._sweek;\r\n\t\t\tcopy._sorder = ev._sorder;\r\n\t\t\tcopy.end_date = this.date.add(sd, copy._length, \"day\");\r\n\t\t\tcopy._first_chunk = chunk_info.first_chunk;\r\n\t\t\tif (chunk_info.first_chunk) {\r\n\t\t\t\tchunk_info.first_chunk = false;\r\n\t\t\t}\r\n\r\n\t\t\tout.push(copy);\r\n\t\t\tstack[stack_line] = copy;\r\n\t\t\tstart_date = copy.end_date;\r\n\t\t\t//get max height of slot\r\n\t\t\tmax[ev._sweek] = stack.length - 1;\r\n\t\t\ti--;\r\n\t\t\tcontinue;  //repeat same step\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n};\r\nscheduler._copy_dummy = function() {\r\n\tvar a = new Date(this.start_date);\r\n\tvar b = new Date(this.end_date);\r\n\tthis.start_date = a;\r\n\tthis.end_date = b;\r\n};\r\nscheduler._copy_event = function(ev) {\r\n\tthis._copy_dummy.prototype = ev;\r\n\treturn new this._copy_dummy();\r\n\t//return {start_date:ev.start_date, end_date:ev.end_date, text:ev.text, id:ev.id}\r\n};\r\nscheduler._rendered = [];\r\nscheduler.clear_view = function() {\r\n\tfor (var i = 0; i < this._rendered.length; i++) {\r\n\t\tvar obj = this._rendered[i];\r\n\t\tif (obj.parentNode) obj.parentNode.removeChild(obj);\r\n\t}\r\n\tthis._rendered = [];\r\n};\r\nscheduler.updateEvent = function(id) {\r\n\tvar ev = this.getEvent(id);\r\n\tthis.clear_event(id);\r\n\r\n\tif (ev && this.is_visible_events(ev) && this.filter_event(id, ev) && (this._table_view || this.config.multi_day || ev._timed)) {\r\n\t\tif (this.config.update_render){\r\n\t\t\tthis.render_view_data();\r\n\t\t}else{\r\n\t\t\tif(this.getState().mode == \"month\" && !this.getState().drag_id && !this.isOneDayEvent(ev)){\r\n\t\t\t\tthis.render_view_data();\r\n\t\t\t}else{\r\n\t\t\t\tthis.render_view_data([ev], true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nscheduler.clear_event = function(id) {\r\n\tthis.for_rendered(id, function(node, i) {\r\n\t\tif (node.parentNode)\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\tscheduler._rendered.splice(i, 1);\r\n\t});\r\n};\r\nscheduler._y_from_date = function(date){\r\n\tvar sm = date.getHours() * 60 + date.getMinutes();\r\n\treturn ((Math.round((sm * 60 * 1000 - this.config.first_hour * 60 * 60 * 1000) * this.config.hour_size_px / (60 * 60 * 1000))) % (this.config.hour_size_px * 24)); //42px/hour\r\n};\r\nscheduler._calc_event_y = function(ev, min_height){\r\n\tmin_height = min_height || 0;\r\n\tvar sm = ev.start_date.getHours() * 60 + ev.start_date.getMinutes();\r\n\tvar em = (ev.end_date.getHours() * 60 + ev.end_date.getMinutes()) || (scheduler.config.last_hour * 60);\r\n\tvar top = this._y_from_date(ev.start_date);\r\n\r\n\tvar height = Math.max(min_height, (em - sm) * this.config.hour_size_px / 60); //42px/hour\r\n\treturn {\r\n\t\ttop: top,\r\n\t\theight: height\r\n\t};\r\n};\r\nscheduler.render_event = function(ev, buffer, parentWidth) {\r\n\tvar menu = scheduler.xy.menu_width;\r\n\tvar menu_offset = (this.config.use_select_menu_space) ? 0 : menu;\r\n\tif (ev._sday < 0) return; //can occur in case of recurring event during time shift\r\n\r\n\tvar parent = scheduler.locate_holder(ev._sday);\r\n\tif (!parent) return; //attempt to render non-visible event\r\n\r\n\tbuffer = buffer || parent;\r\n\r\n\tvar pos_y = this._calc_event_y(ev, scheduler.xy.min_event_height);\r\n\tvar top = pos_y.top,\r\n\t\theight = pos_y.height;\r\n\r\n\tvar ev_count = ev._count || 1;\r\n\tvar ev_sorder = ev._sorder || 0;\r\n\r\n\tparentWidth = parentWidth || parent.clientWidth;\r\n\r\n\tvar width = Math.floor((parentWidth - menu_offset) / ev_count);\r\n\tvar left = ev_sorder * width + 1;\r\n\tif (!ev._inner) width = width * (ev_count - ev_sorder);\r\n\tif (this.config.cascade_event_display) {\r\n\t\tvar limit = this.config.cascade_event_count;\r\n\t\tvar margin = this.config.cascade_event_margin;\r\n\t\tleft = ev_sorder % limit * margin;\r\n\t\tvar right = (ev._inner) ? (ev_count - ev_sorder - 1) % limit * margin / 2 : 0;\r\n\t\twidth = Math.floor(parentWidth - menu_offset - left - right);\r\n\t}\r\n\r\n\tvar d = this._render_v_bar(ev, menu_offset + left, top, width, height, ev._text_style, scheduler.templates.event_header(ev.start_date, ev.end_date, ev), scheduler.templates.event_text(ev.start_date, ev.end_date, ev));\r\n\tthis._waiAria.eventAttr(ev, d);\r\n\tthis._rendered.push(d);\r\n\tbuffer.appendChild(d);\r\n\r\n\tvar parentPosition = parseInt( this.config.rtl ? parent.style.right : parent.style.left, 10);\r\n\r\n\tleft = left + parentPosition + menu_offset;\r\n\r\n\tif (this._edit_id == ev.id) {\r\n\r\n\t\td.style.zIndex = 1; //fix overlapping issue\r\n\t\twidth = Math.max(width - 4, scheduler.xy.editor_width);\r\n\t\td = document.createElement(\"div\");\r\n\t\td.setAttribute(\"event_id\", ev.id);\r\n\r\n\t\tthis._waiAria.eventAttr(ev, d);\r\n\r\n\t\td.className = \"dhx_cal_event dhx_cal_editor\";\r\n\t\tif (this.config.rtl) left++;\r\n\t\tthis.set_xy(d, width, height - 20, left, top + (scheduler.xy.event_header_height || 14));\r\n\r\n\r\n\t\tif(ev.color){\r\n\t\t\td.style.backgroundColor = ev.color;\r\n\t\t}\r\n\t\tvar tplClass = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\r\n\t\tif(tplClass){\r\n\t\t\td.className += \" \" + tplClass;\r\n\t\t}\r\n\t\tvar d2 = document.createElement(\"div\");\r\n\t\tthis.set_xy(d2, width - 6, height - 26);\r\n\t\td2.style.cssText += \";margin:2px 2px 2px 2px;overflow:hidden;\";\r\n\r\n\t\td.appendChild(d2);\r\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(d);\r\n\t\tthis._rendered.push(d);\r\n\r\n\t\td2.innerHTML = \"<textarea class='dhx_cal_editor'>\" + ev.text + \"</textarea>\";\r\n\t\tthis._editor = d2.querySelector(\"textarea\");\r\n\t\tif (this._quirks7) this._editor.style.height = height - 12 + \"px\"; //IEFIX\r\n\t\tthis._editor.onkeydown = function(e) {\r\n\t\t\tif ((e || event).shiftKey) return true;\r\n\t\t\tvar code = (e || event).keyCode;\r\n\t\t\tif (code == scheduler.keys.edit_save) scheduler.editStop(true);\r\n\t\t\tif (code == scheduler.keys.edit_cancel) scheduler.editStop(false);\r\n\r\n\t\t\tif(code == scheduler.keys.edit_save || code == scheduler.keys.edit_cancel){\r\n\t\t\t\tif(e.preventDefault) e.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tthis._editor.onselectstart = function (e) {\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tscheduler._focus(this._editor, true);\r\n\t\t//IE and opera can add x-scroll during focusing\r\n\t\tthis._els[\"dhx_cal_data\"][0].scrollLeft = 0;\r\n\t}\r\n\tif (this.xy.menu_width !== 0 && this._select_id == ev.id) {\r\n\t\tif (this.config.cascade_event_display && this._drag_mode)\r\n\t\t\td.style.zIndex = 1; //fix overlapping issue for cascade view in case of dnd of selected event\r\n\t\tvar icons = this.config[\"icons_\" + ((this._edit_id == ev.id) ? \"edit\" : \"select\")];\r\n\t\tvar icons_str = \"\";\r\n\t\tvar bg_color = (ev.color ? (\"background-color: \" + ev.color + \";\") : \"\");\r\n\t\tvar color = (ev.textColor ? (\"color: \" + ev.textColor + \";\") : \"\");\r\n\r\n\t\tvar ariaAttr;\r\n\t\tfor (var i = 0; i < icons.length; i++) {\r\n\t\t\tariaAttr = this._waiAria.eventMenuAttrString(icons[i]);\r\n\t\t\ticons_str += \"<div class='dhx_menu_icon \" + icons[i] + \"' style='\" + bg_color + \"\" + color + \"' title='\" + this.locale.labels[icons[i]] + \"'\"+ariaAttr+\"></div>\";\r\n\t\t}\r\n\t\tvar obj = this._render_v_bar(ev, left - menu + 1, top, menu, icons.length * 20 + 26 - 2, \"\", \"<div style='\" + bg_color + \"\" + color + \"' class='dhx_menu_head'></div>\", icons_str, true);\r\n\t\tobj.style.left = left - menu + 1;\r\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(obj);\r\n\t\tthis._rendered.push(obj);\r\n\t}\r\n\tif(this.config.drag_highlight && this._drag_id == ev.id){\r\n\t\tthis.highlightEventPosition(ev);\r\n\t}\r\n};\r\nscheduler._render_v_bar = function (ev, x, y, w, h, style, contentA, contentB, bottom) {\r\n\tvar d = document.createElement(\"div\");\r\n\tvar id = ev.id;\r\n\tvar cs = (bottom) ? \"dhx_cal_event dhx_cal_select_menu\" : \"dhx_cal_event\";\r\n\r\n\tvar state = scheduler.getState();\r\n\tif(state.drag_id == ev.id){\r\n\t\tcs += \" dhx_cal_event_drag\";\r\n\t}\r\n\r\n\tif(state.select_id == ev.id){\r\n\t\tcs += \" dhx_cal_event_selected\";\r\n\t}\r\n\r\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\tif (cse) cs = cs + \" \" + cse;\r\n\r\n\tif(this.config.cascade_event_display) {\r\n\t\tcs += \" dhx_cal_event_cascade\";\r\n\t}\r\n\r\n\tvar bg_color = (ev.color ? (\"background-color:\" + ev.color + \";\") : \"\");\r\n\tvar color = (ev.textColor ? (\"color:\" + ev.textColor + \";\") : \"\");\r\n\r\n\tvar borderBox = scheduler._border_box_events();\r\n\r\n\tvar borderBoxWidth = w - 2;\r\n\tvar boxWidth = borderBox ? borderBoxWidth : (w-4),\r\n\t\theaderWidth = borderBox ? borderBoxWidth : (w-6),\r\n\t\tbodyWidth = borderBox ? borderBoxWidth : (w-(this._quirks?4:14)),\r\n\t\tfooterWidth = borderBox ? (borderBoxWidth - 2) : (w-8);\r\n\r\n\tvar bodyHeight = borderBox ? (h - this.xy.event_header_height - 1) : (h-(this._quirks?20:30) + 1);\r\n\r\n\r\n\tvar html = '<div event_id=\"' + id + '\" class=\"' + cs +\r\n\t\t\t\t'\" style=\"position:absolute; top:' + y + 'px; ' +\r\n\t\t\t\t((this.config.rtl) ? 'right:':'left:') + x + 'px; width:' + boxWidth + 'px; height:' + h + 'px;' +\r\n\t\t\t\t(style || \"\") + '\"></div>';\r\n\td.innerHTML = html;\r\n\r\n\tvar container = d.cloneNode(true).firstChild;\r\n\r\n\tif (!bottom && scheduler.renderEvent(container, ev, w, h, contentA, contentB)) {\r\n\t\treturn container;\r\n\t} else {\r\n\t\tcontainer = d.firstChild;\r\n\r\n\t\tvar inner_html = '<div class=\"dhx_event_move dhx_header\" style=\" width:' + headerWidth + 'px;' + bg_color + '\" >&nbsp;</div>';\r\n\t\tinner_html += '<div class=\"dhx_event_move dhx_title\" style=\"' + bg_color + '' + color + '\">' + contentA + '</div>';\r\n\t\tinner_html += '<div class=\"dhx_body\" style=\" width:' + bodyWidth + 'px; height:' + bodyHeight + 'px;' + bg_color + '' + color + '\">' + contentB + '</div>'; // +2 css specific, moved from render_event\r\n\r\n\t\tvar footer_class = \"dhx_event_resize dhx_footer\";\r\n\t\tif (bottom || ev._drag_resize === false)\r\n\t\t\tfooter_class = \"dhx_resize_denied \" + footer_class;\r\n\r\n\t\tinner_html += '<div class=\"' + footer_class + '\" style=\" width:' + footerWidth + 'px;' + (bottom ? ' margin-top:-1px;' : '') + '' + bg_color + '' + color + '\" ></div>';\r\n\r\n\t\tcontainer.innerHTML = inner_html;\r\n\t}\r\n\r\n\treturn container;\r\n};\r\nscheduler.renderEvent = function(){\r\n\treturn false;\r\n};\r\nscheduler.locate_holder = function(day) {\r\n\tif (this._mode == \"day\") return this._els[\"dhx_cal_data\"][0].firstChild; //dirty\r\n\treturn this._els[\"dhx_cal_data\"][0].childNodes[day];\r\n};\r\nscheduler.locate_holder_day = function(date, past) {\r\n\tvar day = Math.floor((this._correct_shift(date, 1) - this._min_date) / (60 * 60 * 24 * 1000));\r\n\t//when locating end data of event , we need to use next day if time part was defined\r\n\tif (past && this.date.time_part(date)) day++;\r\n\treturn day;\r\n};\r\n\r\n\r\n\r\nscheduler._get_dnd_order = function(order, ev_height, max_height){\r\n\tif(!this._drag_event)\r\n\t\treturn order;\r\n\tif(!this._drag_event._orig_sorder)\r\n\t\tthis._drag_event._orig_sorder = order;\r\n\telse\r\n\t\torder = this._drag_event._orig_sorder;\r\n\r\n\tvar evTop = ev_height * order;\r\n\twhile((evTop + ev_height) > max_height){\r\n\t\torder--;\r\n\t\tevTop -= ev_height;\r\n\t}\r\n\torder = Math.max(order, 0);\r\n\treturn order;\r\n};\r\n//scheduler._get_event_bar_pos = function(sday, eday, week, drag){\r\nscheduler._get_event_bar_pos = function(ev){\r\n\tvar rtl = this.config.rtl;\r\n\tvar columns = this._colsS;\r\n\tvar x = columns[ev._sday];\r\n\tvar x2 = columns[ev._eday];\r\n\tif (rtl) {\r\n\t\tx = columns[columns.col_length] - columns[ev._eday] + columns[0];\r\n\t\tx2 = columns[columns.col_length] - columns[ev._sday] + columns[0];\r\n\t}\r\n\r\n\tif (x2 == x) x2 = columns[ev._eday + 1];\r\n\tvar hb = this.xy.bar_height;\r\n\r\n\tvar order = ev._sorder;\r\n\tif(ev.id == this._drag_id){\r\n\t\tvar cellHeight = columns.heights[ev._sweek + 1] - columns.heights[ev._sweek]- this.xy.month_head_height;//22 for month head height\r\n\t\torder = scheduler._get_dnd_order(order, hb, cellHeight);\r\n\t}\r\n\tvar y_event_offset =  order * hb;\r\n\tvar y = columns.heights[ev._sweek] + (columns.height ? (this.xy.month_scale_height + 2) : 2 ) + y_event_offset;\r\n\treturn {x:x, x2:x2, y:y};\r\n};\r\n\r\nscheduler.render_event_bar = function (ev) {\r\n\tvar parent = this._rendered_location;\r\n\tvar pos = this._get_event_bar_pos(ev);\r\n\tvar y = pos.y;\r\n\tvar x = pos.x;\r\n\tvar x2 = pos.x2;\r\n\t// resize for month mutliday events\r\n\tvar resize_handle = \"\";\r\n\r\n\t//events in ignored dates\r\n\r\n\tif (!x2) return;\r\n\r\n\tvar resizable = scheduler.config.resize_month_events && this._mode == \"month\" &&\r\n\t\t(!ev._timed || scheduler.config.resize_month_timed);\r\n\r\n\tvar d = document.createElement(\"div\");\r\n\tvar left_chunk = (ev.hasOwnProperty(\"_first_chunk\") && ev._first_chunk),\r\n\t\tright_chunk = (ev.hasOwnProperty(\"_last_chunk\") && ev._last_chunk);\r\n\r\n\tvar resize_left = resizable && (ev._timed || left_chunk);\r\n\tvar resize_right = resizable && (ev._timed || right_chunk);\r\n\r\n\tvar timed = true;\r\n\tvar cs = \"dhx_cal_event_clear\";\r\n\tif (!ev._timed || resizable) {\r\n\t\ttimed = false;\r\n\t\tcs = \"dhx_cal_event_line\";\r\n\t}\r\n\tif(left_chunk){\r\n\t\tcs += \" dhx_cal_event_line_start\";\r\n\t}\r\n\tif(right_chunk){\r\n\t\tcs += \" dhx_cal_event_line_end\";\r\n\t}\r\n\tif(resize_left){\r\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_start'></div>\";\r\n\t}\r\n\tif(resize_right){\r\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_end'></div>\";\r\n\t}\r\n\r\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\tif (cse){\r\n\t\tcs += \" \" + cse;\r\n\t}\r\n\r\n\tvar bg_color = (ev.color ? (\"background:\" + ev.color + \";\") : \"\");\r\n\tvar color = (ev.textColor ? (\"color:\" + ev.textColor + \";\") : \"\");\r\n\r\n\tvar style_text = [\r\n\t\t\"position:absolute\",\r\n\t\t\"top:\" + y + \"px\",\r\n\t\t\"left:\" + x + \"px\",\r\n\t\t\"width:\" + (x2 - x - 3 - (timed ? 1 : 0)) + \"px\",\r\n\t\tcolor,\r\n\t\tbg_color,\r\n\t\t(ev._text_style || \"\")\r\n\t].join(\";\");\r\n\r\n\tvar html = \"<div event_id='\" + ev.id + \"' class='\"+ cs + \"' style='\"+style_text+\"'\"+this._waiAria.eventBarAttrString(ev)+\">\";\r\n\tif (resizable) {\r\n\t\thtml += resize_handle;\r\n\t}\r\n\tif(scheduler.getState().mode == \"month\"){\r\n\t\tev = scheduler.getEvent(ev.id); // ev at this point could be a part (row in a month view) of a larger event\r\n\t}\r\n\r\n\tif (ev._timed)\r\n\t\thtml += scheduler.templates.event_bar_date(ev.start_date, ev.end_date, ev);\r\n\thtml += scheduler.templates.event_bar_text(ev.start_date, ev.end_date, ev) + '</div>';\r\n\thtml += '</div>';\r\n\r\n\td.innerHTML = html;\r\n\r\n\tthis._rendered.push(d.firstChild);\r\n\tparent.appendChild(d.firstChild);\r\n};\r\n\r\nscheduler._locate_event = function(node) {\r\n\tvar id = null;\r\n\twhile (node && !id && node.getAttribute) {\r\n\t\tid = node.getAttribute(\"event_id\");\r\n\t\tnode = node.parentNode;\r\n\t}\r\n\treturn id;\r\n};\r\n\r\nscheduler._locate_css = function(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = e.target || e.srcElement;\r\n\tvar css = '';\r\n\r\n\twhile (trg){\r\n\t\tcss = scheduler._getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!scheduler._trim(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!scheduler._trim(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nscheduler.edit = function(id) {\r\n\tif (this._edit_id == id) return;\r\n\tthis.editStop(false, id);\r\n\tthis._edit_id = id;\r\n\tthis.updateEvent(id);\r\n};\r\nscheduler.editStop = function(mode, id) {\r\n\tif (id && this._edit_id == id) return;\r\n\tvar ev = this.getEvent(this._edit_id);\r\n\tif (ev) {\r\n\t\tif (mode) ev.text = this._editor.value;\r\n\t\tthis._edit_id = null;\r\n\t\tthis._editor = null;\r\n\t\tthis.updateEvent(ev.id);\r\n\t\tthis._edit_stop_event(ev, mode);\r\n\t}\r\n};\r\nscheduler._edit_stop_event = function(ev, mode) {\r\n\tif (this._new_event) {\r\n\t\tif (!mode) {\r\n\t\t\tif (ev) // in case of custom lightbox user can already delete event\r\n\t\t\t\tthis.deleteEvent(ev.id, true);\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onEventAdded\", [ev.id, ev]);\r\n\t\t}\r\n\t\tthis._new_event = null;\r\n\t} else {\r\n\t\tif (mode){\r\n\t\t\tthis.callEvent(\"onEventChanged\", [ev.id, ev]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.getEvents = function(from, to) {\r\n\tvar result = [];\r\n\tfor (var a in this._events) {\r\n\t\tvar ev = this._events[a];\r\n\t\tif (ev && ( (!from && !to) || (ev.start_date < to && ev.end_date > from) ))\r\n\t\t\tresult.push(ev);\r\n\t}\r\n\treturn result;\r\n};\r\nscheduler.getRenderedEvent = function(id) {\r\n\tif (!id)\r\n\t\treturn;\r\n\tvar rendered_events = scheduler._rendered;\r\n\tfor (var i=0; i<rendered_events.length; i++) {\r\n\t\tvar rendered_event = rendered_events[i];\r\n\t\tif (rendered_event.getAttribute(\"event_id\") == id) {\r\n\t\t\treturn rendered_event;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\nscheduler.showEvent = function(id, mode) {\r\n\tvar section;\r\n\tif(id && typeof id === \"object\"){\r\n\t\tmode = id.mode;\r\n\t\tsection = id.section;\r\n\t\tid = id.section;\r\n\t}\r\n\tvar ev = (typeof id == \"number\" || typeof id == \"string\") ? scheduler.getEvent(id) : id;\r\n\tmode = mode||scheduler._mode;\r\n\r\n\tif (!ev || (this.checkEvent(\"onBeforeEventDisplay\") && !this.callEvent(\"onBeforeEventDisplay\", [ev, mode])))\r\n\t\treturn;\r\n\r\n\tvar scroll_hour = scheduler.config.scroll_hour;\r\n\tscheduler.config.scroll_hour = ev.start_date.getHours();\r\n\tvar preserve_scroll = scheduler.config.preserve_scroll;\r\n\tscheduler.config.preserve_scroll = false;\r\n\r\n\tvar original_color = ev.color;\r\n\tvar original_text_color = ev.textColor;\r\n\tif (scheduler.config.highlight_displayed_event) {\r\n\t\tev.color = scheduler.config.displayed_event_color;\r\n\t\tev.textColor = scheduler.config.displayed_event_text_color;\r\n\t}\r\n\r\n\tscheduler.setCurrentView(new Date(ev.start_date), mode);\r\n\r\n\tfunction restoreOriginalColors(){\r\n\t\tev.color = original_color;\r\n\t\tev.textColor = original_text_color;\r\n\t}\r\n\r\n\tscheduler.config.scroll_hour = scroll_hour;\r\n\tscheduler.config.preserve_scroll = preserve_scroll;\r\n\r\n\tif (scheduler.matrix && scheduler.matrix[mode]) {\r\n\t\tvar timeline = scheduler.getView();\r\n\t\tvar property = timeline.y_property;\r\n\r\n\t\tvar event = scheduler.getEvent(ev.id);\r\n\r\n\t\tif(event){\r\n\t\t\tif(!section){\r\n\t\t\t\tvar section = event[property];\r\n\t\t\t\tif(Array.isArray(section)){\r\n\t\t\t\t\tsection = section[0];\r\n\t\t\t\t}else if(typeof section === \"string\" && scheduler.config.section_delimiter && section.indexOf(scheduler.config.section_delimiter) > -1){\r\n\t\t\t\t\tsection = section.split(scheduler.config.section_delimiter)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar top = timeline.posFromSection(section);\r\n\t\t\tvar left = timeline.posFromDate(event.start_date);\r\n\t\t\tvar container = scheduler.$container.querySelector(\".dhx_timeline_data_wrapper\");\r\n\t\t\tleft = left - (container.offsetWidth - timeline.dx) / 2;\r\n\t\t\ttop = top - container.offsetHeight / 2 + timeline.dy/2;\r\n\r\n\t\t\tif (timeline._smartRenderingEnabled()) {\r\n\t\t\t\tvar handlerId = timeline.attachEvent(\"onScroll\", function(){\r\n\t\t\t\t\trestoreOriginalColors();\r\n\t\t\t\t\ttimeline.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttimeline.scrollTo({\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top\r\n\t\t\t});\r\n\t\t\tif (!timeline._smartRenderingEnabled()) {\r\n\t\t\t\trestoreOriginalColors();\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\trestoreOriginalColors();\r\n\t}\r\n\r\n\tscheduler.callEvent(\"onAfterEventDisplay\", [ev, mode]);\r\n};\r\n\r\nscheduler._append_drag_marker = function(m){\r\n\tif(m.parentNode) return;\r\n\tvar zone = scheduler._els[\"dhx_cal_data\"][0];\r\n\r\n\tvar scale = zone.lastChild;\r\n\tvar className = scheduler._getClassName(scale);\r\n\tif(className.indexOf(\"dhx_scale_holder\") < 0 && scale.previousSibling){\r\n\t\tscale = scale.previousSibling;\r\n\t}\r\n\r\n\tclassName = scheduler._getClassName(scale);\r\n\tif (scale && className.indexOf(\"dhx_scale_holder\") === 0) {\r\n\t\tscale.appendChild(m);\r\n\t}\r\n};\r\n\r\nscheduler._update_marker_position = function(m, event){\r\n\tvar size = scheduler._calc_event_y(event, 0);\r\n\tm.style.top = size.top + \"px\";\r\n\tm.style.height = size.height + \"px\";\r\n};\r\n\r\nscheduler.highlightEventPosition = function(event){\r\n\tvar m = document.createElement(\"div\");\r\n\r\n\tm.setAttribute(\"event_id\", event.id);\r\n\tthis._rendered.push(m);\r\n\tthis._update_marker_position(m, event);\r\n\r\n\tvar css = this.templates.drag_marker_class(event.start_date, event.end_date, event);\r\n\tvar html = this.templates.drag_marker_content(event.start_date, event.end_date, event);\r\n\tm.className = \"dhx_drag_marker\";\r\n\tif(css)\r\n\t\tm.className += \" \" + css;\r\n\tif(html)\r\n\t\tm.innerHTML = html;\r\n\tthis._append_drag_marker(m);\r\n};\r\nscheduler._loaded = {};\r\nscheduler._load = function(url, from) {\r\n\turl = url || this._load_url;\r\n\r\n\tif(!url){\r\n\t\t//if scheduler.setLoadMode is called before scheduler.init, initial rendering will invoke data loading while url is undefined\r\n\t\treturn;\r\n\t}\r\n\r\n\turl += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + \"timeshift=\" + (new Date()).getTimezoneOffset();\r\n\tif (this.config.prevent_cache)    url += \"&uid=\" + this.uid();\r\n\tvar to;\r\n\tfrom = from || this._date;\r\n\tfunction ajaxCallback(response) {\r\n\t\tscheduler.on_load(response);\r\n\t\tscheduler.callEvent(\"onLoadEnd\", []);\r\n\t}\r\n\tif (this._load_mode) {\r\n\t\tvar lf = this.templates.load_format;\r\n\r\n\t\tfrom = this.date[this._load_mode + \"_start\"](new Date(from.valueOf()));\r\n\t\twhile (from > this._min_date) from = this.date.add(from, -1, this._load_mode);\r\n\t\tto = from;\r\n\r\n\t\tvar cache_line = true;\r\n\t\twhile (to < this._max_date) {\r\n\t\t\tto = this.date.add(to, 1, this._load_mode);\r\n\t\t\tif (this._loaded[lf(from)] && cache_line)\r\n\t\t\t\tfrom = this.date.add(from, 1, this._load_mode); else cache_line = false;\r\n\t\t}\r\n\r\n\t\tvar temp_to = to;\r\n\t\tdo {\r\n\t\t\tto = temp_to;\r\n\t\t\ttemp_to = this.date.add(to, -1, this._load_mode);\r\n\t\t} while (temp_to > from && this._loaded[lf(temp_to)]);\r\n\r\n\t\tif (to <= from)\r\n\t\t\treturn false; //already loaded\r\n\r\n\t\tscheduler.$ajax.get(url + \"&from=\" + lf(from) + \"&to=\" + lf(to), ajaxCallback);\r\n\r\n\t\twhile (from < to) {\r\n\t\t\tthis._loaded[lf(from)] = true;\r\n\t\t\tfrom = this.date.add(from, 1, this._load_mode);\r\n\t\t}\r\n\t} else {\r\n\t\tscheduler.$ajax.get(url, ajaxCallback);\r\n\t}\r\n\r\n\t// TODO: remove onXLS\r\n\tthis.callEvent(\"onXLS\", []);\r\n\tthis.callEvent(\"onLoadStart\", []);\r\n\treturn true;\r\n};\r\n\r\nscheduler._parsers = {};\r\n\r\nscheduler._parsers.xml = {\r\n\tcanParse: function(data, xhr){\r\n\t\t// IE returns non-empty responseXML type regardless of actual data type\r\n\t\tif(xhr.responseXML && xhr.responseXML.firstChild){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tvar xmlDoc = scheduler.$ajax.parse(xhr.responseText);\r\n\t\t\tvar topElement = scheduler.$ajax.xmltop(\"data\", xmlDoc);\r\n\t\t\tif(topElement && topElement.tagName === \"data\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}catch (e){\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tparse: function(loader) {\r\n\t\tvar xml;\r\n\r\n\t\tif (!loader.xmlDoc.responseXML) { //from a string\r\n\t\t\tloader.xmlDoc.responseXML = scheduler.$ajax.parse(loader.xmlDoc.responseText);\r\n\t\t}\r\n\t\r\n\t\txml = scheduler.$ajax.xmltop(\"data\", loader.xmlDoc);\r\n\t\tif (xml.tagName != \"data\") return null;//not an xml\r\n\t\tvar csrfToken = xml.getAttribute(\"dhx_security\");\r\n\t\tif (csrfToken) {\r\n\t\t\tif (window.dhtmlx) {\r\n\t\t\t\tdhtmlx.security_key = csrfToken;\r\n\t\t\t}\r\n\t\t\tscheduler.security_key = csrfToken;\r\n\t\t}\r\n\t\r\n\t\tvar opts = scheduler.$ajax.xpath(\"//coll_options\", loader.xmlDoc);\r\n\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\tvar arr = scheduler.serverList[bind];\r\n\t\t\tif (!arr) {\r\n\t\t\t\tscheduler.serverList[bind] = arr = [];\r\n\t\t\t}\r\n\t\t\tarr.splice(0, arr.length);\t//clear old options\r\n\t\t\tvar itms = scheduler.$ajax.xpath(\".//item\", opts[i]);\r\n\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\tvar itm = itms[j];\r\n\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\tvar obj = { key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (opts.length)\r\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\t\r\n\t\tvar ud = scheduler.$ajax.xpath(\"//userdata\", loader.xmlDoc);\r\n\t\tfor (var i = 0; i < ud.length; i++) {\r\n\t\t\tvar udx = scheduler._xmlNodeToJSON(ud[i]);\r\n\t\t\tscheduler._userdata[udx.name] = udx.text;\r\n\t\t}\r\n\t\r\n\t\tvar evs = [];\r\n\t\txml = scheduler.$ajax.xpath(\"//event\", loader.xmlDoc);\r\n\t\r\n\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\tvar ev = evs[i] = scheduler._xmlNodeToJSON(xml[i]);\r\n\t\t\tscheduler._init_event(ev);\r\n\t\t}\r\n\t\treturn evs;\r\n\t}\r\n};\r\nscheduler.json = scheduler._parsers.json = {\r\n\tcanParse: function(data){\r\n\t\tif(data && typeof data === \"object\"){\r\n\t\t\treturn true;\r\n\t\t} else if(typeof data === \"string\"){\r\n\t\t\ttry {\r\n\t\t\t\tvar result = JSON.parse(data);\r\n\t\t\t\treturn Object.prototype.toString.call(result) === '[object Object]' || \r\n\t\t\t\t\t\tObject.prototype.toString.call(result) === '[object Array]';\r\n\t\t\t} catch (err) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tparse: function(data) {\r\n\t\tvar events = [];\r\n\r\n\t\tif (typeof data == \"string\") {\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\t\tif (Object.prototype.toString.call(data) === '[object Array]') {\r\n\t\t\tevents = data;\r\n\t\t} else {\r\n\t\t\tevents = data ? data.data : [];\r\n\t\t}\r\n\t\tevents = events || [];\r\n\r\n\t\tif (data.dhx_security) {\r\n\t\t\tif (window.dhtmlx) {\r\n\t\t\t\tdhtmlx.security_key = data.dhx_security;\r\n\t\t\t}\r\n\t\t\tscheduler.security_key = data.dhx_security;\r\n\t\t}\r\n\r\n\t\tvar collections = (data && data.collections) ? data.collections : {};\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = scheduler.serverList[key];\r\n\t\t\t\tif (!arr) {\r\n\t\t\t\t\tscheduler.serverList[key] = arr = [];\r\n\t\t\t\t}\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\r\n\t\tvar evs = [];\r\n\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\tvar event = events[i];\r\n\t\t\tscheduler._init_event(event);\r\n\t\t\tevs.push(event);\r\n\t\t}\r\n\t\treturn evs;\r\n\t}\r\n};\r\nscheduler.ical = scheduler._parsers.ical = {\r\n\tcanParse: function(data){\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\treturn new RegExp(\"^BEGIN:VCALENDAR\").test(data);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tparse:function(str){\r\n\t\tvar data = str.match(RegExp(this.c_start+\"[^\\f]*\"+this.c_end,\"\"));\r\n\t\tif (!data.length) return;\r\n\r\n\t\t// mpl: handle bad unfolding\r\n\t\tdata[0]=data[0].replace(/[\\r\\n]+ /g,\"\");\r\n\r\n\t\t//unfolding \r\n\t\tdata[0]=data[0].replace(/[\\r\\n]+(?=[a-z \\t])/g,\" \");\r\n\t\t//drop property\r\n\t\tdata[0]=data[0].replace(/\\;[^:\\r\\n]*:/g,\":\");\r\n\t\t\r\n\t\t\r\n\t\tvar incoming=[];\r\n\t\tvar match;\r\n\t\tvar event_r = RegExp(\"(?:\"+this.e_start+\")([^\\f]*?)(?:\"+this.e_end+\")\",\"g\");\r\n\t\twhile ((match=event_r.exec(data)) !== null){\r\n\t\t\tvar e={};\r\n\t\t\tvar param;\r\n\t\t\tvar param_r = /[^\\r\\n]+[\\r\\n]+/g;\r\n\t\t\twhile ((param=param_r.exec(match[1])) !== null)\r\n\t\t\t\tthis.parse_param(param.toString(),e);\r\n\t\t\tif (e.uid && !e.id) e.id = e.uid; //fallback to UID, when ID is not defined\r\n\t\t\tincoming.push(e);\t\r\n\t\t}\r\n\t\treturn incoming;\r\n\t},\r\n\tparse_param:function(str,obj){\r\n\t\tvar d = str.indexOf(\":\"); \r\n\t\t\tif (d==-1) return;\r\n\t\t\r\n\t\tvar name = str.substr(0,d).toLowerCase();\r\n\t\tvar value = str.substr(d+1).replace(/\\\\\\,/g,\",\").replace(/[\\r\\n]+$/,\"\");\r\n\t\tif (name==\"summary\")\r\n\t\t\tname=\"text\";\r\n\t\telse if (name==\"dtstart\"){\r\n\t\t\tname = \"start_date\";\r\n\t\t\tvalue = this.parse_date(value,0,0);\r\n\t\t}\r\n\t\telse if (name==\"dtend\"){\r\n\t\t\tname = \"end_date\";\r\n\t\t\tvalue = this.parse_date(value,0,0);\r\n\t\t}\r\n\t\tobj[name]=value;\r\n\t},\r\n\tparse_date:function(value,dh,dm){\r\n\t\tvar t = value.split(\"T\");\r\n\r\n\t\tvar utcMark = false;\r\n\t\tif (t[1]){\r\n\t\t\tdh=t[1].substr(0,2);\r\n\t\t\tdm=t[1].substr(2,2);\r\n\t\t\tutcMark = !!(t[1][6] == \"Z\");\r\n\t\t}\r\n\t\tvar dy = t[0].substr(0,4);\r\n\t\tvar dn = parseInt(t[0].substr(4,2),10)-1;\r\n\t\tvar dd = t[0].substr(6,2);\r\n\r\n\t\tif(scheduler.config.server_utc || utcMark){\r\n\t\t\treturn new Date(Date.UTC(dy,dn,dd,dh,dm)) ;\r\n\t\t}else{\r\n\t\t\treturn new Date(dy,dn,dd,dh,dm);\r\n\t\t}\r\n\t},\r\n\tc_start:\"BEGIN:VCALENDAR\",\r\n\te_start:\"BEGIN:VEVENT\",\r\n\te_end:\"END:VEVENT\",\r\n\tc_end:\"END:VCALENDAR\"\t\r\n};\r\n\r\nscheduler.on_load = function (loader) {\r\n\tthis.callEvent(\"onBeforeParse\", []);\r\n\r\n\tvar evs;\r\n\tvar error = false;\r\n\r\n\tvar foundParser = false;\r\n\tfor(var i in this._parsers){\r\n\t\tvar parser = this._parsers[i];\r\n\t\tif(parser.canParse(loader.xmlDoc.responseText, loader.xmlDoc)){\r\n\t\t\ttry{\r\n\t\t\t\tvar param = loader.xmlDoc.responseText;\r\n\t\t\t\tif(i === \"xml\"){\r\n\t\t\t\t\tparam = loader;\r\n\t\t\t\t}\r\n\t\t\t\tevs = parser.parse(param);\r\n\t\t\t\tif(!evs){\r\n\t\t\t\t\terror = true;\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\terror = true;\r\n\t\t\t}\r\n\t\t\tfoundParser = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(!foundParser){\r\n\t\tif(this._process && this[this._process]){\r\n\t\t\ttry{\r\n\t\t\t\tevs = this[this._process].parse(loader.xmlDoc.responseText);\r\n\t\t\t}catch (e){\r\n\t\t\t\terror = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\terror = true;\r\n\t\t}\r\n\t}\r\n\r\n\tif(error || (loader.xmlDoc.status && loader.xmlDoc.status >= 400)){\r\n\t\tthis.callEvent(\"onLoadError\", [loader.xmlDoc]);\r\n\t\tevs = [];\r\n\t}\r\n\r\n\tthis._process_loading(evs);\r\n\r\n\t// TODO: remove onXLE\r\n\tthis.callEvent(\"onXLE\", []);\r\n\tthis.callEvent(\"onParse\", []);\r\n};\r\nscheduler._process_loading = function(evs) {\r\n\tthis._loading = true;\r\n\tthis._not_render = true;\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tif (!this.callEvent(\"onEventLoading\", [evs[i]])) continue;\r\n\t\tthis.addEvent(evs[i]);\r\n\t}\r\n\tthis._not_render = false;\r\n\tif (this._render_wait) this.render_view_data();\r\n\r\n\tthis._loading = false;\r\n\tif (this._after_call) this._after_call();\r\n\tthis._after_call = null;\r\n};\r\nscheduler._init_event = function(event) {\r\n\tevent.text = (event.text || event._tagvalue) || \"\";\r\n\tevent.start_date = scheduler._init_date(event.start_date);\r\n\tevent.end_date = scheduler._init_date(event.end_date);\r\n};\r\n\r\nscheduler._init_date = function(date){\r\n\tif(!date)\r\n\t\treturn null;\r\n\tif (typeof date == \"string\") {\r\n\t\treturn scheduler._helpers.parseDate(date);\r\n\t}\r\n\telse return new Date(date);\r\n};\r\n\r\nscheduler.json = {};\r\nscheduler.json.parse = function(data) {\r\n\r\n\tvar events = [];\r\n\r\n\tif (typeof data == \"string\") {\r\n\t\tdata = JSON.parse(data);\r\n\t}\r\n\tif (Object.prototype.toString.call(data) === '[object Array]') {\r\n\t\tevents = data;\r\n\t} else {\r\n\t\tevents = data ? data.data : [];\r\n\t}\r\n\tevents = events || [];\r\n\r\n\tif (data.dhx_security) {\r\n\t\tif (window.dhtmlx) {\r\n\t\t\tdhtmlx.security_key = data.dhx_security;\r\n\t\t}\r\n\t\tscheduler.security_key = data.dhx_security;\r\n\t}\r\n\r\n\tvar collections = (data && data.collections) ? data.collections : {};\r\n\tvar collections_loaded = false;\r\n\tfor (var key in collections) {\r\n\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\tcollections_loaded = true;\r\n\t\t\tvar collection = collections[key];\r\n\t\t\tvar arr = scheduler.serverList[key];\r\n\t\t\tif (!arr) {\r\n\t\t\t\tscheduler.serverList[key] = arr = [];\r\n\t\t\t}\r\n\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\tvar option = collection[j];\r\n\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\r\n\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (collections_loaded)\r\n\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\r\n\tvar evs = [];\r\n\tfor (var i = 0; i < events.length; i++) {\r\n\t\tvar event = events[i];\r\n\t\tscheduler._init_event(event);\r\n\t\tevs.push(event);\r\n\t}\r\n\treturn evs;\r\n};\r\nscheduler.parse = function(data, type) {\r\n\tthis._process = type;\r\n\tthis.on_load({xmlDoc: {responseText: data}});\r\n};\r\nscheduler.load = function(url, call) {\r\n\tif (typeof call == \"string\") {\r\n\t\tthis._process = call;\r\n\t\tcall = arguments[2];\r\n\t}\r\n\r\n\tthis._load_url = url;\r\n\tthis._after_call = call;\r\n\tthis._load(url, this._date);\r\n};\r\n//possible values - day,week,month,year,all\r\nscheduler.setLoadMode = function(mode) {\r\n\tif (mode == \"all\") mode = \"\";\r\n\tthis._load_mode = mode;\r\n};\r\n\r\nscheduler.serverList = function(name, array) {\r\n\tif (array) {\r\n\t\tthis.serverList[name] = array.slice(0);\r\n\t\treturn this.serverList[name];\r\n\t}\r\n\tthis.serverList[name] = (this.serverList[name] || []);\r\n\treturn this.serverList[name];\r\n};\r\nscheduler._userdata = {};\r\n\r\nscheduler._xmlNodeToJSON = function(node) {\r\n\tvar t = {};\r\n\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\tvar child = node.childNodes[i];\r\n\t\tif (child.nodeType == 1)\r\n\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t}\r\n\r\n\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\r\n\treturn t;\r\n};\r\nscheduler.attachEvent(\"onXLS\", function() {\r\n\tif (this.config.show_loading === true) {\r\n\t\tvar t;\r\n\t\tt = this.config.show_loading = document.createElement(\"div\");\r\n\t\tt.className = 'dhx_loading';\r\n\t\tt.style.left = Math.round((this._x - 128) / 2) + \"px\";\r\n\t\tt.style.top = Math.round((this._y - 15) / 2) + \"px\";\r\n\t\tthis._obj.appendChild(t);\r\n\t}\r\n});\r\nscheduler.attachEvent(\"onXLE\", function() {\r\n\tvar t = this.config.show_loading;\r\n\tif (t && typeof t == \"object\") {\r\n\t\tif(t.parentNode) {\r\n\t\t\tt.parentNode.removeChild(t);\r\n\t\t}\r\n\t\tthis.config.show_loading = true;\r\n\t}\r\n});\r\n\r\nscheduler._lightbox_controls = {};\r\nscheduler.formSection = function(name){\r\n\tvar config = this.config.lightbox.sections;\r\n\tvar i =0;\r\n\tfor (i; i < config.length; i++)\r\n\t\tif (config[i].name == name)\r\n\t\t\tbreak;\r\n\tvar section = config[i];\r\n\tif (!scheduler._lightbox)\r\n\t\tscheduler.getLightbox();\r\n\tvar header = document.getElementById(section.id);\r\n\tvar node = header.nextSibling;\r\n\r\n\tvar result = {\r\n\t\tsection: section,\r\n\t\theader: header,\r\n\t\tnode: node,\r\n\t\tgetValue:function(ev){\r\n\t\t\treturn scheduler.form_blocks[section.type].get_value(node, (ev||{}), section);\r\n\t\t},\r\n\t\tsetValue:function(value, ev){\r\n\t\t\treturn scheduler.form_blocks[section.type].set_value(node, value, (ev||{}), section);\r\n\t\t}\r\n\t};\r\n\r\n\tvar handler = scheduler._lightbox_controls[\"get_\"+section.type+\"_control\"];\r\n\treturn handler?handler(result):result;\r\n};\r\nscheduler._lightbox_controls.get_template_control = function(result) {\r\n\tresult.control = result.node;\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_select_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_textarea_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_time_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\treturn result;\r\n};\r\n\r\nscheduler._lightbox_controls.defaults = {\r\n\ttemplate: {\r\n\t\theight:30\r\n\t},\r\n\ttextarea: {\r\n\t\theight: 200\r\n\t},\r\n\tselect: {\r\n\t\theight: 23\r\n\t},\r\n\ttime: {\r\n\t\theight: 20\r\n\t}\r\n};\r\n\r\n\r\nscheduler.form_blocks={\r\n\ttemplate:{\r\n\t\trender: function(sns){\r\n\t\t\tvar defaults = scheduler._lightbox_controls.defaults.template;\r\n\t\t\tvar defaultHeight = defaults ? defaults.height : 30;\r\n\t\t\tvar height=(sns.height||defaultHeight||30)+\"px\";\r\n\t\t\treturn \"<div class='dhx_cal_ltext dhx_cal_template' style='height:\"+height+\";'></div>\";\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,config){\r\n\t\t\tnode.innerHTML = value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev,config){\r\n\t\t\treturn node.innerHTML||\"\";\r\n\t\t},\r\n\t\tfocus: function(node){\r\n\t\t}\r\n\t},\r\n\ttextarea:{\r\n\t\trender:function(sns){\r\n\t\t\tvar defaults = scheduler._lightbox_controls.defaults.textarea;\r\n\t\t\tvar defaultHeight = defaults ? defaults.height : 200;\r\n\t\t\tvar height=(sns.height||defaultHeight||\"130\")+\"px\";\r\n\t\t\treturn \"<div class='dhx_cal_ltext' style='height:\"+height+\";'><textarea></textarea></div>\";\r\n\t\t},\r\n\t\tset_value:function(node,value,ev){\r\n\t\t\tscheduler.form_blocks.textarea._get_input(node).value=value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev){\r\n\t\t\treturn scheduler.form_blocks.textarea._get_input(node).value;\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tvar a = scheduler.form_blocks.textarea._get_input(node);\r\n\t\t\tscheduler._focus(a, true);\r\n\t\t},\r\n\t\t_get_input: function(node){\r\n\t\t\treturn node.getElementsByTagName(\"textarea\")[0];\r\n\t\t}\r\n\t},\r\n\tselect:{\r\n\t\trender:function(sns){\r\n\t\t\tvar defaults = scheduler._lightbox_controls.defaults.select;\r\n\t\t\tvar defaultHeight = defaults ? defaults.height : 23;\r\n\t\t\tvar height=(sns.height||defaultHeight||\"23\")+\"px\";\r\n\t\t\tvar html=\"<div class='dhx_cal_ltext' style='height:\"+height+\";'><select style='width:100%;'>\";\r\n\t\t\tfor (var i=0; i < sns.options.length; i++)\r\n\t\t\t\thtml+=\"<option value='\"+sns.options[i].key+\"'>\"+sns.options[i].label+\"</option>\";\r\n\t\t\thtml+=\"</select></div>\";\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,sns){\r\n\t\t\tvar select = node.firstChild;\r\n\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t}\r\n\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\tvalue = (select.options[0]||{}).value;\r\n\t\t\tselect.value=value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev){\r\n\t\t\treturn node.firstChild.value;\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tvar a=node.firstChild; scheduler._focus(a, true);\r\n\t\t}\r\n\t},\r\n\ttime:{\r\n\t\trender:function(sns) {\r\n\t\t\tif (!sns.time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tsns.time_format = [\"%H:%i\", \"%d\", \"%m\", \"%Y\"];\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {};\r\n\t\t\tvar time_format = sns.time_format;\r\n\r\n\t\t\tvar cfg = scheduler.config;\r\n\t\t\tvar dt = scheduler.date.date_part(scheduler._currentDate());\r\n\t\t\tvar last = 24*60, first = 0;\r\n\t\t\tif(scheduler.config.limit_time_select){\r\n\t\t\t\tlast = 60*cfg.last_hour+1;\r\n\t\t\t\tfirst = 60*cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\t\t\t\tvar selectBoxClass = \"\";\r\n\t\t\t\tvar options = \"\";\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_year_select\";\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\t//year\r\n\t\t\t\t\t\tvar range;\r\n\t\t\t\t\t\tvar start_year;\r\n\t\t\t\t\t\tvar end_year;\r\n\t\t\t\t\t\tif(sns.year_range){\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\tvar offset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_month_select\";\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i=0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+this.locale.date.month_full[i]+\"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_day_select\";\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i=1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+i+\"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_time_select\";\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile(i<last){\r\n\t\t\t\t\t\t\tvar time=this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+time+\"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf()+this.config.time_step*60*1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate()!=tdate)?1:0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti=diff*24*60+dt.getHours()*60+dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(options){\r\n\r\n\t\t\t\t\tvar ariaAttrs = scheduler._waiAria.lightboxSelectAttrString(time_option);\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\thtml += \"<select class='\"+selectBoxClass+\"' \"+readonly + ariaAttrs+\">\"+options+\"</select> \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar defaults = scheduler._lightbox_controls.defaults.select;\r\n\t\t\tvar defaultHeight = defaults ? defaults.height : 23;\r\n\t\t\tvar height = defaultHeight || 30;\r\n\t\t\treturn \"<div style='height:\"+height+\"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>\"+html+\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\"+html+\"</div>\";\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,config){\r\n\t\t\tvar cfg = scheduler.config;\r\n\t\t\tvar s=node.getElementsByTagName(\"select\");\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar start_date, end_date;\r\n\r\n\t\t\tif(cfg.full_day) {\r\n\t\t\t\tif (!node._full_day){\r\n\t\t\t\t\tvar html = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \"+scheduler.locale.labels.full_day+\"&nbsp;</label></input>\";\r\n\t\t\t\t\tif (!scheduler.config.wide_form)\r\n\t\t\t\t\t\thtml = node.previousSibling.innerHTML+html;\r\n\t\t\t\t\tnode.previousSibling.innerHTML=html;\r\n\t\t\t\t\tnode._full_day=true;\r\n\t\t\t\t}\r\n\t\t\t\tvar input=node.previousSibling.getElementsByTagName(\"input\")[0];\r\n\t\t\t\tinput.checked = (scheduler.date.time_part(ev.start_date)===0 && scheduler.date.time_part(ev.end_date)===0);\r\n\r\n\t\t\t\ts[map[0]].disabled=input.checked;\r\n\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\r\n\r\n\t\t\t\tinput.onclick = function(){\r\n\t\t\t\t\tif(input.checked) {\r\n\t\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\t\tscheduler.form_blocks.time.get_value(node,obj,config);\r\n\r\n\t\t\t\t\t\tstart_date = scheduler.date.date_part(obj.start_date);\r\n\t\t\t\t\t\tend_date = scheduler.date.date_part(obj.end_date);\r\n\r\n\t\t\t\t\t\tif (+end_date == +start_date || (+end_date >= +start_date && (ev.end_date.getHours() !== 0 || ev.end_date.getMinutes() !== 0)))\r\n\t\t\t\t\t\t\tend_date = scheduler.date.add(end_date, 1, \"day\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstart_date = null;\r\n\t\t\t\t\t\tend_date = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ts[map[0]].disabled=input.checked;\r\n\t\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\r\n\r\n\t\t\t\t\t_fill_lightbox_select(s,0,start_date||ev.start_date);\r\n\t\t\t\t\t_fill_lightbox_select(s,4,end_date||ev.end_date);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif(cfg.auto_end_date && cfg.event_duration) {\r\n\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!(cfg.auto_end_date && cfg.event_duration)){\r\n\t\t\t\t\t\t// setting may be disabled after the handler is attached\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart_date = new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\r\n\t\t\t\t\tend_date = new Date(start_date.getTime() + (scheduler.config.event_duration * 60 * 1000));\r\n\t\t\t\t\t_fill_lightbox_select(s, 4, end_date);\r\n\t\t\t\t};\r\n\t\t\t\tfor(var i=0; i<4; i++) {\r\n\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _fill_lightbox_select(s,i,d) {\r\n\t\t\t\tvar time_values = config._time_values;\r\n\t\t\t\tvar direct_value = d.getHours()*60+d.getMinutes();\r\n\t\t\t\tvar fixed_value = direct_value;\r\n\t\t\t\tvar value_found = false;\r\n\t\t\t\tfor (var k=0; k<time_values.length; k++) {\r\n\t\t\t\t\tvar t_v = time_values[k];\r\n\t\t\t\t\tif (t_v === direct_value) {\r\n\t\t\t\t\t\tvalue_found = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t_v < direct_value)\r\n\t\t\t\t\t\tfixed_value = t_v;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts[i+map[0]].value=(value_found)?direct_value:fixed_value;\r\n\t\t\t\tif(!(value_found || fixed_value)){\r\n\t\t\t\t\ts[i+map[0]].selectedIndex = -1;//show empty select in FF\r\n\t\t\t\t}\r\n\t\t\t\ts[i+map[1]].value=d.getDate();\r\n\t\t\t\ts[i+map[2]].value=d.getMonth();\r\n\t\t\t\ts[i+map[3]].value=d.getFullYear();\r\n\t\t\t}\r\n\r\n\t\t\t_fill_lightbox_select(s,0,ev.start_date);\r\n\t\t\t_fill_lightbox_select(s,4,ev.end_date);\r\n\t\t},\r\n\t\tget_value:function(node, ev, config) {\r\n\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\tev.start_date=new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\r\n\t\t\tev.end_date=new Date(s[map[3]+4].value,s[map[2]+4].value,s[map[1]+4].value,0,s[map[0]+4].value);\r\n\r\n\t\t\tif(!(s[map[3]].value && s[map[3]+4].value)){\r\n\t\t\t\t// use the previous date if start/end years are empty (outside lightbox range)\r\n\t\t\t\tvar original = scheduler.getEvent(scheduler._lightbox_id);\r\n\t\t\t\tif(original){\r\n\t\t\t\t\tev.start_date = original.start_date;\r\n\t\t\t\t\tev.end_date = original.end_date;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date<=ev.start_date)\r\n\t\t\t\tev.end_date=scheduler.date.add(ev.start_date,scheduler.config.time_step,\"minute\");\r\n\t\t\treturn {\r\n\t\t\t\tstart_date: new Date(ev.start_date),\r\n\t\t\t\tend_date: new Date(ev.end_date)\r\n\t\t\t};\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tscheduler._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler._setLbPosition = function(box) {\r\n\tif(!box){\r\n\t\treturn;\r\n\t}\r\n\tvar scrollTop = window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;\r\n\tvar scrollLeft = window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft;\r\n\r\n\tvar viewHeight = window.innerHeight||document.documentElement.clientHeight;\r\n\r\n\tif(scrollTop) // if vertical scroll on window\r\n\t\tbox.style.top=Math.round(scrollTop+Math.max((viewHeight-box.offsetHeight)/2, 0))+\"px\";\r\n\telse // vertical scroll on body\r\n\t\tbox.style.top=Math.round(Math.max(((viewHeight-box.offsetHeight)/2), 0) + 9)+\"px\"; // +9 for compatibility with auto tests\r\n\t// not quite accurate but used for compatibility reasons\r\n\tif(document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\tbox.style.left=Math.round(scrollLeft+(document.body.offsetWidth-box.offsetWidth)/2)+\"px\";\r\n\telse // horizontal scroll on the body\r\n\t\tbox.style.left=Math.round((document.body.offsetWidth-box.offsetWidth)/2)+\"px\";\r\n};\r\n\r\nscheduler.showCover=function(box){\r\n\tif (box){\r\n\t\tbox.style.display=\"block\";\r\n\r\n\t\tthis._setLbPosition(box);\r\n\t}\r\n\tif(scheduler.config.responsive_lightbox){\r\n\t\tdocument.documentElement.classList.add(\"dhx_cal_overflow_container\");\r\n\t\tdocument.body.classList.add(\"dhx_cal_overflow_container\");\r\n\t}\r\n\tthis.show_cover();\r\n};\r\nscheduler.showLightbox=function(id){\r\n\tif (!id) return;\r\n\tif (!this.callEvent(\"onBeforeLightbox\",[id])) {\r\n\t\tif (this._new_event)\r\n\t\t\tthis._new_event = null;\r\n\t\treturn;\r\n\t}\r\n\tvar box = this.getLightbox();\r\n\tthis.showCover(box);\r\n\tthis._fill_lightbox(id,box);\r\n\tthis._waiAria.lightboxVisibleAttr(box);\r\n\tthis.callEvent(\"onLightbox\",[id]);\r\n};\r\nscheduler._fill_lightbox = function(id, box) {\r\n\tvar ev = this.getEvent(id);\r\n\tvar s = box.getElementsByTagName(\"span\");\r\n\tvar lightboxHeader = [];\r\n\r\n\tif (scheduler.templates.lightbox_header) {\r\n\t\tlightboxHeader.push(\"\");\r\n\t\tvar headerContent = scheduler.templates.lightbox_header(ev.start_date, ev.end_date, ev);\r\n\t\tlightboxHeader.push(headerContent);\r\n\t\ts[1].innerHTML = \"\";\r\n\t\ts[2].innerHTML = headerContent;\r\n\t} else {\r\n\t\tvar headerDate = this.templates.event_header(ev.start_date, ev.end_date, ev);\r\n\t\tvar headerTitle = (this.templates.event_bar_text(ev.start_date, ev.end_date, ev) || \"\").substr(0, 70); //IE6 fix;\r\n\r\n\t\tlightboxHeader.push(headerDate);\r\n\t\tlightboxHeader.push(headerTitle);\r\n\t\ts[1].innerHTML = headerDate;\r\n\t\ts[2].innerHTML = headerTitle;\r\n\t}\r\n\r\n\tthis._waiAria.lightboxHeader(box,  lightboxHeader.join(\" \"));\r\n\r\n\tvar sns = this.config.lightbox.sections;\r\n\tfor (var i = 0; i < sns.length; i++) {\r\n\t\tvar current_sns = sns[i];\r\n\t\tvar node = scheduler._get_lightbox_section_node(current_sns);\r\n\t\tvar block = this.form_blocks[current_sns.type];\r\n\t\tvar value = (ev[current_sns.map_to] !== undefined) ? ev[current_sns.map_to] : current_sns.default_value;\r\n\t\tblock.set_value.call(this, node, value, ev, current_sns);\r\n\t\tif (sns[i].focus)\r\n\t\t\tblock.focus.call(this, node);\r\n\t}\r\n\r\n\tscheduler._lightbox_id = id;\r\n};\r\n\r\nscheduler._get_lightbox_section_node = function(section){\r\n\treturn document.getElementById(section.id).nextSibling;\r\n};\r\n\r\nscheduler._lightbox_out=function(ev){\r\n\tvar sns = this.config.lightbox.sections;\r\n\tfor (var i=0; i < sns.length; i++) {\r\n\t\tvar node = document.getElementById(sns[i].id);\r\n\t\tnode=(node?node.nextSibling:node);\r\n\t\tvar block=this.form_blocks[sns[i].type];\r\n\t\tvar res=block.get_value.call(this,node,ev, sns[i]);\r\n\t\tif (sns[i].map_to!=\"auto\")\r\n\t\t\tev[sns[i].map_to]=res;\r\n\t}\r\n\treturn ev;\r\n};\r\nscheduler._empty_lightbox=function(data){\r\n\tvar id=scheduler._lightbox_id;\r\n\tvar ev=this.getEvent(id);\r\n\tvar box=this.getLightbox();\r\n\r\n\tthis._lame_copy(ev, data);\r\n\r\n\tthis.setEvent(ev.id,ev);\r\n\tthis._edit_stop_event(ev,true);\r\n\tthis.render_view_data();\r\n};\r\nscheduler.hide_lightbox=function(id){\r\n\tscheduler.endLightbox(false, this.getLightbox());\r\n};\r\n\r\nscheduler.hideCover=function(box){\r\n\tif (box) box.style.display=\"none\";\r\n\tthis.hide_cover();\r\n\tif(scheduler.config.responsive_lightbox){\r\n\t\tdocument.documentElement.classList.remove(\"dhx_cal_overflow_container\");\r\n\t\tdocument.body.classList.remove(\"dhx_cal_overflow_container\");\r\n\t}\r\n};\r\nscheduler.hide_cover=function(){\r\n\tif (this._cover)\r\n\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\tthis._cover=null;\r\n};\r\n\r\nscheduler.show_cover=function(){\r\n\tif(this._cover) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis._cover=document.createElement(\"div\");\r\n\tthis._cover.className=\"dhx_cal_cover\";\r\n\tdocument.body.appendChild(this._cover);\r\n};\r\nscheduler.save_lightbox=function(){\r\n\tvar data = this._lightbox_out({}, this._lame_copy(this.getEvent(this._lightbox_id)));\r\n\tif (this.checkEvent(\"onEventSave\") && !this.callEvent(\"onEventSave\",[this._lightbox_id, data, this._new_event]))\r\n\t\treturn;\r\n\tthis._empty_lightbox(data);\r\n\tthis.hide_lightbox();\r\n};\r\nscheduler.startLightbox = function(id, box){\r\n\tthis._lightbox_id = id;\r\n\tthis._custom_lightbox = true;\r\n\r\n\tthis._temp_lightbox = this._lightbox;\r\n\tthis._lightbox = box;\r\n\tthis.showCover(box);\r\n};\r\nscheduler.endLightbox = function(mode, box){\r\n\tvar box = box || scheduler.getLightbox();\r\n\r\n\tvar event = scheduler.getEvent(this._lightbox_id);\r\n\tif(event)\r\n\t\tthis._edit_stop_event(event, mode);\r\n\tif (mode)\r\n\t\tscheduler.render_view_data();\r\n\tthis.hideCover(box);\r\n\r\n\tif (this._custom_lightbox){\r\n\t\tthis._lightbox = this._temp_lightbox;\r\n\t\tthis._custom_lightbox = false;\r\n\t}\r\n\tthis._temp_lightbox = this._lightbox_id = null; // in case of custom lightbox user only calls endLightbox so we need to reset _lightbox_id\r\n\tthis._waiAria.lightboxHiddenAttr(box);\r\n\tthis.callEvent(\"onAfterLightbox\",[]);\r\n};\r\nscheduler.resetLightbox = function(){\r\n\tif (scheduler._lightbox && !scheduler._custom_lightbox)\r\n\t\tscheduler._lightbox.parentNode.removeChild(scheduler._lightbox);\r\n\tscheduler._lightbox = null;\r\n};\r\nscheduler.cancel_lightbox=function(){\r\n\tif(this._lightbox_id){\r\n\t\tthis.callEvent(\"onEventCancel\",[this._lightbox_id, this._new_event]);\r\n\t}\r\n\r\n\tthis.hide_lightbox();\r\n};\r\nscheduler.hideLightbox = scheduler.cancel_lightbox;// GS-1650 need to use cancel in order to fire onEventCancel event, which is important to refresh the state of recurring series\r\n\r\nscheduler._init_lightbox_events=function(){\r\n\tthis.getLightbox().onclick=function(e){\r\n\t\tvar src=e?e.target:event.srcElement;\r\n\t\tif (!src.className) src=src.previousSibling;\r\n\r\n\t\tif(src && src.className && scheduler._getClassName(src).indexOf(\"dhx_btn_set\") > -1){\r\n\t\t\t// assistive software (e.g. jaws) can dispatch event on the top element of a button\r\n\t\t\tsrc = src.querySelector(\"[dhx_button]\");\r\n\t\t\tif(!src) return;\r\n\t\t}\r\n\r\n\t\tvar className = scheduler._getClassName(src);\r\n\r\n\t\tif (src && className)\r\n\t\t\tswitch(className){\r\n\t\t\t\tcase \"dhx_save_btn\":\r\n\t\t\t\t\tscheduler.save_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dhx_delete_btn\":\r\n\t\t\t\t\tvar c=scheduler.locale.labels.confirm_deleting;\r\n\r\n\t\t\t\t\tscheduler._dhtmlx_confirm(c, scheduler.locale.labels.title_confirm_deleting, function(){\r\n\t\t\t\t\t\tscheduler.deleteEvent(scheduler._lightbox_id);\r\n\t\t\t\t\t\tscheduler._new_event = null; //clear flag, if it was unsaved event\r\n\t\t\t\t\t\tscheduler.hide_lightbox();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dhx_cancel_btn\":\r\n\t\t\t\t\tscheduler.cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (src.getAttribute(\"dhx_button\")) {\r\n\t\t\t\t\t\tscheduler.callEvent(\"onLightboxButton\", [className, src, e]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar index, block, sec;\r\n\t\t\t\t\t\tif (className.indexOf(\"dhx_custom_button\") != -1) {\r\n\t\t\t\t\t\t\tif (className.indexOf(\"dhx_custom_button_\") != -1) {\r\n\t\t\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"index\");\r\n\t\t\t\t\t\t\t\tsec = src.parentNode.parentNode;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = src.getAttribute(\"index\");\r\n\t\t\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index) {\r\n\t\t\t\t\t\t\tblock = scheduler.form_blocks[scheduler.config.lightbox.sections[index].type];\r\n\t\t\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t};\r\n\tthis.getLightbox().onkeydown=function(e){\r\n\t\tvar event = e || window.event;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar buttonTarget = target.querySelector(\"[dhx_button]\");\r\n\r\n\t\tif(!buttonTarget){\r\n\t\t\tbuttonTarget = target.parentNode.querySelector(\".dhx_custom_button, .dhx_readonly\");\r\n\t\t}\r\n\r\n\t\tswitch((e||event).keyCode){\r\n\t\t\tcase 32:{//space\r\n\t\t\t\tif ((e||event).shiftKey) return;\r\n\t\t\t\tif(buttonTarget && buttonTarget.click){\r\n\t\t\t\t\tbuttonTarget.click();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase scheduler.keys.edit_save:\r\n\t\t\t\tif ((e||event).shiftKey) return;\r\n\t\t\t\tif(buttonTarget && buttonTarget.click){\r\n\t\t\t\t\tbuttonTarget.click();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tscheduler.save_lightbox();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase scheduler.keys.edit_cancel:\r\n\t\t\t\tscheduler.cancel_lightbox();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t};\r\n};\r\nscheduler.setLightboxSize=function(){\r\n\tvar d = this._lightbox;\r\n\tif (!d) return;\r\n\r\n\tvar con = d.childNodes[1];\r\n\tcon.style.height=\"0px\";\r\n\tcon.style.height=con.scrollHeight+\"px\";\r\n\td.style.height=con.scrollHeight+scheduler.xy.lightbox_additional_height+\"px\";\r\n\tcon.style.height=con.scrollHeight+\"px\"; //it is incredible , how ugly IE can be\r\n};\r\n\r\nscheduler._init_dnd_events = function(){\r\n\tscheduler.event(document.body, \"mousemove\", scheduler._move_while_dnd);\r\n\tscheduler.event(document.body, \"mouseup\", scheduler._finish_dnd);\r\n\tscheduler._init_dnd_events = function(){};\r\n};\r\nscheduler._move_while_dnd = function(e){\r\n\tif (scheduler._dnd_start_lb){\r\n\t\tif (!document.dhx_unselectable){\r\n\t\t\tdocument.body.className += \" dhx_unselectable\";\r\n\t\t\tdocument.dhx_unselectable = true;\r\n\t\t}\r\n\t\tvar lb = scheduler.getLightbox();\r\n\t\tvar now = (e&&e.target)?[e.pageX, e.pageY]:[event.clientX, event.clientY];\r\n\t\tlb.style.top = scheduler._lb_start[1]+now[1]-scheduler._dnd_start_lb[1]+\"px\";\r\n\t\tlb.style.left = scheduler._lb_start[0]+now[0]-scheduler._dnd_start_lb[0]+\"px\";\r\n\t}\r\n};\r\nscheduler._ready_to_dnd = function(e){\r\n\tvar lb = scheduler.getLightbox();\r\n\tscheduler._lb_start = [parseInt(lb.style.left,10), parseInt(lb.style.top,10)];\r\n\tscheduler._dnd_start_lb = (e&&e.target)?[e.pageX, e.pageY]:[event.clientX, event.clientY];\r\n};\r\nscheduler._finish_dnd = function(){\r\n\tif (scheduler._lb_start){\r\n\t\tscheduler._lb_start = scheduler._dnd_start_lb = false;\r\n\t\tdocument.body.className = document.body.className.replace(\" dhx_unselectable\",\"\");\r\n\t\tdocument.dhx_unselectable = false;\r\n\t}\r\n};\r\nscheduler.getLightbox=function(){ //scheduler.config.wide_form=true;\r\n\tif (!this._lightbox){\r\n\t\tvar d=document.createElement(\"div\");\r\n\t\td.className=\"dhx_cal_light\";\r\n\t\tif (scheduler.config.wide_form)\r\n\t\t\td.className+=\" dhx_cal_light_wide\";\r\n\t\tif (scheduler.form_blocks.recurring)\r\n\t\t\td.className+=\" dhx_cal_light_rec\";\r\n\t\tif (scheduler.config.rtl)\r\n\t\t\td.className+=\" dhx_cal_light_rtl\";\r\n\t\tif (scheduler.config.responsive_lightbox)\r\n\t\t\td.className += \" dhx_cal_light_responsive\";\r\n\r\n\t\tif (/msie|MSIE 6/.test(navigator.userAgent))\r\n\t\t\td.className+=\" dhx_ie6\";\r\n\t\td.style.visibility=\"hidden\";\r\n\t\tvar html = this._lightbox_template;\r\n\r\n\t\tvar buttons = this.config.buttons_left;\r\n\r\n\t\tvar ariaAttr = \"\";\r\n\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\r\n\t\t\thtml += \"<div \"+ariaAttr+\" class='dhx_btn_set dhx_\"+(scheduler.config.rtl?\"right\":\"left\")+\"_btn_set \" + buttons[i] + \"_set'><div dhx_button='1' class='\" + buttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\r\n\t\t}\r\n\r\n\t\tbuttons = this.config.buttons_right;\r\n\t\tvar rtl = scheduler.config.rtl;\r\n\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\r\n\t\t\thtml += \"<div \"+ariaAttr+\" class='dhx_btn_set dhx_\"+(rtl?\"left\":\"right\")+\"_btn_set \" +\r\n\t\t\t\t\t\tbuttons[i] + \"_set' style='float:\"+(rtl?\"left\":\"right\")+\";'><div dhx_button='1' class='\" +\r\n\t\t\t\t\t\tbuttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\r\n\t\t}\r\n\r\n\t\thtml+=\"</div>\";\r\n\t\td.innerHTML=html;\r\n\t\tif (scheduler.config.drag_lightbox){\r\n\t\t\td.firstChild.onmousedown = scheduler._ready_to_dnd;\r\n\t\t\td.firstChild.onselectstart = function(){ return false; };\r\n\t\t\td.firstChild.style.cursor = \"move\";\r\n\t\t\tscheduler._init_dnd_events();\r\n\r\n\t\t}\r\n\r\n\t\tthis._waiAria.lightboxAttr(d);\r\n\r\n\t\tdocument.body.insertBefore(d,document.body.firstChild);\r\n\t\tthis._lightbox=d;\r\n\r\n\t\tvar sns=this.config.lightbox.sections;\r\n\t\thtml=\"\";\r\n\t\tfor (var i=0; i < sns.length; i++) {\r\n\t\t\tvar block=this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id=\"area_\"+this.uid();\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button){\r\n\t\t\t\tvar ariaAttr = scheduler._waiAria.lightboxSectionButtonAttrString(this.locale.labels[\"button_\"+sns[i].button]);\r\n\t\t\t \tbutton = \"<div \"+ariaAttr+\" class='dhx_custom_button' index='\"+i+\"'><div class='dhx_custom_button_\"+sns[i].button+\"'></div><div>\"+this.locale.labels[\"button_\"+sns[i].button]+\"</div></div>\";\r\n\t\t\t }\r\n\r\n\t\t\tif (this.config.wide_form){\r\n\t\t\t\thtml+=\"<div class='dhx_wrap_section'>\";\r\n\t\t\t}\r\n\r\n\t\t\tvar label_name = this.locale.labels[\"section_\"+sns[i].name];\r\n\t\t\tif(typeof label_name !== \"string\"){\r\n\t\t\t\tlabel_name = sns[i].name;\r\n\t\t\t}\r\n\t\t\thtml+=\"<div id='\"+sns[i].id+\"' class='dhx_cal_lsection'>\"+button+ \"<label>\"+label_name+\"</label></div>\"+block.render.call(this,sns[i]);\r\n\t\t\thtml+=\"</div>\";\r\n\t\t}\r\n\r\n\t\tvar ds=d.getElementsByTagName(\"div\");\r\n\t\tfor (var i=0; i<ds.length; i++) {\r\n\t\t\tvar t_ds = ds[i];\r\n\t\t\tvar className = scheduler._getClassName(t_ds);\r\n\t\t\tif (className == \"dhx_cal_larea\") {\r\n\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// bind labels to lightbox inputs\r\n\t\tscheduler._bindLightboxLabels(sns);\r\n\r\n\t\t//sizes\r\n\t\tthis.setLightboxSize();\r\n\r\n\t\tthis._init_lightbox_events(this);\r\n\t\td.style.display=\"none\";\r\n\t\td.style.visibility=\"visible\";\r\n\t}\r\n\treturn this._lightbox;\r\n};\r\n\r\nscheduler._bindLightboxLabels = function(sections){\r\n\t// link section labels to controls using label[for] attribute and label.onclick=control.focus as a fallback\r\n\t// label[for] is preferable for accessibility reasons\r\n\r\n\tfor(var i = 0; i < sections.length; i++){\r\n\t\tvar section = sections[i];\r\n\t\tif(!section.id || !document.getElementById(section.id))\r\n\t\t\tcontinue;\r\n\r\n\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\tvar label = labelBlock.querySelector(\"label\");\r\n\r\n\t\tvar inputBlock = scheduler._get_lightbox_section_node(section);\r\n\t\twhile(inputBlock && !inputBlock.querySelector){\r\n\t\t\tinputBlock = inputBlock.nextSibling;\r\n\t\t}\r\n\r\n\t\tvar fallback = true;\r\n\r\n\t\tif(inputBlock) {\r\n\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif(input){\r\n\t\t\t\tsection.inputId = input.id || \"input_\" + scheduler.uid();\r\n\t\t\t\tif(!input.id)\r\n\t\t\t\t\tinput.id = section.inputId;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\tfallback = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// use control.focus if failed to bind input using label[for]\r\n\t\tif(fallback){\r\n\t\t\tvar control = scheduler.form_blocks[section.type];\r\n\t\t\tif(control.focus){\r\n\t\t\t\tlabel.onclick = (function(section){\r\n\t\t\t\t\treturn function(){\r\n\r\n\t\t\t\t\t\tvar block = scheduler.form_blocks[section.type];\r\n\t\t\t\t\t\tvar node = scheduler._get_lightbox_section_node(section);\r\n\r\n\t\t\t\t\t\tif(block && block.focus)\r\n\t\t\t\t\t\t\tblock.focus.call(scheduler, node);\r\n\t\t\t\t\t};\r\n\t\t\t\t})(section);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.attachEvent(\"onEventIdChange\", function(old_id, new_id){\r\n\tif(this._lightbox_id == old_id)\r\n\t\tthis._lightbox_id = new_id;\r\n});\r\n\r\nscheduler._lightbox_template=\"<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>\";\r\n\r\nscheduler._init_touch_events = function(){\r\n\tvar mobile = this.config.touch  &&\r\n\t\t( ((navigator.userAgent.indexOf(\"Mobile\")!=-1)   ||\r\n\t\t\t(navigator.userAgent.indexOf(\"iPad\")!=-1)       ||\r\n\t\t\t(navigator.userAgent.indexOf(\"Android\")!=-1)    ||\r\n\t\t\t(navigator.userAgent.indexOf(\"Touch\")!=-1)) && !window.MSStream) ||\r\n\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n\tif(mobile){\r\n\t\tthis.xy.scroll_width = 0;\r\n\t\tthis._mobile = true;\r\n\t}\r\n\r\n\tif(this.config.touch){\r\n\r\n\t\tvar touchEventsSupported = true;\r\n\t\ttry {\r\n\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t} catch (e) {\r\n\t\t\ttouchEventsSupported = false;\r\n\t\t}\r\n\r\n\t\tif (touchEventsSupported) {\r\n\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t};\r\n\t\t\t\telse\r\n\t\t\t\t\treturn ev;\r\n\t\t\t}, function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t} else if (window.PointerEvent || window.navigator.pointerEnabled) {\r\n\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\treturn ev;\r\n\t\t\t}, function (ev) {\r\n\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t});\r\n\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\treturn ev;\r\n\t\t\t}, function (ev) {\r\n\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler._touch_events = function(names, accessor, ignore){\r\n\t//webkit on android need to be handled separately\r\n\tvar a_webkit = (navigator.userAgent.indexOf(\"Android\")!=-1) && (navigator.userAgent.indexOf(\"WebKit\")!=-1);\r\n\tvar source, tracker, timer, drag_mode, scroll_mode, action_mode;\r\n\tvar dblclicktime = 0;\r\n\r\n\tfunction attachTouchEvent(element, name, callback){\r\n\t\t//touch gestures must be disabled when ligthbox is opened\r\n\t\telement.addEventListener(name, function(e){\r\n\t\t\tif(scheduler._is_lightbox_open()){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tif (ignore(e)) return;\r\n\t\t\t\treturn callback(e);\r\n\t\t\t}\r\n\t\t}, { passive: false });\r\n\t}\r\n\r\n\tfunction check_direction_swipe(s_ev, e_ev, step, max_dy){\r\n\t\tif (!s_ev || !e_ev) return false;\r\n\r\n\t\tvar t = s_ev.target;\r\n\t\twhile(t && t != scheduler._obj){\r\n\t\t\tt = t.parentNode;\r\n\t\t}\r\n\t\tif(t != scheduler._obj){\r\n\t\t\t//swipe outside scheduler\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// ignore swipe in horizontal timeline\r\n\t\tif(scheduler.matrix && scheduler.matrix[scheduler.getState().mode]){\r\n\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\r\n\t\t\tif(timeline.scrollable){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dy = Math.abs(s_ev.pageY - e_ev.pageY);\r\n\t\tvar dx = Math.abs(s_ev.pageX - e_ev.pageX);\r\n\t\tif (dy < max_dy && dx>step && (!dy || (dx/dy > 3))){\r\n\t\t\tif (s_ev.pageX > e_ev.pageX) {\r\n\t\t\t\tscheduler._click.dhx_cal_next_button();\r\n\t\t\t}else {\r\n\t\t\t\tscheduler._click.dhx_cal_prev_button();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction doMouseMove(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tvar dnd = scheduler.getState().drag_mode,\r\n\t\t\ttimeline = scheduler.matrix ? scheduler.matrix[scheduler._mode] : false;\r\n\r\n\t\tvar original_render = scheduler.render_view_data;\r\n\t\tif(dnd == 'create' && timeline){\r\n\t\t\t//suppress full redraw of timeline on creating event\r\n\t\t\tscheduler.render_view_data = function() {\r\n\t\t\t\tvar id = scheduler.getState().drag_id;\r\n\t\t\t\tvar ev = scheduler.getEvent(id);\r\n\t\t\t\tvar property = timeline.y_property;\r\n\r\n\t\t\t\tvar evs = scheduler.getEvents(ev.start_date, ev.end_date);\r\n\t\t\t\tfor(var i = 0; i < evs.length; i++){\r\n\t\t\t\t\tif(evs[i][property] != ev[property]){\r\n\t\t\t\t\t\tevs.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tev._sorder = evs.length - 1;\r\n\t\t\t\tev._count = evs.length;\r\n\r\n\t\t\t\tthis.render_data([ev], scheduler.getState().mode);\r\n\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tscheduler._on_mouse_move(e);\r\n\r\n\t\tif(dnd == 'create' && timeline){\r\n\t\t\tscheduler.render_view_data = original_render;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble = true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// touchmove\r\n\tattachTouchEvent(document.body, names[0], function(e){\r\n\t\tif (ignore(e)) return;\r\n\r\n\t\tvar acc = accessor(e);\r\n\t\tif(!acc) return;\r\n\t\tif (drag_mode){\r\n\t\t\tdoMouseMove(acc);\r\n\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._update_global_tip();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//if (tracker && a_webkit){\r\n\t\t//\tcheck_direction_swipe(tracker, accessor(e), 0);\r\n\t\t//}\r\n\r\n\t\ttracker = accessor(e);\r\n\t\t//ignore common and scrolling moves\r\n\t\tif (!action_mode) return;\r\n\r\n\t\t//multitouch\r\n\t\tif (!tracker){\r\n\t\t\tscroll_mode = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//target changed - probably in scroll mode\r\n\r\n\t\tif (source.target != tracker.target || (Math.abs(source.pageX - tracker.pageX) > 5) || (Math.abs(source.pageY - tracker.pageY) > 5)){\r\n\t\t\tscroll_mode = true;\r\n\t\t\tclearTimeout(timer);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t//attachTouchEvent(this._els[\"dhx_cal_data\"][0], \"scroll\", drag_cancel);\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"touchcancel\", drag_cancel);\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"contextmenu\", function(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tif (action_mode){\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e||event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t// touchstart\r\n\tattachTouchEvent(this._obj, names[1], function(e){\r\n\t\t// block pull-to-refresh\r\n\t\tif(document && document.body){\r\n\t\t\tdocument.body.classList.add(\"dhx_cal_touch_active\");\r\n\t\t}\r\n\r\n\t\tif (ignore(e)) return;\r\n\t\tscheduler._pointerDragId = e.pointerId;\r\n\r\n\t\tvar fake_event;\r\n\t\tdrag_mode = scroll_mode = false;\r\n\t\taction_mode = true;\r\n\t\tfake_event = tracker = accessor(e);\r\n\r\n\t\tif (!fake_event){\r\n\t\t\tscroll_mode = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//dbl click\r\n\t\tvar now = new Date();\r\n\r\n\t\tif (!scroll_mode && !drag_mode && now - dblclicktime < 250){\r\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tfake_event.type = \"dblclick\";\r\n\t\t\t\tscheduler._on_dbl_click(fake_event);\r\n\t\t\t}, 50);\r\n\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._block_next_stop = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdblclicktime = now;\r\n\r\n\t\t//drag\r\n\r\n\t\tif (scroll_mode || drag_mode || !scheduler.config.touch_drag)\r\n\t\t\treturn;\r\n\r\n\t\tvar actTask = scheduler._locate_event(document.activeElement);\r\n\t\tvar fakeTask = scheduler._locate_event(fake_event.target);\r\n\t\tvar sourceTask = source? scheduler._locate_event(source.target) : null;\r\n\r\n\t\tif(actTask && fakeTask && actTask == fakeTask && actTask != sourceTask)\r\n\t\t{\r\n\t\t\tif(e.preventDefault) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\r\n\t\t\tsource = fake_event;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//there is no target\r\n\t\ttimer = setTimeout(function(){\r\n\r\n\t\t\tdrag_mode = true;\r\n\t\t\tvar target = source.target;\r\n\t\t\tvar className = scheduler._getClassName(target);\r\n\t\t\tif (target && className.indexOf(\"dhx_body\") != -1)\r\n\t\t\t\ttarget = target.previousSibling;\r\n\r\n\t\t\tscheduler._on_mouse_down(source, target);\r\n\t\t\tif (scheduler._drag_mode && scheduler._drag_mode != \"create\"){\r\n\t\t\t\tscheduler.for_rendered(scheduler._drag_id, function(node, i) {\r\n\t\t\t\t\tnode.style.display='none';\r\n\t\t\t\t\tscheduler._rendered.splice(i, 1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (scheduler.config.touch_tip) {\r\n\t\t\t\tscheduler._show_global_tip();\r\n\t\t\t}\r\n\t\t\tscheduler.updateEvent(scheduler._drag_id);\r\n\t\t},scheduler.config.touch_drag);\r\n\r\n\t\tsource = fake_event;\r\n\t});\r\n\tfunction drag_cancel(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tscheduler._hide_global_tip();\r\n\t\tif (drag_mode){\r\n\t\t\tscheduler._on_mouse_up( accessor(e||event) );\r\n\t\t\tscheduler._temp_touch_block = false;\r\n\t\t}\r\n\t\tscheduler._drag_id = null;\r\n\t\tscheduler._drag_mode=null;\r\n\t\tscheduler._drag_pos=null;\r\n\t\tscheduler._pointerDragId = null;\r\n\t\tclearTimeout(timer);\r\n\t\tdrag_mode = action_mode = false;\r\n\t\tscroll_mode = true;\r\n\t}\r\n\r\n\t// touch end\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], names[2], function(e){\r\n\t\tif(document && document.body){\r\n\t\t\tdocument.body.classList.remove(\"dhx_cal_touch_active\");\r\n\t\t}\r\n\r\n\t\tif (ignore(e)) return;\r\n\r\n\t\tif(scheduler.config.touch_swipe_dates){\r\n\t\t\tif (!drag_mode && check_direction_swipe(source, tracker, 200, 100)) {\r\n\t\t\t\tscheduler._block_next_stop = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (drag_mode) {\r\n\t\t\tscheduler._ignore_next_click = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\tdrag_cancel(e);\r\n\t\tif (scheduler._block_next_stop){\r\n\t\t\tscheduler._block_next_stop = false;\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\tscheduler.event(document.body, names[2], drag_cancel);\r\n};\r\n\r\nscheduler._show_global_tip = function(){\r\n\tscheduler._hide_global_tip();\r\n\r\n\tvar toptip = scheduler._global_tip = document.createElement(\"div\");\r\n\ttoptip.className='dhx_global_tip';\r\n\r\n\tscheduler._update_global_tip(1);\r\n\r\n\tdocument.body.appendChild(toptip);\r\n};\r\nscheduler._update_global_tip = function(init){\r\n\tvar toptip = scheduler._global_tip;\r\n\tif (toptip){\r\n\t\tvar time = \"\";\r\n\t\tif (scheduler._drag_id && !init){\r\n\t\t\tvar ev = scheduler.getEvent(scheduler._drag_id);\r\n\t\t\tif (ev)\r\n\t\t\t\ttime = \"<div>\" + (ev._timed ? scheduler.templates.event_header(ev.start_date, ev.end_date, ev):scheduler.templates.day_date(ev.start_date, ev.end_date, ev)) + \"</div>\";\r\n\t\t}\r\n\r\n\t\tif (scheduler._drag_mode == \"create\" || scheduler._drag_mode == \"new-size\")\r\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_create || \"Drag to create\")+time;\r\n\t\telse\r\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_move || \"Drag to move\")+time;\r\n\t}\r\n};\r\nscheduler._hide_global_tip = function(){\r\n\tvar toptip = scheduler._global_tip;\r\n\tif (toptip && toptip.parentNode){\r\n\t\ttoptip.parentNode.removeChild(toptip);\r\n\t\tscheduler._global_tip = 0;\r\n\t}\r\n};\r\n\r\nscheduler._dp_init=function(dp){\r\n\tdp._methods=[\"_set_event_text_style\",\"\",\"_dp_change_event_id\",\"_dp_hook_delete\"];\r\n\r\n\tthis._dp_change_event_id = function(id, new_id){\r\n\t\tif(!scheduler.getEvent(id))\r\n\t\t\treturn;\r\n\r\n\t\tscheduler.changeEventId(id, new_id);\r\n\t};\r\n\r\n\tthis._dp_hook_delete = function(id, new_id){\r\n\t\tif(!scheduler.getEvent(id))\r\n\t\t\treturn;\r\n\r\n\t\tif(new_id && id != new_id){\r\n\t\t\tif(this.getUserData(id, dp.action_param) == \"true_deleted\")\r\n\t\t\t\tthis.setUserData(id, dp.action_param, \"updated\");\r\n\r\n\t\t\tthis.changeEventId(id, new_id);\r\n\t\t}\r\n\t\treturn this.deleteEvent(new_id, true);\r\n\t};\r\n\tthis.attachEvent(\"onEventAdded\",function(id){\r\n\t\tif (!this._loading && this._validId(id))\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t});\r\n\tthis.attachEvent(\"onConfirmedBeforeEventDelete\", function(id){\r\n\t\tif (!this._validId(id)) return;\r\n\t\tvar z=dp.getState(id);\r\n\r\n\t\tif (z==\"inserted\" || this._new_event) {  dp.setUpdated(id,false);\t\treturn true; }\r\n\t\tif (z==\"deleted\")  return false;\r\n    \tif (z==\"true_deleted\")  return true;\r\n\r\n\t\tdp.setUpdated(id,true,\"deleted\");\r\n      \treturn false;\r\n\t});\r\n\tthis.attachEvent(\"onEventChanged\",function(id){\r\n\t\tif (!this._loading && this._validId(id))\r\n\t\t\tdp.setUpdated(id,true,\"updated\");\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onClearAll\", function(){\r\n\t\t// clear dataprocessor state when scheduler is reset\r\n\t\tdp._in_progress={};\r\n\t\tdp._invalid={};\r\n\t\tdp.updatedRows = [];\r\n\t\tdp._waitMode = 0;\r\n\t});\r\n\r\n\r\n\tvar serialize = function(obj, data, prefix){\r\n\t\tprefix = prefix || \"\";\r\n\t\tdata = data || {};\r\n\r\n\t\tfor (var a in obj){\r\n\t\t\tif (a.indexOf(\"_\") === 0) continue;\r\n\t\t\tif (obj[a] && obj[a].getUTCFullYear){ //not very good, but will work\r\n\t\t\t\tdata[prefix+a] = this.obj._helpers.formatDate(obj[a]);\r\n\t\t\t}else {\r\n\t\t\t\tif (obj[a] && typeof obj[a] == \"object\"){\r\n\t\t\t\t\tserialize.call(this, obj[a], data, prefix+a+\".\");\r\n\t\t\t\t}else {\r\n\t\t\t\t\tdata[prefix+a] = obj[a];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t};\r\n\tvar serializeJSON = function(obj){\r\n\t\tvar copy = scheduler.utils.copy(obj);\r\n\t\tfor(var i in copy){\r\n\t\t\tif (i.indexOf(\"_\") === 0) {\r\n\t\t\t\tdelete copy[i];\r\n\t\t\t} else if (copy[i]) {\r\n\t\t\t\tif(copy[i].getUTCFullYear){\r\n\t\t\t\t\tcopy[i] = this.obj._helpers.formatDate(copy[i]);\r\n\t\t\t\t} else if(typeof copy[i] == \"object\") {\r\n\t\t\t\t\tcopy[i] = serializeJSON(copy[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn copy;\r\n\t};\r\n\r\n\tdp._getRowData=function(id,pref){\r\n\t\tvar ev=this.obj.getEvent(id);\r\n\t\tif(this._tMode == \"JSON\"){\r\n\t\t\treturn serializeJSON.call(this, ev);\r\n\t\t}else{\r\n\t\t\treturn serialize.call(this, ev);\r\n\t\t}\r\n\t};\r\n\tdp._clearUpdateFlag=function(){};\r\n\r\n\tdp.attachEvent(\"insertCallback\", scheduler._update_callback);\r\n\tdp.attachEvent(\"updateCallback\", scheduler._update_callback);\r\n\tdp.attachEvent(\"deleteCallback\", function(upd, id) {\r\n\t\tif (this.obj.getEvent(id)){\r\n\t\t\tthis.obj.setUserData(id, this.action_param, \"true_deleted\");\r\n\t\t\tthis.obj.deleteEvent(id);\r\n\t\t} else if (this.obj._add_rec_marker)\r\n\t\t\tthis.obj._update_callback(upd, id);\r\n\t});\r\n\r\n};\r\n\r\nscheduler._validId=function(id){\r\n\treturn true;\r\n};\r\n\r\nscheduler.setUserData=function(id,name,value){\r\n\tif (id){\r\n\t\tvar ev = this.getEvent(id);\r\n\t\tif(ev) ev[name]=value;\r\n\t}else{\r\n\t\tthis._userdata[name]=value;\r\n\t}\r\n};\r\nscheduler.getUserData=function(id,name){\r\n\tif (id){\r\n\t\tvar ev = this.getEvent(id);\r\n\t\tif(ev)\r\n\t\t\treturn ev[name];\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}else{\r\n\t\treturn this._userdata[name];\r\n\t}\r\n};\r\nscheduler._set_event_text_style=function(id,style){\r\n\tif(!scheduler.getEvent(id))\r\n\t\treturn;\r\n\r\n\tthis.for_rendered(id,function(r){\r\n\t\tr.style.cssText+=\";\"+style;\r\n\t});\r\n\tvar ev = this.getEvent(id);\r\n\tev[\"_text_style\"]=style;\r\n\tthis.event_updated(ev);\r\n};\r\n\r\nscheduler._update_callback = function(upd,id){\r\n\tvar data\t\t=\tscheduler._xmlNodeToJSON(upd.firstChild);\r\n\r\n\t//fix for updates of recurring events\r\n\tif (data.rec_type == \"none\") data.rec_pattern = \"none\";\r\n\tdata.text\t\t=\tdata.text||data._tagvalue;\r\n\tdata.start_date\t=\tscheduler._helpers.parseDate(data.start_date);\r\n\tdata.end_date\t=\tscheduler._helpers.parseDate(data.end_date);\r\n\r\n\tscheduler.addEvent(data);\r\n\tif (scheduler._add_rec_marker)\r\n\t\tscheduler.setCurrentView();\r\n};\r\nscheduler.getRootView = function() {\r\n\treturn {\r\n\t\tview: {\r\n\t\t\trender: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttag: \"div\",\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tattrs: {\r\n\t\t\t\t\t\tstyle: \"width:100%;height:100%;\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\thooks: {\r\n\t\t\t\t\t\t\"didInsert\": function(){\r\n\t\t\t\t\t\t\tscheduler.setCurrentView();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tel: this.el,\r\n\t\t\t\t\t\t\ttype: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tinit: function(){\r\n\t\t\t\tvar container = document.createElement(\"DIV\");\r\n\t\t\t\tcontainer.id = \"scheduler_\"+ scheduler.uid();\r\n\t\t\t\tcontainer.style.width = \"100%\";\r\n\t\t\t\tcontainer.style.height = \"100%\";\r\n\t\t\t\tcontainer.classList.add(\"dhx_cal_container\");\r\n\t\t\t\tcontainer.cmp = \"grid\";\r\n\t\t\t\tcontainer.innerHTML = '<div class=\"dhx_cal_navline\">' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_prev_button\">&nbsp;</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_next_button\">&nbsp;</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_today_button\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_date\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" name=\"day_tab\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" name=\"week_tab\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" name=\"month_tab\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_header\">' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_data\">' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\t\tscheduler.init(container);\r\n\r\n\t\t\t\tthis.el = container;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttype: 4\r\n\t};\r\n};\r\nscheduler._skin_settings = {\r\n\tfix_tab_position: [1,0],\r\n\tuse_select_menu_space: [1,0],\r\n\twide_form: [1,0],\r\n\r\n\thour_size_px: [44,42],\r\n\tdisplayed_event_color: [\"#ff4a4a\", \"ffc5ab\"],\r\n\tdisplayed_event_text_color: [\"#ffef80\", \"7e2727\"]\r\n};\r\n\r\nscheduler._skin_xy = {\r\n\tlightbox_additional_height: [90,50],\r\n\tnav_height: [59,22],\r\n\tbar_height: [24,20]\r\n};\r\n\r\n// material skin uses a different box sizing model than other skins, and also requires some post-processing.\r\n// In order to render events correctly, we need to know which box sizing model is used\r\n// We can detect it by styles applied, taking into account that styles may be loaded after scheduler is rendered\r\n\r\nscheduler._is_material_skin = function(){\r\n\tif(!scheduler.skin){\r\n\t\treturn checkIfMaterialSkin();\r\n\t}else{\r\n\t\treturn ((scheduler.skin + \"\").indexOf(\"material\") > -1);\r\n\t}\r\n};\r\n\r\nvar calculatedMaterial;\r\nfunction checkIfMaterialSkin(){\r\n\tif(calculatedMaterial === undefined){\r\n\t\tvar probe = document.createElement(\"div\");\r\n\t\tprobe.style.position = \"absolute\";\r\n\t\tprobe.style.left = \"-9999px\";\r\n\t\tprobe.style.top = \"-9999px\";\r\n\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\r\n\t\t\t\"<div class='dhx_cal_scale_placeholder'>\" +\r\n\t\t\t\"</div>\"+\r\n\t\t\"<div>\";\r\n\t\tdocument.body.appendChild(probe);\r\n\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_cal_scale_placeholder\"));\r\n\t\tvar position = styles.getPropertyValue('position');\r\n\t\tif(position === \"absolute\"){\r\n\t\t\t// page has skins for placeholder element from material skin\r\n\t\t\tcalculatedMaterial = true;\r\n\t\t}else{\r\n\t\t\tcalculatedMaterial = false;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tcalculatedMaterial = null;\r\n\t\t}, 500);\r\n\t}\r\n\treturn calculatedMaterial;\r\n}\r\n\r\nvar cachedBorderBoxValue;\r\nfunction checkIfBorderBoxStyling(){\r\n\tif(scheduler._is_material_skin()){\r\n\t\treturn true;\r\n\t}else{\r\n\t\tif(cachedBorderBoxValue === undefined){\r\n\t\t\tvar probe = document.createElement(\"div\");\r\n\t\t\tprobe.style.position = \"absolute\";\r\n\t\t\tprobe.style.left = \"-9999px\";\r\n\t\t\tprobe.style.top = \"-9999px\";\r\n\t\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\r\n\t\t\t\t\"<div class='dhx_cal_data'>\" +\r\n\t\t\t\t\t\"<div class='dhx_cal_event'><div class='dhx_body'></div>\"+\r\n\t\t\t\t\"</div>\"+\r\n\t\t\t\"<div>\";\r\n\r\n\t\t\tdocument.body.appendChild(probe);\r\n\t\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_body\"));\r\n\t\t\tvar boxSizing = styles.getPropertyValue('box-sizing');\r\n\t\t\tdocument.body.removeChild(probe);\r\n\t\t\tcachedBorderBoxValue = !!(boxSizing === \"border-box\");\r\n\r\n\t\t\tif(!cachedBorderBoxValue){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tcachedBorderBoxValue = undefined;\r\n\t\t\t\t}, 1000);// recalculate in case scheduler initialized before skin is loaded\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn cachedBorderBoxValue;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction refreshAfterLoad(){\r\n\tif(scheduler._is_material_skin() || scheduler._border_box_events()){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar oldStyling = cachedBorderBoxValue;\r\n\tcachedBorderBoxValue = undefined;\r\n\tcalculatedMaterial = undefined;\r\n\tvar newStyling = checkIfBorderBoxStyling();\r\n\r\n\t// if box styling model changed - means scheduler was rendered before stylesheet was loaded or parsed inline\r\n\t// repaint scheduler in order to apply new styles\r\n\tif(oldStyling !== newStyling && scheduler.$container && scheduler.getState().mode){\r\n\t\tscheduler.setCurrentView();\r\n\t}\r\n}\r\nwindow.addEventListener('DOMContentLoaded', refreshAfterLoad);\r\nwindow.addEventListener('load', refreshAfterLoad);\r\n\r\nscheduler._border_box_events = function(){\r\n\treturn checkIfBorderBoxStyling();\r\n};\r\n\r\nscheduler._configure = function(col, data, skin){\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\")\r\n\t\t\tcol[key] = data[key][skin];\r\n};\r\nscheduler._skin_init = function(){\r\n\tif (!scheduler.skin){\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxscheduler_([a-z]+).css\");\r\n\t\t\tif (res){\r\n\t\t\t\tscheduler.skin = res[1];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar set = 0;\r\n\tif (scheduler.skin && (scheduler.skin === \"classic\" || scheduler.skin === \"glossy\")) set = 1;\r\n\r\n\tif(scheduler._is_material_skin()){\r\n\t\tvar defaultButtonsLeft = scheduler.config.buttons_left.$inital;\r\n\t\tvar defaultButtonsRight = scheduler.config.buttons_right.$inital;\r\n\t\tif(defaultButtonsLeft && scheduler.config.buttons_left.slice().join() == defaultButtonsLeft &&\r\n\t\t\tdefaultButtonsRight && scheduler.config.buttons_right.slice().join() == defaultButtonsRight){\r\n\t\t\tvar tmp = scheduler.config.buttons_left.slice();\r\n\t\t\tscheduler.config.buttons_left = scheduler.config.buttons_right.slice();\r\n\t\t\tscheduler.config.buttons_right = tmp;\r\n\t\t}\r\n\t\tscheduler.xy.event_header_height = 18;\r\n\t//\tscheduler.xy.menu_width = 25;\r\n\t\tscheduler.xy.week_agenda_scale_height = 35;\r\n\t\tscheduler.xy.map_icon_width = 38;\r\n\t\tscheduler._lightbox_controls.defaults.textarea.height = 64;\r\n\t\tscheduler._lightbox_controls.defaults.time.height = 'auto';\r\n\t}\r\n\r\n\t//apply skin related settings\r\n\tthis._configure(scheduler.config, scheduler._skin_settings, set);\r\n\tthis._configure(scheduler.xy, scheduler._skin_xy, set);\r\n\r\n\tif (scheduler.skin === \"flat\"){\r\n\t\tscheduler.xy.scale_height = 35;\r\n\t\tscheduler.templates.hour_scale = function(date){\r\n\t\t\tvar min = date.getMinutes();\r\n\t\t\tmin = min < 10 ? \"0\"+min : min;\r\n\t\t\tvar html = \"<span class='dhx_scale_h'>\"+ date.getHours() +\"</span>\"+\r\n\t\t\t\t\"<span class='dhx_scale_m'>&nbsp;\"+ min +\"</span>\";\r\n\t\t\treturn html;\r\n\t\t};\r\n\t}\r\n\r\n\t//classic skin need not any further customization\r\n\tif (set) return;\r\n\r\n\r\n\tvar minic = scheduler.config.minicalendar;\r\n\tif (minic) minic.padding = 14;\r\n\r\n\tscheduler.templates.event_bar_date = function(start,end,ev) {\r\n\t\treturn \"• <b>\"+scheduler.templates.event_date(start)+\"</b> \";\r\n\t};\r\n\r\n\t//scheduler._lightbox_template=\"<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span><div class='dhx_close_icon'></div></div><div class='dhx_cal_larea'></div>\";\r\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\r\n\t\tvar date_to_str = scheduler.date.date_to_str(\"%d\");\r\n\t\tif(!scheduler.templates._old_month_day){\r\n\t\t\tscheduler.templates._old_month_day = scheduler.templates.month_day;\r\n\t\t}\r\n\t\tvar old_month_day = scheduler.templates._old_month_day;\r\n\t\tscheduler.templates.month_day = function(date) {\r\n\t\t\tif (this._mode == \"month\") {\r\n\t\t\t\tvar label = date_to_str(date);\r\n\t\t\t\tif (date.getDate() == 1) {\r\n\t\t\t\t\tlabel = scheduler.locale.date.month_full[date.getMonth()] + \" \" + label;\r\n\t\t\t\t}\r\n\t\t\t\tif (+date == +scheduler.date.date_part(this._currentDate())) {\r\n\t\t\t\t\tlabel = scheduler.locale.labels.dhx_cal_today_button + \" \" + label;\r\n\t\t\t\t}\r\n\t\t\t\treturn label;\r\n\t\t\t} else {\r\n\t\t\t\treturn old_month_day.call(this, date);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tif (scheduler.config.fix_tab_position){\r\n\t\t\tvar navline_divs = scheduler._els[\"dhx_cal_navline\"][0].getElementsByTagName('div');\r\n\t\t\tvar minical = null;\r\n\t\t\tvar tabs = [];\r\n\t\t\tvar last = 211;\r\n\t\t\tvar positions = [\r\n\t\t\t\t14,\r\n\t\t\t\t75,\r\n\t\t\t\t136\r\n\t\t\t];\r\n\t\t\tvar inc = 14;\r\n\r\n\t\t\tif(scheduler._is_material_skin()){\r\n\t\t\t\tpositions = [16, 103, 192];\r\n\t\t\t\tlast = 294;\r\n\t\t\t\tinc = -1;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i=0; i<navline_divs.length; i++) {\r\n\t\t\t\tvar div = navline_divs[i];\r\n\t\t\t\tvar name = div.getAttribute(\"name\");\r\n\t\t\t\tif (name) { // mode tab\r\n\t\t\t\t\tdiv.style.right = \"auto\";\r\n\t\t\t\t\tswitch (name) {\r\n\t\t\t\t\t\tcase \"day_tab\":\r\n\t\t\t\t\t\t\tdiv.style.left = positions[0] + \"px\";\r\n\t\t\t\t\t\t\tdiv.className += \" dhx_cal_tab_first\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"week_tab\":\r\n\t\t\t\t\t\t\tdiv.style.left = positions[1] + \"px\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"month_tab\":\r\n\t\t\t\t\t\t\tdiv.style.left = positions[2] + \"px\";\r\n\t\t\t\t\t\t\tdiv.className += \" dhx_cal_tab_last\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tdiv.style.left = last+\"px\";\r\n\t\t\t\t\t\t\tdiv.className += \" dhx_cal_tab_standalone\";\r\n\t\t\t\t\t\t\tlast = last + inc + div.offsetWidth;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiv.className += \" \" + name;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif((div.className || \"\").indexOf(\"dhx_minical_icon\") === 0 &&\r\n\t\t\t\t\t\tdiv.parentNode == scheduler._els[\"dhx_cal_navline\"][0]){\r\n\t\t\t\t\t\t// if default minicalendar icon\r\n\t\t\t\t\t\tminical = div;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(minical){\r\n\t\t\t\tminical.style.left = last+\"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\tscheduler._skin_init = function(){};\r\n};\r\n\r\n\r\nif (window.jQuery){\r\n\r\n(function( $ ){\r\n\tvar counter = 0;\r\n\tvar methods = [];\r\n\t$.fn.dhx_scheduler = function(config){\r\n\t\tif (typeof(config) === 'string') {\r\n\t\t\tif (methods[config] ) {\r\n\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t}else {\r\n\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_scheduler');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar views = [];\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\tif (!this.getAttribute(\"dhxscheduler\")){\r\n\t\t\t\t\t\tvar name = \"scheduler\";\r\n\t\t\t\t\t\tif (counter){\r\n\t\t\t\t\t\t\tname = \"scheduler\" + (counter+1);\r\n\t\t\t\t\t\t\twindow[name] = Scheduler.getSchedulerInstance();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar comp  = window[name];\r\n\r\n\t\t\t\t\t\tthis.setAttribute(\"dhxscheduler\", name);\r\n\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\tcomp.config[key] = config[key];\r\n\r\n\t\t\t\t\t\tif (!this.getElementsByTagName(\"div\").length){\r\n\t\t\t\t\t\t\tthis.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\">&nbsp;</div><div class=\"dhx_cal_next_button\">&nbsp;</div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>';\r\n\t\t\t\t\t\t\tthis.className += \" dhx_cal_container\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcomp.init(this, comp.config.date, comp.config.mode);\r\n\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\tcomp.parse(config.data);\r\n\r\n\t\t\t\t\t\tviews.push(comp);\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tviews.push(window[this.getAttribute(\"dhxscheduler\")]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (views.length === 1) return views[0];\r\n\t\t\treturn views;\r\n\t\t}\r\n\t};\r\n\t\r\n\r\n\t\r\n\r\n})(jQuery);\r\n\r\n}\r\n(function(){\r\n\r\n\tvar setCurrentView = scheduler.setCurrentView,\r\n\t\tupdateView = scheduler.updateView;\r\n\tvar update_view_timer = null,\r\n\t\tcurr_view_timer = null;\r\n\r\n\tvar lazy_setCurrentView = function(date, mode){\r\n\t\tvar self = this;\r\n\t\twindow.clearTimeout(curr_view_timer);\r\n\t\twindow.clearTimeout(update_view_timer);\r\n\r\n\t\tvar oldDate = self._date,\r\n\t\t\toldMode = self._mode;\r\n\t\tupdateFlags(this, date, mode);\r\n\r\n\t\tcurr_view_timer = setTimeout(function(){\r\n\r\n\t\t\tif (!self.callEvent(\"onBeforeViewChange\", [oldMode, oldDate, mode || self._mode, date || self._date])){\r\n\t\t\t\tupdateFlags(self, oldDate, oldMode);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tupdateView.call(self, date, mode);\r\n\t\t\tself.callEvent(\"onViewChange\", [self._mode, self._date]);\r\n\r\n\t\t\twindow.clearTimeout(update_view_timer);\r\n\t\t\tcurr_view_timer = 0;\r\n\t\t}, scheduler.config.delay_render);\r\n\t};\r\n\tvar lazy_updateView = function(date, mode){\r\n\t\tvar self = this,\r\n\t\t\tars = arguments;\r\n\r\n\t\tupdateFlags(this, date, mode);\r\n\r\n\t\twindow.clearTimeout(update_view_timer);\r\n\t\tupdate_view_timer = setTimeout(function(){\r\n\t\t\tif(curr_view_timer)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tupdateView.apply(self, ars);\r\n\t\t}, scheduler.config.delay_render);\r\n\t};\r\n\tfunction updateFlags(scheduler, date, mode){\r\n\t\tif(date)\r\n\t\t\tscheduler._date = date;\r\n\t\tif(mode)\r\n\t\t\tscheduler._mode = mode;\r\n\r\n\t}\r\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\r\n\t\tif(scheduler.config.delay_render){\r\n\t\t\tscheduler.setCurrentView = lazy_setCurrentView;\r\n\t\t\tscheduler.updateView = lazy_updateView;\r\n\t\t}else{\r\n\t\t\tscheduler.setCurrentView = setCurrentView;\r\n\t\t\tscheduler.updateView = updateView;\r\n\t\t}\r\n\t});\r\n\r\n})();\r\n\r\n\tfor (var i = 0; i < Scheduler._schedulerPlugins.length; i++) {\r\n\t\tScheduler._schedulerPlugins[i](scheduler);\r\n\t}\r\n\tscheduler._internal_id = Scheduler._seed++;\r\n\r\n\tif (Scheduler.$syncFactory)\r\n\t\tScheduler.$syncFactory(scheduler);\r\n\r\n\treturn scheduler;\r\n};\r\n\twindow.scheduler = Scheduler.getSchedulerInstance(); // default instance\r\n\r\n\twindow.Scheduler = {\r\n\t\tplugin: scheduler.bind(Scheduler.plugin, Scheduler)\r\n\t};\r\n\tif (dhtmlx && dhtmlx.attaches) {\r\n\tdhtmlx.attaches.attachScheduler = function (day, mode, tabs, scheduler) {\r\n\t\tvar tabs = tabs || '<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>';\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"dhxSchedObj_\" + this._genStr(12);\r\n\t\tobj.innerHTML = '<div id=\"' + obj.id + '\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\"><div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\">&nbsp;</div><div class=\"dhx_cal_next_button\">&nbsp;</div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div>' + tabs + '</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>';\r\n\t\tdocument.body.appendChild(obj.firstChild);\r\n\r\n\t\tthis.attachObject(obj.id, false, true);\r\n\r\n\t\tthis.vs[this.av].sched = scheduler;\r\n\t\tthis.vs[this.av].schedId = obj.id;\r\n\t\tscheduler.setSizes = scheduler.updateView;\r\n\t\tscheduler.destructor = function () { };\r\n\t\tscheduler.init(obj.id, day, mode);\r\n\r\n\t\treturn this.vs[this._viewRestore()].sched;\r\n\t};\r\n}\r\n})();"]},"metadata":{},"sourceType":"script"}